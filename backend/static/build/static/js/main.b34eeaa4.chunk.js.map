{"version":3,"sources":["Views/Home/index.module.scss","Images/indoc-icon.png","Images/canarie-cover.jpeg","Images/study_cover.jpg","Views/MyStudies/MyStudiesContent/index.module.scss","APIs/config.js","APIs/auth.js","APIs/study.js","Utility/fakeDataGenerator.js","Utility/caseConvert.js","Redux/Reducers/refreshToken.js","Redux/actionTypes.js","Service/tokenManager/tokenManager.js","Redux/Reducers/isLogin.js","Redux/Reducers/studies.js","Redux/Reducers/study.js","Redux/Reducers/user.js","Redux/Reducers/publicStudies.js","Redux/Reducers/redCapLinks.js","Redux/Reducers/studyAttrs.js","Redux/Reducers/index.js","Redux/store.js","Utility/reduxActionWrapper.js","Redux/actions.js","Utility/resetReduxState.js","Utility/stringConvert.js","APIs/user.js","Components/Modals/ResetPasswordModal.jsx","Components/Layout/Header.jsx","Components/Layout/RightSlider.jsx","Components/Layout/LeftSider.jsx","Components/Layout/StandardLayout.jsx","Components/Layout/Footer.jsx","Components/Cards/StudiesTile.jsx","Views/Home/Home.jsx","Hooks/useMobile.js","Service/userAuthManager/namespace.js","Service/namespace.js","Service/userAuthManager/userAuthManager.js","Views/Login/Login.jsx","Views/Registration/Registration.jsx","Views/Studies/StudiesContent/StudiesFilter.jsx","Views/Studies/StudiesContent/StudiesContent.jsx","Views/Studies/Studies.jsx","Components/ProtectedRoute/ProtectedRoute.jsx","Views/Study/Menu/Menu.jsx","Views/Study/Menu/BreadCrumbs.jsx","Views/Study/Study.jsx","Views/AdminUsers/PopConfirmDropdown.jsx","Views/AdminUsers/InviteUser.jsx","Views/AdminUsers/BulkInviteUsers.jsx","Components/Table/PlatformUsersTable.jsx","Components/Table/InvitationTable.jsx","Components/ScalableDetail/PlatformTable.jsx","Components/ScalableDetail/UserDetails.jsx","Components/ScalableDetail/ExternalIdentity.jsx","Components/ScalableDetail/ScalableDetails.jsx","Views/AdminUsers/AdminUsers.jsx","Components/Modals/TermsOfUseModal.jsx","Components/Form/CreateAccount.jsx","Views/MyStudies/MyStudiesContent/MyStudiesContentPublic.jsx","Views/MyStudies/MyStudiesContent/MyStudiesContent.jsx","Views/MyStudies/MyStudies.jsx","Views/ErrorPage/ErrorPage.jsx","Views/Invitations/Invite.jsx","Components/Form/ForgetPassword.jsx","Views/ForgetPassword/index.jsx","Routes/app.js","Views/Study/Landing/Landing.jsx","Components/Modals/InvitePatientModal.jsx","Views/Study/Patients/Patients.jsx","Views/Study/Config/Tabs/GeneralInfo.jsx","Views/Study/Config/Tabs/StudyConfig.jsx","Views/Study/Config/Components/manifest.values.js","Views/Study/Config/Utils/FormatValidators.js","Views/Study/Config/Components/ManifestEdit/AttrAddBar.jsx","Views/Study/Config/Components/ManifestEdit/AttrEditBar.jsx","Views/Study/Config/Components/ManifestEdit/FileManifestExistentTable.jsx","Views/Study/Config/Components/ManifestEdit/FileManifestItem.jsx","Views/Study/Config/Tabs/StudyAttributes.jsx","Views/Study/Config/Config.jsx","Components/Modals/AddApplicableUserModal.jsx","Views/Study/Researchers/Researchers.jsx","Views/Study/Survey/Survey.jsx","Routes/study.js","Views/ErrorPage/404/Error404.jsx","Views/ErrorPage/403/Error403.jsx","Routes/errorPage.js","Views/Registration/RegistrationContent.jsx","Routes/registration.js","Views/Registration/RegistrationConfirmation.jsx","Views/Invitations/Login.jsx","Views/Invitations/Question.jsx","Views/Invitations/InviteContent.jsx","Routes/invitations.js","Routes/index.js","Components/Modals/RefreshModal.jsx","App.js","i18n.js","index.js","Views/Login/index.module.scss","Views/Registration/index.module.scss","Views/Study/Landing/index.module.scss","Components/Cards/index.module.scss","Views/Studies/StudiesContent/index.module.scss","Utility/parseJwt.js","Views/AdminUsers/index.module.scss","Views/Study/Patients/index.module.scss","Views/Study/Researchers/index.module.scss","Views/Study/Config/index.module.scss","Components/Layout/index.module.scss"],"names":["module","exports","getCookie","cname","name","ca","decodeURIComponent","document","cookie","split","i","length","c","charAt","substring","indexOf","token","serverAxios","axios","create","baseURL","defaults","headers","post","timeout","common","CancelToken","login","data","url","method","realm","interceptors","response","use","error","status","result","console","cookies","eqPos","substr","window","location","pathname","reload","origin","message","request","log","Promise","resolve","reject","getContainers","params","relation","getPatients","studyId","addResearcherApplicable","user","role","RemoveResearcher","permission","getSurveysCompeleteStatus","setAttributes","id","attributes","getPublicStudies","require","_","objectKeysToSnakeCase","camelCaseObject","snakeCaseObject","isArray","forEach","value","key","isPlainObject","snakeCase","refreshTokenModal","state","action","type","payload","tokenManager","this","Cookies","listeners","setInterval","_traverseListeners","Error","get","newCookies","Object","keys","set","path","accessToken","timeRemain","getTokenTimeRemain","item","time","func","condition","listener","listenerId","uuidv4","isFunction","Array","push","remove","jwtDecode","exp","moment","unix","getAll","init","Boolean","checkTokenUnExpiration","isLogin","initalState","allStudies","isSurveyStarted","initial","attrsOrder","studyAttributes","combineReducers","studies","study","publicStudies","redCapLinks","store","createStore","rootReducer","__REDUX_DEVTOOLS_EXTENSION__","reduxActionWrapper","funcs","map","helper","actionParams","dispatch","setAllStudies","setRefreshModal","setIsLoginCreator","setCurrentUser","setPublicStudies","setAttrOrder","setIsLoginDispatcher","setRefreshModalDispatcher","lineBreaker","text","p","parse_query_string","query","vars","query_string","pair","arr","inviteUser","checkUserInfo","suspendUsers","users","activateUsers","register","changeRole","userId","updateInvitation","invitation_code","pullFitbitData","label","username","ResetPasswordModal","props","useState","userInfo","setUserInfo","loading","setLoading","Form","useForm","form","t","useTranslation","useEffect","info","visible","FormInstance","React","createRef","title","maskClosable","closable","destroyOnClose","footer","onClick","handleCancel","current","resetFields","disabled","validateFields","then","values","password","newPassword","newPassword2","old_password","new_password","res","success","catch","err","layout","initialValues","onFinish","onFinishFailed","errorInfo","ref","Item","rules","required","Password","onCopy","e","preventDefault","onPaste","autocomplete","QuestionCircleOutlined","whitespace","pattern","RegExp","getFieldValue","validator","rule","dependencies","onChange","setFieldsValue","target","confirmPassword","Header","Layout","SubMenu","Menu","withRouter","modalVisible","setModalVisible","useCookies","removeCookie","i18n","className","style","background","boxShadow","position","top","zIndex","width","height","mode","lineHeight","selectedKeys","slice","getActiveItem","marginRight","paddingLeft","to","src","alt","AppstoreOutlined","CompassOutlined","TeamOutlined","styles","backgroundColor","icon","UserOutlined","size","ItemGroup","toUpperCase","history","Sider","RightSlider","collapsed","onCollapse","setState","collapsible","reverseArrow","theme","children","Component","QueryCard","trigger","zeroWidthTriggerStyle","right","sider","content","Content","connect","observationVars","initFunc","rightContent","leftContent","Footer","textAlign","fontSize","padding","Date","getFullYear","href","rel","Meta","Card","StudiesTile","useDispatch","loginNotification","gutter","xs","span","sm","md","lg","marginBottom","cover","currentStudy","find","Number","FileTextOutlined","actions","EyeOutlined","StarOutlined","EllipsisOutlined","color","description","desc","match","hero","heroContent","h1","subtitle","useMobile","innerWidth","isMobile","setIsMobile","handleResize","currentStatus","addEventListener","removeEventListener","userAuthLogout","RECEIVED_LOGOUT","RECEIVED_LOGIN","TOKEN_EXPIRATION","LOGOUT_REFRESH_MODAL","LOGOUT_HEADER","entries","namespace","userAuthManager","initRefreshModal","initExpirationLogout","refreshToken","autoRefreshMonitor","openRefreshModalId","addListener","getState","expirationId","logout","modalTime","refreshTokenOld","refreshtoken","access_token","refresh_token","setCookies","serviceNamespace","includes","clearCookies","removeListener","Title","Typography","TabPane","Tabs","labelCol","wrapperCol","tailLayout","setRole","forgotMode","setForgotMode","config","forgotPwdCard","remember","email","prefix","marginTop","forgot","htmlType","container","level","defaultActiveKey","centered","tab","SmileOutlined","DotChartOutlined","user_role","a","parsedJwt","parseJwt","userInfoRes","prevPath","LockOutlined","Registration","useRouteMatch","routes","exact","render","component","Option","Input","Search","Select","toString","handleChange","StudiesFilter","placeholder","items","StudiesContent","setCollapsed","filterPanel","setFilterPanel","useSelector","createElement","RightOutlined","LeftOutlined","onSearch","v","shape","FilterOutlined","fileterContentOpen","StudyResearcherPageRoleMap","ProtectedRoute","rest","access","setAccess","platformRole","pathArr","getResearcherApplicable","from","StudyMenu","currentPath","isPublicView","isSurveyConnected","currentRole","currentPermission","HomeOutlined","SettingOutlined","FormOutlined","UnorderedListOutlined","QuestionOutlined","routePaths","getPath","capitalizeFirstLetter","string","index","parseInt","redirect","datasetId","setIsSurveyStarted","setSurveyConnected","completedSurveyNum","setCompletedSurveyNum","useLocation","container_guid_guid","container_guid_container","String","recordId","checkRedCapSurvey","eConsentData","num","getRedCapSurveyLink","res2","surveyLink","getRedCapSurveyQueueLink","surveyQueueLink","filter","el","pathList","marginLeft","maxWidth","protected","Text","PopconfirmDropdown","formRef","options","InviteUser","assign","projectId","onInviteUserCancel","roleTip","validateUser","field","isEmpty","onOk","onCancel","validateTrigger","placement","Group","BulkInviteUsers","closeBulkModal","csvError","setCsvError","usersError","setUsersError","userList","setUserList","selectedUsers","setSelectedUsers","progress","setProgress","onClose","clearStatus","onBulkSubmit","addOneUser","progressPercentage","step","promises","allSettled","hasProblem","_settledValueField","beforeUpload","file","csv","parse","header","skipEmptyLines","complete","results","showUploadList","authorization","rowSelection","selectedRowKeys","selectedRows","getCheckboxProps","record","download","UploadOutlined","dataSource","columns","dataIndex","rowKey","strokeColor","percent","PlatformUsersTable","statusMap","active","pending","hibernate","null","getColumnSearchProps","tableKey","filterDropdown","setSelectedKeys","confirm","clearFilters","node","searchInput","onPressEnter","handleSearch","display","SearchOutlined","handleReset","filterIcon","filtered","undefined","onFilterDropdownVisibleChange","setTimeout","select","projectStatus","statusBadge","adminCrown","CrownFilled","searchText","searchedColumn","page","pageSize","order","sortColumn","totalItem","setClassName","searchKey","pagination","total","showQuickJumper","showSizeChanger","scroll","x","rowClassName","InvitationTable","invitations","setInvitations","orderBy","orderType","filters","setFilters","setPage","setPageSize","setTotal","setSearchText","allProjects","filtersWithProject","fetchInvitations","totalInvitations","filterParam","sorter","newFilters","invited_by","columnKey","invitationColumns","getExpired","format","project","menu","code","warning","overlay","MoreOutlined","expiry_timestamp","isBefore","EditableContext","createContext","EditableRow","Provider","EditableCell","editable","handleSave","restProps","editing","setEditing","inputRef","useRef","useContext","focus","toggleEdit","save","childNode","margin","onBlur","paddingRight","PlatformTable","handleDelete","platform","platformUserGUID","deletedPlatform","platformId","handleAdd","count","newRecord","newData","row","findIndex","splice","onConfirm","prevProps","prevState","components","body","cell","col","onCell","addContent","okText","cancelText","EditOutlined","PlusOutlined","bordered","UserDetails","userForeignPlatforms","setUserForeignPlatforms","userProjects","setUserProjects","userPlaformGuid","setUserPlatformGuid","guid","foreign_guid_platform","platforms","foreign_guid_guid","projects","containerGuid","surveysDetails","uncompletedSurveys","paddingBottom","overflow","column","enabled","isSurveyComplete","ExternalIdentityManagement","handleAuthorize","authorizeUrl","authorizationUrl","queryString","baseUrl","redirect_uri","fitbitData","localStorage","getItem","JSON","setItem","stringify","newQueryString","newAuthUrl","open","pullData","fitbit_status","Modal","ExclamationCircleOutlined","thirdParty","Panel","Collapse","ScalableDetails","close","setProjectList","modalTitle","setVisible","minWidth","onMouseDown","mouseDown","left","transform","transition","cursor","PauseOutlined","CloseOutlined","float","ExternalIdentity","AdminUsers","bulkEdit","bulkModal","setBulkModal","setInviteUser","setUsers","setSelectedRowKeys","researchers","setResearchers","patients","setPatients","sidePanel","setSidePanel","currentRecord","setCurrentRecord","panelWidth","setPanelWidth","tableWidth","setTableWidth","myRef","fetchUsers","b","createdTimestamp","activateUser","mouseMove","mouseX","clientX","parentX","getClientRects","parentWidth","delta","stopMove","wrapper","spinning","borderRight","TermsOfUseModal","overflowY","onSubmit","initialValue","autoComplete","valuePropName","imgContent","setStudies","studiesArr","labels","MyStudiesContent","MyStudiesContentPublic","Invite","minHeight","setUser","setExpired","hashCode","user_info","ForgetPassword","pathArray","Home","Login","Studies","MyStudies","Study","ErrorPage","Invitations","Paragraph","Landing","surveyModalVisible","setSurveyModalVisible","panels","contact","investigator","sponsor","surveyCard","useEconsent","attrs_order","startsWith","displayValue","replace","verticalAlign","direction","project_icon","primaryEmail","investigatorEmail","study_description_collapse","criteria","frameborder","inPageLinks","scrolling","seamless","InvitePatientModal","useParams","hasFeedback","getUsers","surveyStatus","redap_token","surveyRes","userRes","guidIndex","currentContainerGuid","surveyInfo","survey","record_id","uncompleted_surveys","localeCompare","guidContainers","guidArray","firstname","lastname","created_time","TextArea","editMode","updateDatasetInfo","userListOnDataset","datasetUpdate","datasetInfo","emailValid","setDatasetInfo","getBase64","img","callback","reader","FileReader","readAsDataURL","imageUrl","resizeImage","compressedIcon","originalDataUri","Image","onload","newDataUri","canvas","ctx","getContext","drawImage","toDataURL","imageToDataUri","fontWeight","textTransform","iconTitle","iconP","button","custom_general_info_form","defaultValue","trimStart","wordBreak","ellipsis","rows","expandable","time_created","autoSize","maxLength","borderColor","antInput","modelVisible","redCapToken","setRedCapToken","defaultChecked","recruitment","checkedChildren","unCheckedChildren","checked","discoverable","input","borderRadius","border","eConsentIdentifier","eConsentFormName","eConsentEmailFieldName","custom_checkbox","checkedValues","oldToken","MANIFEST_ATTR_TYPE","MULTIPLE_CHOICE","TEXT","trimString","str","validateAttributeName","attributeName","otherAttrs","valid","attributeNameTrim","test","validateAttrValue","attributeVal","attributeValTrim","AttrAddBar","attrName","setAttrName","setType","setValue","errorMsg4Val","setErrorMsg4Val","errorMsg4Name","setErrorMsg4Name","validateStatus","help","mkey","attrType","custom_select_tag","tagRender","outline","CheckOutlined","valueNew","attrName2","replaceAll","time_lastmodified","loadManifest","setEditMode","containersResult","containers","AttrEditBar","currentAttribute","ArrowUpOutlined","moveUp","ArrowDownOutlined","moveDown","FileManifestExistentTable","mItem","configEditMode","tableColumns","attributesOrder","setTableKey","attrsOrderOrigin","attrItem","attribute","curPos","orderCopy","attr","tableContent","attrsList","sort","manifestID","vInd","okType","showDeleteConfirm","manifest_table","colSpan","FileManifestItem","deleteModalVisible","setDeleteModalVisible","manifestList","deleteConfirm","StudyAttributes","setManifestList","setStudyAttributes","setCurrentStudy","useCallback","projectInfo","join","fakeAttribute","Config","isSaving","setIsSaving","activateKey","setDatasetUpdate","setEmailValid","saveDatasetInfo","res3","validateEmail","toLowerCase","tabBarExtraContent","SaveOutlined","when","card_wrapper","custom_tabs","renderTabBar","DefaultTabBar","tabHeader","AddApplicableUserModal","existedUsers","applicableUsers","setApplicableUsers","getSisterContainerResearch","sisterContainersUsers","researcher","usersElement","fetchApplicable","notFoundContent","image","Empty","PRESENTED_IMAGE_SIMPLE","showSearch","allowClear","getResearchers","confirmModal","handleRemoveUser","handleChangeRole","updatedUsers","Survey","Members","isSurveyLink","search","link","Researchers","subTitle","extra","Error404","confirmationWrapper","isLogged","setIsLogin","loginApi","invitationHash","answer","answerQuestionAPI","question","isLoading","setIsLoading","isRegistered","setRegistered","setQuestion","setEmail","setUsername","setError","readToken","is_Registered","justify","align","createBrowserHistory","secondsToGo","setTimer","setListenerId","newListenerId","ServiceNamespace","extendAuth","maxCount","App","idleTimer","handleOnAction","bind","handleOnActive","handleOnIdle","currentFitbitData","updateFitbitStatus","event","getRemainingTime","getLastActiveTime","onActive","onIdle","onAction","debounce","fallback","RefreshModal","withCookies","initReactI18next","Backend","debug","lng","ns","backend","loadPath","process","interpolation","escapeValue","ReactDOM","CookiesProvider","getElementById","base64Payload","Buffer"],"mappings":"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","file":"static/js/main.b34eeaa4.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"Home_content__m1wu6\",\"heroContent\":\"Home_heroContent__1TcO1\",\"hero\":\"Home_hero__3o5Zq\",\"subtitle\":\"Home_subtitle__UTq3Y\",\"studies\":\"Home_studies__7EmR3\"};","module.exports = __webpack_public_path__ + \"static/media/indoc-icon.23a0df62.png\";","module.exports = __webpack_public_path__ + \"static/media/canarie-cover.7afac2c3.jpeg\";","module.exports = __webpack_public_path__ + \"static/media/study_cover.81377403.jpg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"MyStudiesContent_container__3JUEJ\",\"imgContent\":\"MyStudiesContent_imgContent__PJYah\"};","import axios from \"axios\";\nimport { message } from \"antd\";\n\n// Function to return the value of a specified cookie\nfunction getCookie(cname) {\n\tvar name = cname + \"=\";\n\tvar decodedCookie = decodeURIComponent(document.cookie);\n\tvar ca = decodedCookie.split(\";\");\n\tfor (var i = 0; i < ca.length; i++) {\n\t\tvar c = ca[i];\n\t\twhile (c.charAt(0) == \" \") {\n\t\t\tc = c.substring(1);\n\t\t}\n\t\tif (c.indexOf(name) == 0) {\n\t\t\treturn c.substring(name.length, c.length);\n\t\t}\n\t}\n\treturn undefined;\n}\n\n// Fetch token from cookies\nconst token = getCookie(\"access_token\");\nconst refreshToken = getCookie(\"refresh_token\");\n\n// Axios request basic settings\nconst baseURL = \"https://vhg.indocresearch.org\";\nconst serverAxios = axios.create({\n\tbaseURL: baseURL,\n});\n\n// serverAxios.defaults.withCredentials = true;\nserverAxios.defaults.headers.post[\"Content-Type\"] = \"application/json\";\nserverAxios.defaults.timeout = 10000;\nif (token) {\n\tserverAxios.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n}\nconst CancelToken = axios.CancelToken;\n\n//Adding a interceptor to axios, so it handles expire issue before .then and .error\nserverAxios.interceptors.response.use(\n\tfunction (response) {\n\t\treturn response;\n\t},\n\tfunction (error) {\n\t\tif (error.response) {\n\t\t\tconst { data, status } = error.response;\n\t\t\t// The request was made and the server responded with a status code\n\t\t\t// that falls out of the range of 2xx\n\t\t\t// Error messages will be printed in `result`.\n\t\t\tif (data.result) {\n\t\t\t\tif (typeof data.result === \"string\") {\n\t\t\t\t\t// message.error(data.result);\n\t\t\t\t}\n\t\t\t\tconsole.error(data.result);\n\t\t\t} else {\n\t\t\t\tswitch (status) {\n\t\t\t\t\tcase 401: {\n\t\t\t\t\t\t// clear all cookies\n\t\t\t\t\t\tvar cookies = document.cookie.split(\";\");\n\t\t\t\t\t\tfor (var i = 0; i < cookies.length; i++) {\n\t\t\t\t\t\t\tvar cookie = cookies[i];\n\t\t\t\t\t\t\tvar eqPos = cookie.indexOf(\"=\");\n\t\t\t\t\t\t\tvar name =\n\t\t\t\t\t\t\t\teqPos > -1 ? cookie.substr(0, eqPos) : cookie;\n\t\t\t\t\t\t\tdocument.cookie =\n\t\t\t\t\t\t\t\tname +\n\t\t\t\t\t\t\t\t\"=;expires=Thu, 01 Jan 1970 00:00:00 GMT\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (window.location.pathname === \"/\") {\n\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twindow.location = `${window.location.origin}`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmessage.error(\"Token Expired. Please Login Again.\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 403: {\n\t\t\t\t\t\tmessage.error(\n\t\t\t\t\t\t\t\"The session is expired or token is invalid. Please log in again\",\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 404: {\n\t\t\t\t\t\tmessage.error(\"404 Not Found\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 500: {\n\t\t\t\t\t\tmessage.error(\"Internal Server Error\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tdefault: {\n\t\t\t\t\t\tif (status < 200 || status > 300) {\n\t\t\t\t\t\t\tmessage.error(\"Error in API calling\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (error.request) {\n\t\t\tconsole.log(\n\t\t\t\t\"TCL: handleApiFailure -> error.request\",\n\t\t\t\terror.request,\n\t\t\t);\n\t\t\t// The request was made but no response was received\n\t\t\t// `error.request` is an instance of XMLHttpRequest in the browser and an instance of\n\t\t\t// http.ClientRequest in node.js\n\t\t\tmessage.error(\"Error network: cannot receive a response\");\n\t\t} else {\n\t\t\t// The request has no response nor request -\n\t\t\t// Something happened in setting up the request that triggered an Error\n\t\t\tconsole.log(\"handleApiFailure -> error\", error);\n\n\t\t\t// If caused by axios canceltoken, it will have an error message.\n\t\t\tif (error.message) {\n\t\t\t\tmessage.error(\"The input data is invalid\");\n\t\t\t} else {\n\t\t\t\t// Else, print the vague message.\n\t\t\t\tmessage.error(\"The input data is invalid\");\n\t\t\t}\n\t\t}\n\t\treturn new Promise((resolve, reject) => reject(error));\n\t},\n);\n\n/**\n * executes the api calling function\n * and returns both the cancel object of the axios call and the promise.\n * you can cancel this API request by calling source.cancel()\n * @param {function} requestFunction the\n * @param {*} arg other payloads of the request function\n * @returns   request: the axios result, source: the axios cancellation object\n */\nfunction cancelRequestReg(requestFunction, ...arg) {\n\tconst source = CancelToken.source();\n\treturn {\n\t\trequest: requestFunction(...arg, source.token),\n\t\tsource,\n\t};\n}\n\nexport { serverAxios, cancelRequestReg, axios };\n","import { serverAxios as axios } from \"./config\";\n\nfunction login(data) {\n\treturn axios({\n\t\turl: \"/v1/users/login\",\n\t\tmethod: \"POST\",\n\t\tdata: { ...data, realm: \"canarie\" },\n\t});\n}\n\nexport { login };\n","import { serverAxios as axios } from \"./config\";\n\nconst REDCAP_URL = 'https://redcap-internal.indocresearch.org/api/';\nconst REDCAP_TOKEN = 'A63535E14C6926A2DBED1EB0B3A20B78';\n\n/**\n * Get a list of studies\n *\n * @returns studies in array\n */\nfunction getStudiesAPI() {\n\treturn axios({\n\t\turl: \"/v1/studylist\",\n\t\tmethod: \"GET\",\n\t});\n}\n\n/**\n * Get studies by some search terms\n *\n * @param {*} data\n * @returns\n */\nfunction searchStudiesAPI(data) {\n\treturn axios({\n\t\turl: \"/v1/studylist\",\n\t\tmethod: \"POST\",\n\t\tdata,\n\t});\n}\n\n/**\n * getContainers\n *\n * @param {*} params params - level:int, default to be empty, start:boolean\n * @returns\n */\nfunction getContainers() {\n\treturn axios({\n\t\turl: \"/v1/containers\",\n\t\tmethod: \"GET\",\n\t\tparams: { relation: '[\"admin\", \"member\", \"patient\"]' },\n\t});\n}\n\nfunction getPatients(studyId) {\n\treturn axios({\n\t\turl: `/v1/${studyId}/patients`,\n\t\tmethod: \"GET\",\n\t});\n}\n\nfunction getResearchers(studyId) {\n\treturn axios({\n\t\turl: `/v1/${studyId}/researchers`,\n\t\tmethod: \"GET\",\n\t});\n}\n\nfunction getResearcherApplicable(studyId) {\n\treturn axios({\n\t\turl: `/v1/${studyId}/applicable`,\n\t\tmethod: \"GET\",\n\t});\n}\n\nfunction addResearcherApplicable(studyId, user, role) {\n\treturn axios({\n\t\turl: `/v1/${studyId}/applicable`,\n\t\tmethod: \"POST\",\n\t\tdata: { user, role },\n\t});\n}\n \nfunction getSisterContainerResearch(studyId) {\n\treturn axios({\n\t\turl: `/v1/${studyId}/listusers?relation=sister`,\n\t\tmethod: \"GET\",\n\t});\n}\n\nfunction RemoveResearcher(studyId, user, permission) {\n\treturn axios({\n\t\turl: `/v1/${studyId}/applicable`,\n\t\tmethod: \"DELETE\",\n\t\tdata: { user },\n\t});\n}\n\nfunction getUserlistInContainer(id) {\n\treturn axios({\n\t\turl: `v1/${id}/users`,\n\t\tmethod: \"GET\",\n\t\tparams: { relation: '[\"admin\", \"member\", \"patient\"]' },\n\t});\n}\n\nfunction getRedCapToken(id) {\n\treturn axios({\n\t\turl: `v1/${id}/datasetproperty`,\n\t\tmethod: \"GET\",\n\t\tparams: { key: 'redap_token' },\n\t});\n}\n\nfunction updateRedCapToken(id, value) {\n\treturn axios({\n\t\turl: `v1/${id}/datasetproperty`,\n\t\tmethod: \"POST\",\n\t\tparams: { key: 'redap_token', value },\n\t});\n}\n\nfunction checkRedCapSurvey(id, studyId) {\n\treturn axios({\n\t\turl: '/v1/user-survey/check',\n\t\tmethod: \"POST\",\n\t\tdata: {\n\t\t\t\"survey_id\": id,\n\t\t\t\"study_id\": studyId\n\t\t},\n\t});\n}\n\nfunction getRedCapSurveyQueueLink(id, studyId) {\n\treturn axios({\n\t\turl: '/v1/user-survey-queue/link',\n\t\tmethod: \"POST\",\n\t\tdata: {\n\t\t\t\"survey_id\": id,\n\t\t\t\"study_id\": studyId\n\t\t},\n\t});\n}\n\nfunction getRedCapSurveyLink(id, studyId) {\n\treturn axios({\n\t\turl: '/v1/user-survey/link',\n\t\tmethod: \"POST\",\n\t\tdata: {\n\t\t\t\"survey_id\": id,\n\t\t\t\"study_id\": studyId\n\t\t},\n\t});\n}\n\nfunction getSurveysCompeleteStatus(studyId) {\n\treturn axios({\n\t\turl: '/v1/user-survey/status',\n\t\tparams: {\n\t\t\t\"study_id\": studyId\n\t\t}\n\t});\n}\n\nfunction setAttributes(id, attributes) {\n\treturn axios({\n\t\turl: `/v1/dataset/${id}/properties`,\n\t\tmethod: \"POST\",\n\t\tdata: attributes,\n\t});\n}\n\nfunction checkAttributes(id) {\n\treturn axios({\n\t\turl: `/v1/dataset/${id}/properties`,\n\t});\n}\n\n\nfunction deleteAttribute(id, attribute) {\n\treturn axios({\n\t\turl: `/v1/dataset/${id}/properties/${attribute}`,\n\t\tmethod: \"DELETE\",\n\t});\n}\n\nfunction getPublicStudies() {\n\treturn axios({\n\t\turl: 'v1/dataset/discoverable',\n\t});\n}\n\nexport {\n\tgetStudiesAPI,\n\tsearchStudiesAPI,\n\tgetContainers,\n\tgetPatients,\n\tgetResearchers,\n\tgetResearcherApplicable,\n\taddResearcherApplicable,\n\tgetSisterContainerResearch,\n\tRemoveResearcher,\n\tgetUserlistInContainer,\n\tgetRedCapToken,\n\tupdateRedCapToken,\n\tcheckRedCapSurvey,\n\tgetRedCapSurveyQueueLink,\n\tsetAttributes,\n\tcheckAttributes,\n\tdeleteAttribute,\n\tgetPublicStudies,\n\tgetRedCapSurveyLink,\n\tgetSurveysCompeleteStatus,\n};\n","const faker = require('faker');\n\nexport default function fakeDataGenerator(num){\n    const result = [];\n    for(let i=0;i<num;i++){\n        const item = {\n            name: faker.name.findName(),\n            email:faker.internet.email(),\n            date: faker.date.recent(),\n        };\n        result.push(item)\n    }\n    return result;\n}","const _ = require(\"lodash\");\n\n/**\n * covert a snake case object's keys to camelCase, for JSON from backend\n *\n * @param {object} snake_case_object snake_case object\n * @returns {object} a new object with all camelCase keys\n */\nfunction objectKeysToCamelCase(snake_case_object) {\n  var camelCaseObject = _.isArray(snake_case_object) ? [] : {};\n  _.forEach(snake_case_object, function(value, key) {\n    if (_.isPlainObject(value) || _.isArray(value)) {\n      // checks that a value is a plain object or an array - for recursive key conversion\n      value = objectKeysToCamelCase(value); // recursively update keys of any values that are also objects\n    }\n    camelCaseObject[_.camelCase(key)] = value;\n  });\n  return camelCaseObject;\n}\n\n/**\n * covert a camel case object's keys to snake case, for JSON ready to be sent to backend\n *\n * @param {object} camelCaseObject camel case object\n * @returns {object} snake case object\n */\nfunction objectKeysToSnakeCase(camelCaseObject) {\n  var snakeCaseObject = _.isArray(camelCaseObject) ? [] : {};\n  _.forEach(camelCaseObject, function(value, key) {\n    if (_.isPlainObject(value) || _.isArray(value)) {\n      // checks that a value is a plain object or an array - for recursive key conversion\n      value = objectKeysToSnakeCase(value); // recursively update keys of any values that are also objects\n    }\n    snakeCaseObject[_.snakeCase(key)] = value;\n  });\n  return snakeCaseObject;\n}\n\nexport { objectKeysToCamelCase, objectKeysToSnakeCase };\n","import { SET_REFRESH_MODAL } from \"../actionTypes\";\n\nconst init = false;\nfunction refreshTokenModal(state = init, action) {\n  const { type, payload } = action;\n  switch (type) {\n    case SET_REFRESH_MODAL: {\n      return payload;\n    }\n    default: {\n      return state;\n    }\n  }\n}\n\nexport default refreshTokenModal;\n","export const SET_ALL_STUDIES = \"SET_ALL_STUDIES\";\nexport const SET_REFRESH_MODAL = \"SET_REFRESH_MODAL\";\nexport const SET_IS_LOGIN = \"SET_IS_LOGIN\";\nexport const SET_CURRENT_STUDY = \"SET_CURRENT_STUDY\";\nexport const SET_CURRENT_USER = \"SET_CURRENT_USER\";\nexport const SET_PUBLIC_STUDIES = \"SET_PUBLIC_STUDIES\";\nexport const SET_SURVEY_LINK = 'SET_SURVEY_LINK';\nexport const SET_SURVEY_QUEUE_LINK = 'SET_SURVEY_QUEUE_LINK';\nexport const SET_SURVEY_STATUS = 'SET_SURVEY_STATUS';\nexport const SET_ATTRS_ORDER = \"SET_ATTRS_ORDER\";\nexport const UPDATE_ATTRS_ORDER = \"UPDATE_ATTRS_ORDER\";\n\n","import { Cookies } from \"react-cookie\";\nimport { serverAxios } from \"../../APIs/config\";\nimport jwtDecode from \"jwt-decode\";\nimport moment from \"moment\";\nimport _ from \"lodash\";\nimport { v4 as uuidv4 } from \"uuid\";\nclass TokenManager {\n\tcookies;\n\tsetTimeId;\n\tlisteners;\n\tconstructor() {\n\t\tthis.cookies = new Cookies();\n\t\tthis.listeners = [];\n\t\tsetInterval(() => {\n\t\t\t// console.log(\n\t\t\t// \t\"token time remained \" + this.getTokenTimeRemain() + \"s\",\n\t\t\t// );\n\t\t\tthis._traverseListeners();\n\t\t\t// console.log(this.listeners);\n\t\t}, 1000);\n\t}\n\n\t/**\n\t * get a cookie\n\t * @param {string} name the name of cookie\n\t * @returns {string|undefined} the cookie value\n\t */\n\tgetCookie(name) {\n\t\tif (typeof name !== \"string\") {\n\t\t\tthrow new Error(`the name argument should be a string`);\n\t\t}\n\t\treturn this.cookies.get(name);\n\t}\n\t/**\n\t * set cookies\n\t * @param {{access_token?:string,refresh_token?:string}} newCookies object of key:value\n\t */\n\tsetCookies(newCookies) {\n\t\tObject.keys(newCookies).forEach((key) => {\n\t\t\tthis.cookies.set(key, newCookies[key], { path: \"/\" });\n\t\t});\n\t}\n\n\t/**\n\t * refresh the token to the axios headers, by default read it from cookie\n\t * @param {string?} accessToken the access token\n\t */\n\trefreshToken(accessToken) {\n\t\tserverAxios.defaults.headers.common[\"Authorization\"] = `Bearer ${\n\t\t\taccessToken || this.getCookie(\"access_token\")\n\t\t}`;\n\t\tthis._traverseListeners();\n\t}\n\n\t/**\n\t * execute all listener functions in this.listener\n\t */\n\t_traverseListeners() {\n\t\tconst timeRemain = this.getTokenTimeRemain();\n\t\tthis.listeners.forEach((item) => {\n\t\t\tconst { time, func, condition, params } = item;\n\t\t\tif (condition(timeRemain, time)) {\n\t\t\t\tfunc(...params);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * do func() when condition can return a true with ${time}\n\t * @param {{time:number,func:(...params:T)=>void,condition?:(timeRemain:number,time:number)=>boolean,params?:T[]}} listener if condition is not specified, only return true when time === timeRemain\n\t * @returns {string} the id to cancel the listener, by calling tokenManager.removeListener(listenerId)\n\t */\n\taddListener(listener) {\n\t\tconst listenerId = uuidv4();\n\t\tconst {\n\t\t\ttime,\n\t\t\tfunc,\n\t\t\tcondition = (timeRemain, time) => timeRemain === time,\n\t\t\tparams = [],\n\t\t} = listener;\n\t\tif (typeof time !== \"number\") {\n\t\t\tthrow new Error(\"the time should be a number\");\n\t\t}\n\t\tif (!_.isFunction(func)) {\n\t\t\tthrow new Error(\"the listener.func should be a function\");\n\t\t}\n\t\tif (condition && !_.isFunction(condition)) {\n\t\t\tthrow new Error(\"the listener.condition should be a function\");\n\t\t}\n\t\tif (params && !Array.isArray(params)) {\n\t\t\tthrow new Error(\n\t\t\t\t`the params for func should be grouped into an array in order`,\n\t\t\t);\n\t\t}\n\t\tthis.listeners.push({ time, func, condition, params, listenerId });\n\t\treturn listenerId;\n\t}\n\n\t/**\n\t * remove a listener function from the token timeline\n\t * @param {string} listenerId the uuid of the listener function\n\t */\n\tremoveListener(listenerId) {\n\t\tif (typeof listenerId !== \"string\") {\n\t\t\tthrow new Error(\"the listenerId should be an string\");\n\t\t}\n\t\t_.remove(this.listeners, (item) => item.listenerId === listenerId);\n\t}\n\n\t/**\n\t * token will expire in $return seconds\n\t * @param {string?} token the access token\n\t * @returns {number} if -1, token is not valid\n\t */\n\tgetTokenTimeRemain(token) {\n\t\ttoken = token || this.getCookie(\"access_token\");\n\t\tif (!token) {\n\t\t\treturn -1;\n\t\t} else {\n\t\t\tconst exp = jwtDecode(token).exp;\n\t\t\t// console.log(`time remain: ${exp - moment().unix()}`)\n\t\t\treturn exp - moment().unix();\n\t\t}\n\t}\n\n\t/**\n\t * clear all cookies\n\t */\n\tclearCookies() {\n\t\tconsole.log(\"TokenManager -> clearCookies -> clearCookies!!\");\n\t\tObject.keys(this.cookies.getAll()).forEach((key) => {\n\t\t\tthis.cookies.remove(key, { path: \"/\" });\n\t\t});\n\t}\n\n\t/**\n\t * if token still valid, return true;\n\t * @returns {boolean}\n\t */\n\tcheckTokenUnExpiration() {\n\t\tconst token = this.getCookie(\"access_token\");\n\t\tif (token && this.getTokenTimeRemain(token) >= 0) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n}\n\nconst tokenManager = new TokenManager();\nexport default tokenManager;\n","import { SET_IS_LOGIN } from \"../actionTypes\";\nimport {tokenManager} from '../../Service/tokenManager'\n\n/**\n * the user logout creator may dispatch a action with an empty {}\n */\nconst init = Boolean(tokenManager.checkTokenUnExpiration());\nfunction isLogin(state = init, action) {\n  let { type, payload } = action;\n  if(typeof payload!=='boolean'){\n    payload = false;\n  }\n  switch (type) {\n    case SET_IS_LOGIN: {\n      return payload;\n    }\n    default: {\n      return state;\n    }\n  }\n}\n\nexport default isLogin;\n","import { SET_ALL_STUDIES } from \"../actionTypes\";\nconst initalState = {\n\tallStudies: [],\n};\n\nexport default function (state = initalState, action) {\n\tswitch (action.type) {\n\t\tcase SET_ALL_STUDIES: {\n\t\t\tconst { allStudies } = action.payload;\n\t\t\treturn { ...state, allStudies };\n\t\t}\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n","import { SET_CURRENT_STUDY } from \"../actionTypes\";\nconst initalState = {};\n\nexport default function (state = initalState, action) {\n\tswitch (action.type) {\n\t\tcase SET_CURRENT_STUDY: {\n\t\t\treturn action.payload;\n\t\t}\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n","import { SET_CURRENT_USER } from \"../actionTypes\";\nconst initalState = {};\n\nexport default function (state = initalState, action) {\n\tswitch (action.type) {\n\t\tcase SET_CURRENT_USER: {\n\t\t\treturn action.payload;\n\t\t}\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n","import { SET_PUBLIC_STUDIES } from \"../actionTypes\";\nconst initalState = [];\n\nexport default function (state = initalState, action) {\n\tswitch (action.type) {\n\t\tcase SET_PUBLIC_STUDIES: {\n\t\t\tconst { studies } = action.payload;\n\t\t\treturn studies;\n\t\t}\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n","import { SET_SURVEY_LINK, SET_SURVEY_QUEUE_LINK, SET_SURVEY_STATUS } from \"../actionTypes\";\nconst initalState = {\n\tisSurveyStarted: false,\n};\n\nexport default function (state = initalState, action) {\n\tswitch (action.type) {\n\t\tcase SET_SURVEY_LINK: {\n\t\t\treturn { ...state, ...action.payload, };\n\t\t}\n        case SET_SURVEY_QUEUE_LINK: {\n\t\t\treturn { ...state, ...action.payload, };\n\t\t}\n\t\tcase SET_SURVEY_STATUS: {\n\t\t\treturn { ...state, ...action.payload, };\n\t\t}\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n","import { SET_ATTRS_ORDER, UPDATE_ATTRS_ORDER } from \"../actionTypes\";\n\nconst initial = {\n    attrsOrder: [],\n}\n\nconst studyAttributes = (state = initial, action) => {\n    switch (action.type) {\n        case SET_ATTRS_ORDER:\n            return {\n                attrsOrder: action.payload\n            }\n        case UPDATE_ATTRS_ORDER:\n            return {\n                attrsOrder: [...state.attrsOrder, action.payload]\n            }\n        default: \n            return state;\n\t}\n};\n\nexport default studyAttributes;","import { combineReducers } from \"redux\";\nimport refreshTokenModal from \"./refreshToken\";\nimport isLogin from \"./isLogin\";\nimport studies from \"./studies\";\nimport study from './study';\nimport user from './user';\nimport publicStudies from './publicStudies';\nimport redCapLinks from './redCapLinks';\nimport studyAttributes from './studyAttrs';\n\nexport default combineReducers({\n\tstudies,\n\trefreshTokenModal,\n\tisLogin,\n\tstudy,\n\tuser,\n\tpublicStudies,\n\tredCapLinks,\n\tstudyAttributes,\n});\n","import { createStore } from \"redux\";\nimport rootReducer from \"./Reducers\";\n\nconst configureStore = () => {\n\tconst store = createStore(\n\t\trootReducer,\n\t\twindow.__REDUX_DEVTOOLS_EXTENSION__ &&\n\t\t\twindow.__REDUX_DEVTOOLS_EXTENSION__(),\n\t);\n\n\tif (process.env.NODE_ENV !== \"production\") {\n\t\tif (module.hot) {\n\t\t\tmodule.hot.accept(\"./Reducers\", () => {\n\t\t\t\tstore.replaceReducer(rootReducer);\n\t\t\t});\n\t\t}\n\t}\n\n\treturn store;\n};\nconst store = configureStore();\n\nexport { store };\n","import { store } from \"../Redux/store\";\n\n/**\n * convert generic function to action creator&dispatcher\n * @param {function | Array<function>} funcs a function or an Array of function to create an redux action.\n * @returns {function | Array<function>} the action dispatcher\n */\nexport default function reduxActionWrapper(funcs) {\n\tif (Array.isArray(funcs)) {\n\t\treturn funcs.map((item) => helper(item));\n\t} else {\n\t\treturn helper(funcs);\n\t}\n}\n\nfunction helper(func) {\n\tif (typeof func !== \"function\") {\n\t\tthrow new Error(\"You should pass a function\");\n\t}\n\treturn (actionParams) => {\n\t\tstore.dispatch(func(actionParams));\n\t};\n}\n","import {\n\tSET_ALL_STUDIES,\n\tSET_REFRESH_MODAL,\n\tSET_IS_LOGIN,\n\tSET_CURRENT_STUDY,\n\tSET_CURRENT_USER,\n\tSET_PUBLIC_STUDIES,\n\tSET_SURVEY_LINK,\n\tSET_SURVEY_QUEUE_LINK,\n\tSET_SURVEY_STATUS,\n\tSET_ATTRS_ORDER,\n\tUPDATE_ATTRS_ORDER,\n} from \"./actionTypes\";\n\nexport const setAllStudies = (allStudies) => ({\n\ttype: SET_ALL_STUDIES,\n\tpayload: {\n\t\tallStudies,\n\t},\n});\n\nexport const setRefreshModal = (status) => ({\n\ttype: SET_REFRESH_MODAL,\n\tpayload: status,\n});\n\nexport const setIsLoginCreator = (isLogin) => ({\n\ttype: SET_IS_LOGIN,\n\tpayload: isLogin,\n});\n\nexport const setCurrentStudy = (payload) => ({\n\ttype: SET_CURRENT_STUDY,\n\tpayload,\n})\n\nexport const setCurrentUser = (payload) => ({\n\ttype: SET_CURRENT_USER,\n\tpayload,\n});\n\nexport const setPublicStudies = (studies) => ({\n\ttype: SET_PUBLIC_STUDIES,\n\tpayload: {\n\t\tstudies,\n\t},\n});\n\nexport const setSurveyLink = (link) => ({\n\ttype: SET_SURVEY_LINK,\n\tpayload: {\n\t\tsurveyLink: link,\n\t},\n});\n\nexport const setSurveyQueueLink = (link) => ({\n\ttype: SET_SURVEY_QUEUE_LINK,\n\tpayload: {\n\t\tsurveyQueueLink: link,\n\t},\n});\n\nexport const setSurveyStatus = (status) => ({\n\ttype: SET_SURVEY_STATUS,\n\tpayload: {\n\t\tisSurveyStarted: status,\n\t},\n});\n\nexport const setAttrOrder = (payload) => ({\n\ttype: SET_ATTRS_ORDER,\n\tpayload\n})\n\nexport const updateAttrOrder = (payload) => ({\n\ttype: UPDATE_ATTRS_ORDER,\n\tpayload,\n});","import { setIsLoginCreator, setRefreshModal } from \"../Redux/actions\";\nimport reduxActionWrapper from \"./reduxActionWrapper\";\n\nconst [setIsLoginDispatcher, setRefreshModalDispatcher] = reduxActionWrapper([\n\tsetIsLoginCreator,\n\tsetRefreshModal,\n]);\n/**\n * reset all redux states to the init\n */\nfunction resetReduxState() {\n\tsetIsLoginDispatcher(false);\n\tsetRefreshModalDispatcher(false);\n}\n\nexport { resetReduxState };\n","import React from \"react\";\n\nfunction lineBreaker(text) {\n    const paragraph = text.split(/\\n/g);\n\n    return paragraph.map((p) => (\n      <div>\n        {p}\n        <br/>\n      </div>\n    ))\n}\n\nfunction parse_query_string(query) {\n  var vars = query.split(\"&\");\n  var query_string = {};\n  for (var i = 0; i < vars.length; i++) {\n    var pair = vars[i].split(\"=\");\n    var key = decodeURIComponent(pair[0]);\n    var value = decodeURIComponent(pair[1]);\n    // If first entry with this name\n    if (typeof query_string[key] === \"undefined\") {\n      query_string[key] = decodeURIComponent(value);\n      // If second entry with this name\n    } else if (typeof query_string[key] === \"string\") {\n      var arr = [query_string[key], decodeURIComponent(value)];\n      query_string[key] = arr;\n      // If third or later entry with this name\n    } else {\n      query_string[key].push(decodeURIComponent(value));\n    }\n  }\n  return query_string;\n}\n\n\nexport { lineBreaker, parse_query_string};","import { serverAxios as axios } from \"./config\";\nimport { objectKeysToSnakeCase } from '../Utility';\n\n/**\n * Admin Invite User\n *\n * @param {*} data\n * @returns success/fail\n */\nfunction inviteUser(data) {\n\treturn axios({\n\t\turl: \"/v1/admin/invite\",\n\t\tmethod: \"POST\",\n\t\tdata,\n\t});\n}\n\n/**\n * Get user inforamtion with token\n *\n * @param {string} token\n * @returns {object} user information\n */\nfunction getUserInformation(token) {\n\treturn axios({\n\t\turl: `/v1/admin/invite/${token}`,\n\t\tmethod: \"GET\",\n\t});\n}\n\n/**\n * Register a user\n *\n * @param {object} data\n * @returns {string} user ID from keycloak\n */\nfunction addUser(data) {\n\treturn axios({\n\t\turl: `/v1/admin/users`,\n\t\tmethod: \"POST\",\n\t\tdata: { ...data, realm: \"canarie\" },\n\t});\n}\n\n/**\n * List all users\n *\n * @param {object} data\n * @returns {array} array of users\n */\nfunction getUsers() {\n\treturn axios({\n\t\turl: `/v1/admin/userlist/canarie`,\n\t\tmethod: \"GET\",\n\t});\n}\n\n/**\n * Verify user by email or username\n *\n * @param {object} data\n * @returns {Object} userinfo, or {}, if user not exist\n */\nfunction checkUserInfo(data) {\n\treturn axios({\n\t\turl: `/v1/admin/userinfo`,\n\t\tmethod: \"POST\",\n\t\tdata: { ...data, realm: \"canarie\" },\n\t});\n}\n\n/**\n * Suspend user(s)\n *\n * @param {object} data an array of users\n * @returns {Object} userinfo, or {}, if user not exist\n */\nfunction suspendUsers(users) {\n\treturn axios({\n\t\turl: `/v1/admin/users`,\n\t\tmethod: \"DELETE\",\n\t\tdata: { users, realm: \"canarie\" },\n\t});\n}\n\n/**\n * Activate user(s)\n *\n * @param {object} data an array of users\n * @returns {Object} successed_list, failed_list\n */\nfunction activateUsers(users) {\n\treturn axios({\n\t\turl: `/v1/admin/users`,\n\t\tmethod: \"PUT\",\n\t\tdata: { users, realm: \"canarie\" },\n\t});\n}\n\n/**\n * Refresh users session\n *\n * @param {object} data {refreshtoken:<token>}\n * @returns {Object} with new refresh_token and access_token\n */\nfunction refreshTokenAPI(data) {\n\treturn axios({\n\t\turl: `/v1/users/refresh`,\n\t\tmethod: \"POST\",\n\t\tdata: { ...data, realm: \"canarie\" },\n\t});\n}\n\nfunction register(data) {\n\treturn axios({\n\t\turl: `/v1/admin/users`,\n\t\tmethod: \"POST\",\n\t\tdata: {\n\t\t\t...data,\n\t\t\trealm: \"canarie\",\n\t\t\trole: \"patient\",\n\t\t},\n\t});\n}\n\nfunction readToken(invitationHash) {\n\treturn axios({\n\t\turl: `/v1/admin/invite/${invitationHash}`,\n\t\tmethod: \"GET\",\n\t});\n}\n\nfunction answerQuestion(invitationHash, answer) {\n\treturn axios({\n\t\turl: `/v1/admin/answer/${invitationHash}`,\n\t\tmethod: \"POST\",\n\t\tdata: {\n\t\t\tanswer,\n\t\t},\n\t});\n}\n\nfunction changeRole(studyId, userId, relation) {\n\treturn axios({\n\t\turl: `/v1/${studyId}/assign/${userId}?relation=${relation}`,\n\t\tmethod: \"PUT\",\n\t});\n}\n\nfunction forgotPassword(email) {\n\treturn axios({\n\t\turl: `/v1/users/password/forget`,\n\t\tmethod: \"PUT\",\n\t\tdata: {\n\t\t\temail,\n\t\t\trealm: \"canarie\"\n\t\t}\n\t});\n}\n\nfunction getInvitaions(params) {\n\treturn axios({\n\t\turl: `v1/admin/invitation-list`,\n\t\tmethod: \"GET\",\n\t\tparams: objectKeysToSnakeCase(params),\n\t});\n}\n\nfunction updateInvitation(invitation_code, action) {\n\treturn axios({\n\t\turl: `v1/admin/invitation`,\n\t\tmethod: \"PUT\",\n\t\tdata: {\n\t\t\t\"invitation_code\": invitation_code,\n\t\t\taction,\n\t\t},\n\t});\n}\n\nfunction decodeResetLink(code) {\n\treturn axios({\n\t\turl: `v1/users/resetlink/status`,\n\t\tmethod: \"GET\",\n\t\tparams: {\n\t\t\t\"reset_code\": code,\n\t\t\t\"realm\": \"canarie\"\n\t\t},\n\t});\n}\n\nfunction resetPassword(code, password) {\n\treturn axios({\n\t\turl: `v1/users/password/set`,\n\t\tmethod: \"POST\",\n\t\tdata: {\n\t\t\t\"reset_code\": code,\n\t\t\t\"realm\": \"canarie\",\n\t\t\t\"new_password\": password\n\t\t},\n\t});\n}\n\nfunction changePassword(data) {\n\treturn axios({\n\t\turl: `v1/users/password/change`,\n\t\tmethod: \"PUT\",\n\t\tdata: {\n\t\t\t...data,\n\t\t\t\"realm\": \"canarie\",\n\t\t},\n\t});\n}\n\nfunction addPlatformGUID(projectId, userId, platform, platformUserGUID) {\n\treturn axios({\n\t\turl: `v1/addforeignid/${projectId}`,\n\t\tmethod: \"POST\",\n\t\tparams: {\n\t\t\t\"user_id\": userId,\n\t\t\t\"platform\": platform,\n\t\t\t\"platform_user_id\": platformUserGUID\n\t\t}\n\t});\n}\n\nfunction deletePlatformGUID(projectId, userId, platform, platformUserGUID) {\n\treturn axios({\n\t\turl: `v1/addforeignid/${projectId}`,\n\t\tmethod: \"DELETE\",\n\t\tparams: {\n\t\t\t\"user_id\": userId,\n\t\t\t\"platform\": platform,\n\t\t\t\"platform_user_id\": platformUserGUID\n\t\t}\n\t});\n}\n\nfunction authorizeFitbit(username) {\n\treturn axios({\n\t\turl: `v1/fitbit/auth/${username}`,\n\t});\n}\n\nfunction pullFitbitData(label, username) {\n\treturn axios({\n\t\turl: `v1/fitbit/data-points/${label}`,\n\t\tmethod: 'POST',\n\t\tdata: {\n\t\t\t\"username\": username,\n\t\t\t\"normalize\" : false\n\t\t}\n\t});\n}\n\nfunction updateFitbitStatus(userId, state, code) {\n\treturn axios({\n\t\turl: `v1/user-status/${userId}`,\n\t\tmethod: 'PUT',\n\t\tdata: {\n\t\t\t\"state\": state,\n\t\t\t\"code\": code\n\t\t}\n\t})\n}\n\nexport {\n\tinviteUser,\n\tgetUserInformation,\n\taddUser,\n\tgetUsers,\n\tcheckUserInfo,\n\tsuspendUsers,\n\tactivateUsers,\n\trefreshTokenAPI,\n\tregister,\n\treadToken,\n\tanswerQuestion,\n\tchangeRole,\n\tforgotPassword,\n\tgetInvitaions,\n\tupdateInvitation,\n\tdecodeResetLink,\n\tresetPassword,\n\tchangePassword,\n\taddPlatformGUID,\n\tdeletePlatformGUID,\n\tauthorizeFitbit,\n\tpullFitbitData,\n\tupdateFitbitStatus,\n};\n","import React, { useState, useEffect } from 'react';\nimport { Modal, Button, message, Form, Input, Tooltip } from 'antd';\nimport { QuestionCircleOutlined } from '@ant-design/icons';\nimport { useTranslation } from 'react-i18next';\nimport { changePassword } from '../../APIs';\n\nconst ResetPasswordModal = (props) => {\n  const [userInfo, setUserInfo] = useState({});\n  const [loading, setLoading] = useState(false);\n  const [form] = Form.useForm();\n  const { t } = useTranslation(['message']);\n\n  useEffect(() => {\n    const info = { username: props.username };\n    setUserInfo(info);\n  }, [props.visible, props.username]);\n\n  const FormInstance = React.createRef();\n\n  const onFinish = (values) => {\n    console.log('Success:', values);\n  };\n\n  const onFinishFailed = (errorInfo) => {\n    console.log('Failed:', errorInfo);\n  };\n\n  const onCancel = () => {\n    props.handleCancel();\n    FormInstance.current.resetFields();\n  };\n\n  const onOk = () => {\n    setLoading(true);\n\n    FormInstance.current\n      .validateFields()\n      .then((values) => {\n        if (\n          values.password === values.newPassword ||\n          values.newPassword !== values.newPassword2\n        ) {\n          setLoading(false);\n          return;\n        }\n\n        changePassword({\n          old_password: values.password,\n          new_password: values.newPassword,\n          username: props.username,\n        })\n          .then((res) => {\n            if (res && res.status === 200) {\n              message.success(t('message:users.resetPassword.success'));\n              setLoading(false);\n              form.resetFields();\n              props.handleCancel();\n            }\n          })\n          .catch((err) => {\n            if (err.response && err.response.status === 400) {\n              message.error(t('message:users.resetPassword.oldPassword.valid'));\n            } else {\n              message.error(t('message:users.resetPassword.fail'));\n            }\n\n            setLoading(false);\n          });\n      })\n      .catch((error) => {\n        setLoading(false);\n      });\n  };\n\n  const onPasswordChange = (e) => {\n    form.setFieldsValue(e.target.value);\n\n    const confirmPassword = form.getFieldValue('newPassword2');\n\n    if (!confirmPassword || e.target.value === confirmPassword) {\n      form.validateFields(['newPassword2'], () => Promise.resolve());\n    } else if (confirmPassword && e.target.value !== confirmPassword) {\n      form.validateFields(['newPassword2'], () => Promise.reject());\n    }\n  };\n\n  return (\n    <Modal\n      title=\"Reset Password\"\n      visible={props.visible}\n      maskClosable={false}\n      closable={false}\n      destroyOnClose={true}\n      footer={[\n        <Button\n          id={'reset_password_modal_cancel'}\n          key=\"back\"\n          onClick={onCancel}\n          disabled={loading}\n        >\n          Close\n        </Button>,\n        <Button\n          id={'reset_password_modal_submit'}\n          key=\"submit\"\n          type=\"primary\"\n          loading={loading}\n          onClick={onOk}\n        >\n          Submit\n        </Button>,\n      ]}\n    >\n      <Form\n        layout=\"vertical\"\n        name=\"basic\"\n        initialValues={userInfo}\n        onFinish={onFinish}\n        onFinishFailed={onFinishFailed}\n        ref={FormInstance}\n        form={form}\n      >\n        <Form.Item\n          label=\"Username\"\n          name=\"username\"\n          rules={[\n            {\n              required: true,\n              message: t('message:users.resetPassword.username.empty'),\n            },\n          ]}\n        >\n          <Input disabled />\n        </Form.Item>\n\n        <Form.Item\n          label=\"Old Password\"\n          name=\"password\"\n          rules={[\n            {\n              required: true,\n              message: t('message:users.resetPassword.oldPassword.empty'),\n            },\n          ]}\n        >\n          <Input.Password\n            onCopy={(e) => e.preventDefault()}\n            onPaste={(e) => e.preventDefault()}\n            autocomplete=\"off\"\n          />\n        </Form.Item>\n\n        <Form.Item\n          label={\n            <span>\n              New Password&nbsp;\n              <Tooltip title={t('password')}>\n                <QuestionCircleOutlined />\n              </Tooltip>\n            </span>\n          }\n          name=\"newPassword\"\n          rules={[\n            {\n              required: true,\n              message: t('message:users.resetPassword.newPassword.empty'),\n              whitespace: true,\n            },\n            {\n              pattern: new RegExp(\n                /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[-_!%&/()=?*+#,.;])[A-Za-z\\d-_!%&/()=?*+#,.;]{11,30}$/g,\n              ),\n              message: t('message:users.resetPassword.newPassword.valid'),\n            },\n            ({ getFieldValue }) => ({\n              validator(rule, value) {\n                if (!value || getFieldValue('password') !== value) {\n                  return Promise.resolve();\n                }\n                return Promise.reject(\n                  t('message:users.resetPassword.newPassword.valid'),\n                );\n              },\n            }),\n          ]}\n          dependencies={['password']}\n        >\n          <Input.Password\n            onCopy={(e) => e.preventDefault()}\n            onPaste={(e) => e.preventDefault()}\n            autocomplete=\"off\"\n            onChange={onPasswordChange}\n          />\n        </Form.Item>\n\n        <Form.Item\n          label=\"Confirm Password\"\n          name=\"newPassword2\"\n          rules={[\n            {\n              required: true,\n              message: t(\n                'message:users.resetPassword.confirmPassword.empty',\n              ),\n            },\n\n            ({ getFieldValue }) => ({\n              validator(rule, value) {\n                if (!value || getFieldValue('newPassword') === value) {\n                  return Promise.resolve();\n                }\n\n                return Promise.reject(\n                  t('message:users.resetPassword.confirmPassword.valid'),\n                );\n              },\n            }),\n          ]}\n        >\n          <Input.Password\n            onCopy={(e) => e.preventDefault()}\n            onPaste={(e) => e.preventDefault()}\n            autocomplete=\"off\"\n          />\n        </Form.Item>\n      </Form>\n    </Modal>\n  );\n};\n\nexport default ResetPasswordModal;\n","import React, { Component, useState } from \"react\";\nimport { Layout, Menu, Button, message, Avatar } from \"antd\";\nimport {\n\tCompassOutlined,\n\tAppstoreOutlined,\n\tUserOutlined,\n\tTeamOutlined,\n} from \"@ant-design/icons\";\nimport { Link } from \"react-router-dom\";\nimport { useCookies } from \"react-cookie\";\nimport { withRouter } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\n\nimport styles from \"./index.module.scss\";\nimport ResetPasswordModal from \"../Modals/ResetPasswordModal\";\n\nconst { Header } = Layout;\nconst { SubMenu } = Menu;\n\nfunction AppHeader(props) {\n\tconst [modalVisible, setModalVisible] = useState(false);\n\tconst [cookies, setCookie, removeCookie] = useCookies([\"isLogin\"]);\n\tconst { isLogin, username, role = \"\" } = cookies;\n\tconst { t, i18n } = useTranslation([\"message\"]);\n\tfunction logout() {\n\t\tremoveCookie(\"isLogin\", { path: \"/\" });\n\t\tremoveCookie(\"username\", { path: \"/\" });\n\t\tremoveCookie(\"access_token\", { path: \"/\" });\n\t\tremoveCookie(\"refresh_token\", { path: \"/\" });\n\t\tprops.history.push(\"/\");\n\t\tmessage.success(t(\"message:logout\"));\n\t}\n\n\tfunction getActiveItem() {\n\t\tconst basePage = props.location.pathname.slice(1).split(\"/\")[0];\n\t\t// TODO: If on study inner pages, need to check user's access to decide what to highlight?\n\t\tswitch (basePage) {\n\t\t\tcase \"\":\n\t\t\t\treturn [\"logo\"];\n\t\t\t\tbreak;\n\t\t\tcase \"login\":\n\t\t\t\treturn [\"login\"];\n\t\t\t\tbreak;\n\t\t\tcase \"my-studies\":\n\t\t\t\treturn [\"my-studies\"];\n\t\t\t\tbreak;\n\t\t\tcase \"studies\":\n\t\t\t\treturn [\"studies\"];\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn [];\n\t\t}\n\t}\n\n\tconst handleCancel = () => {\n\t\tsetModalVisible(false);\n\t}\n\n\treturn (\n\t\t<Header\n\t\t\tclassName=\"header\"\n\t\t\tstyle={{\n\t\t\t\tbackground: \"white\",\n\t\t\t\tboxShadow: \"0 0 14px 1px rgba(0, 0, 0, 0.1)\",\n\t\t\t\tposition: \"sticky\",\n\t\t\t\ttop: \"0\",\n\t\t\t\tzIndex: \"100\",\n\t\t\t\twidth: \"100%\",\n\t\t\t\theight: \"100%\",\n\t\t\t}}\n\t\t>\n\t\t\t<Menu\n\t\t\t\tmode=\"horizontal\"\n\t\t\t\tstyle={{ lineHeight: \"64px\" }}\n\t\t\t\tselectedKeys={getActiveItem()}\n\t\t\t>\n\t\t\t\t<Menu.Item\n\t\t\t\t\tkey=\"logo\"\n\t\t\t\t\tstyle={{ marginRight: \"27px\", paddingLeft: 0 }}\n\t\t\t\t>\n\t\t\t\t\t<Link to=\"/\">\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc={require(\"../../Images/indoc-icon.png\")}\n\t\t\t\t\t\t\tstyle={{ height: \"40px\" }}\n\t\t\t\t\t\t\talt=\"icon\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Link>\n\t\t\t\t</Menu.Item>\n\t\t\t\t{\n\t\t\t\t\tisLogin && (\n\t\t\t\t\t\t<Menu.Item key=\"my-studies\">\n\t\t\t\t\t\t\t<Link to=\"/my-studies\">\n\t\t\t\t\t\t\t\t<AppstoreOutlined /> My studies\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\t<Menu.Item key=\"studies\">\n\t\t\t\t\t<Link to=\"/studies\">\n\t\t\t\t\t\t<CompassOutlined /> Discover Studies\n\t\t\t\t\t</Link>\n\t\t\t\t</Menu.Item>\n\t\t\t\t{isLogin && role == \"instance-admin\" && (\n\t\t\t\t\t<Menu.Item key=\"users\">\n\t\t\t\t\t\t<Link to=\"/admin/users\">\n\t\t\t\t\t\t\t<TeamOutlined /> User Management\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</Menu.Item>\n\t\t\t\t)}\n\t\t\t\t{!isLogin && (\n\t\t\t\t\t<Menu.Item key=\"6\" className={styles.login}>\n\t\t\t\t\t\t<Link to=\"/registration\">\n\t\t\t\t\t\t\t<Button type=\"primary\">Register</Button>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</Menu.Item>\n\t\t\t\t)}\n\t\t\t\t{isLogin ? (\n\t\t\t\t\t<SubMenu\n\t\t\t\t\t\ttitle={\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tbackgroundColor:\n\t\t\t\t\t\t\t\t\t\t\trole === \"researcher\"\n\t\t\t\t\t\t\t\t\t\t\t\t? \"#2768b7\"\n\t\t\t\t\t\t\t\t\t\t\t\t: \"#5e94d4\",\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\ticon={<UserOutlined />}\n\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t/>{\" \"}\n\t\t\t\t\t\t\t\t{username}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t}\n\t\t\t\t\t\tclassName={styles.login}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Menu.ItemGroup key=\"role\" title={role.toUpperCase()}>\n\t\t\t\t\t\t\t<Menu.Item key=\"home\">\n\t\t\t\t\t\t\t\t<Link to=\"/user\">User Center</Link>\n\t\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t\t\t<Menu.Item \n\t\t\t\t\t\t\t\tkey=\"reset\"\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tsetModalVisible(true)\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tReset Password\n\t\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t\t\t<Menu.Item key=\"5\" onClick={logout}>\n\t\t\t\t\t\t\t\tLogout\n\t\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t\t</Menu.ItemGroup>\n\t\t\t\t\t</SubMenu>\n\t\t\t\t) : (\n\t\t\t\t\t<Menu.Item key=\"login\" className={styles.login}>\n\t\t\t\t\t\t<Link to=\"/login\">\n\t\t\t\t\t\t\t<Button type=\"link\">Login</Button>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</Menu.Item>\n\t\t\t\t)}\n\t\t\t</Menu>\n\n\t\t\t<ResetPasswordModal\n\t\t\t\tvisible={modalVisible}\n\t\t\t\tusername={username || 'Error'}\n\t\t\t\thandleCancel={handleCancel}\n\t\t\t/>\n\t\t</Header>\n\t);\n}\n\nexport default withRouter(AppHeader);\n","import React from \"react\";\nimport { Layout } from \"antd\";\n\nconst { Sider } = Layout;\n\nexport default class RightSlider extends React.Component {\n\tstate = {\n\t\tcollapsed: true,\n\t};\n\n\tonCollapse = (collapsed) => {\n\t\tconsole.log(collapsed);\n\t\tthis.setState({ collapsed });\n\t};\n\trender() {\n\t\treturn (\n\t\t\t<Sider\n\t\t\t\tcollapsible\n\t\t\t\tcollapsed={this.state.collapsed}\n\t\t\t\treverseArrow={true}\n\t\t\t\ttheme=\"light\"\n\t\t\t\tonCollapse={this.onCollapse}\n\t\t\t>\n\t\t\t\t{this.props.children}\n\t\t\t</Sider>\n\t\t);\n\t}\n}\n","import React, { Component } from \"react\";\nimport { Layout } from \"antd\";\nimport styles from \"./index.module.scss\";\n\nconst { Sider } = Layout;\n\nexport default class QueryCard extends Component {\n\tstate = {\n\t\tcollapsed: true,\n\t};\n\n\tonCollapse = (collapsed) => {\n\t\tconsole.log(collapsed);\n\t\tthis.setState({ collapsed });\n\t};\n\trender() {\n\t\tconst { title } = this.props;\n\t\t\n\t\treturn (\n\t\t\t<Sider\n\t\t\t\ttrigger={null}\n\t\t\t\tcollapsed={this.state.collapsed}\n\t\t\t\tonCollapse={this.onCollapse}\n\t\t\t\treverseArrow={true}\n\t\t\t\tzeroWidthTriggerStyle={{\n\t\t\t\t\tbackgroundColor: \"white\",\n\t\t\t\t\tright: \"-23px\",\n\t\t\t\t}}\n\t\t\t\tclassName={styles.sider}\n\t\t\t\ttheme=\"light\"\n\t\t\t>\n\t\t\t\t<div className={styles.content}>\n\t\t\t\t\t{title && <p className={styles[\"left-sider\"]}>{title}</p>}\n\n\t\t\t\t\t{this.props.children}\n\t\t\t\t</div>\n\t\t\t</Sider>\n\t\t);\n\t}\n}\n","import React, { useEffect } from \"react\";\nimport { Layout } from \"antd\";\nimport AppHeader from \"./Header\";\nimport RightSlider from \"./RightSlider\";\nimport LeftSider from \"./LeftSider\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport styles from \"./index.module.scss\";\n\nconst { Content } = Layout;\n\nfunction StandardLayout(props) {\n\tconst {\n\t\tobservationVars = [],\n\t\tinitFunc = () => {},\n\t\trightContent,\n\t\tleftContent,\n\t\tchildren,\n\t} = props;\n\n\tuseEffect(initFunc, observationVars);\n\treturn (\n\t\t<Layout>\n\t\t\t<AppHeader />\n\t\t\t<Content className={styles.content}>\n\t\t\t\t<Layout>\n\t\t\t\t\t{leftContent && <LeftSider>{leftContent}</LeftSider>}\n\t\t\t\t\t{children}\n\t\t\t\t\t{rightContent && <RightSlider>{rightContent}</RightSlider>}\n\t\t\t\t</Layout>\n\t\t\t</Content>\n\t\t</Layout>\n\t);\n}\n\nexport default withRouter(connect(null, null)(StandardLayout));\n","import React from \"react\";\n\nconst Footer = () => {\n\treturn (\n\t\t<div\n\t\t\tstyle={{\n\t\t\t\ttextAlign: \"center\",\n\t\t\t\tfontSize: \"12px\",\n\t\t\t\tpadding: \"10px\",\n\t\t\t}}\n\t\t>\n\t\t\tCopyright © {new Date().getFullYear()},{\" \"}\n\t\t\t<a\n\t\t\t\thref=\"https://www.indocresearch.org/\"\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t>\n\t\t\t\tIndoc Research\n\t\t\t</a>\n\t\t\t. All Rights Reserved.\n\t\t</div>\n\t);\n};\nexport default Footer;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useCookies } from \"react-cookie\";\nimport { Row, Col, Card, Spin, Tag, message } from \"antd\";\nimport {\n\tEyeOutlined,\n\tEllipsisOutlined,\n\tStarOutlined,\n\tFileTextOutlined,\n} from \"@ant-design/icons\";\nimport styles from \"./index.module.scss\";\nimport { useDispatch } from 'react-redux';\nimport { setCurrentStudy } from '../../Redux/actions';\n\nconst { Meta } = Card;\n\nfunction StudiesTile(props) {\n\tconst [cookies] = useCookies();\n\tconst { isLogin } = cookies;\n\tconst { data } = props;\n\tconst dispatch = useDispatch();\n\n\tfunction loginNotification() {\n\t\tmessage.success(\"Please login to perform this action.\");\n\t}\n\n\treturn (\n\t\t<Row gutter={16}>\n\t\t\t{data === null ? (\n\t\t\t\t<Spin />\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t{data.length === 0\n\t\t\t\t\t\t? \"No study data available.\"\n\t\t\t\t\t\t: data.map((item, i) => (\n\t\t\t\t\t\t\t\t<Col\n\t\t\t\t\t\t\t\t\txs={{ span: 24 }}\n\t\t\t\t\t\t\t\t\tsm={{ span: 12 }}\n\t\t\t\t\t\t\t\t\tmd={{ span: 8 }}\n\t\t\t\t\t\t\t\t\tlg={{ span: 6 }}\n\t\t\t\t\t\t\t\t\tstyle={{ marginBottom: \"16px\" }}\n\t\t\t\t\t\t\t\t\tkey={i} //todo: replace with study id\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\t\t\t\tcover={\n\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\tto={`/study/${item.id}/landing`}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst studyId = item.id;\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst currentStudy = data && data.find((item) => item.id === Number(studyId));\n\t\t\t\t\t\t\t\t\t\t\t\t\tdispatch(setCurrentStudy(currentStudy));\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<FileTextOutlined\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={styles.icon}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tkey={i} //todo: replace with study id\n\t\t\t\t\t\t\t\t\t\tactions={\n\t\t\t\t\t\t\t\t\t\t\tisLogin\n\t\t\t\t\t\t\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tto={`/study/${item.id}/landing`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<EyeOutlined key=\"view\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<StarOutlined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey=\"star\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage.success(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"Successfully starred the study.\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<EllipsisOutlined key=\"ellipsis\" />,\n\t\t\t\t\t\t\t\t\t\t\t\t  ]\n\t\t\t\t\t\t\t\t\t\t\t\t: [\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Link to=\"/login\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<EyeOutlined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey=\"view\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tloginNotification\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"100%\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Link to=\"/login\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<StarOutlined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey=\"star\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tloginNotification\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"100%\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<EllipsisOutlined key=\"ellipsis\" />,\n\t\t\t\t\t\t\t\t\t\t\t\t  ]\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Meta\n\t\t\t\t\t\t\t\t\t\t\ttitle={\n\t\t\t\t\t\t\t\t\t\t\t\titem.name ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.name}{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.status ===\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"draft\" ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Tag color=\"purple\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tDraft\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Tag>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Tag color=\"green\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tRecruiting\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Tag>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"Study A\"\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tdescription={\n\t\t\t\t\t\t\t\t\t\t\t\t<div className={styles.desc}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{item.description\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? item.description\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"Study description.\"}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t  ))}\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Row>\n\t);\n}\n\nexport default StudiesTile;\n","import React from \"react\";\nimport { Button } from \"antd\";\nimport { StandardLayout } from \"../../Components/Layout\";\nimport { Link, withRouter } from \"react-router-dom\";\n\nimport AppFooter from \"../../Components/Layout/Footer\";\nimport StudiesTile from \"../../Components/Cards/StudiesTile\";\nimport styles from \"./index.module.scss\";\n\nfunction Home(props) {\n\tconst {\n\t\tmatch: { path, params },\n\t} = props;\n\tconst config = {\n\t\tobservationVars: [],\n\t\tinitFunc: () => {},\n\t};\n\treturn (\n\t\t<StandardLayout {...config} rightContent={\"\"}>\n\t\t\t{/* Background container */}\n\t\t\t<section className={styles.hero}></section>\n\t\t\t{/* Hero content */}\n\t\t\t<section className={styles.heroContent}>\n\t\t\t\t<h1 className={styles.h1}>\n\t\t\t\t\tCANARIE <br />\n\t\t\t\t\tPatient Portal\n\t\t\t\t</h1>\n\t\t\t\t<p className={styles.subtitle}>\n\t\t\t\t\tThe Patient Data Gateway.\n\t\t\t\t</p>\n\t\t\t\t<Link to={\"/studies\"}>\n\t\t\t\t\t<Button type=\"primary\">Discover Studies</Button>\n\t\t\t\t</Link>\n\t\t\t</section>\n\n\t\t\t<section className={styles.studies}>\n\t\t\t\t<div className={styles.content}>\n\t\t\t\t\t<h2>Recruiting Studies</h2>\n\t\t\t\t\t<StudiesTile data={[[], [], [], []]} />\n\t\t\t\t</div>\n\t\t\t</section>\n\t\t\t<AppFooter />\n\t\t</StandardLayout>\n\t);\n}\n\nexport default withRouter(Home);\n","import { useState, useEffect } from \"react\";\n\n/**\n * get whether this current view is on mobile (<576px)\n *\n * @returns boolean - isMobile\n */\nfunction useMobile() {\n\tconst [isMobile, setIsMobile] = useState(window.innerWidth < 576);\n\n\tuseEffect(() => {\n\t\tconst handleResize = () => {\n\t\t\tconst width = window.innerWidth;\n\t\t\tconst currentStatus = width < 576;\n\t\t\tif (isMobile !== currentStatus) {\n\t\t\t\tsetIsMobile(currentStatus);\n\t\t\t}\n\t\t};\n\n\t\twindow.addEventListener(\"resize\", handleResize);\n\t\treturn () => {\n\t\t\twindow.removeEventListener(\"resize\", handleResize);\n\t\t};\n\t});\n\n\treturn isMobile;\n}\n\nexport default useMobile;\n","const userAuthLogout = {\n  RECEIVED_LOGOUT: 'RECEIVED_LOGOUT',\n  RECEIVED_LOGIN: 'RECEIVED_LOGIN',\n  TOKEN_EXPIRATION: 'TOKEN_EXPIRATION',\n  LOGOUT_REFRESH_MODAL:'LOGOUT_REFRESH_MODAL',\n  LOGOUT_HEADER:'LOGOUT_HEADER'\n};\n\nObject.entries(userAuthLogout).forEach(([key, value]) => {\n  userAuthLogout[key] = 'USER_AUTH_' + value;\n});\n\nexport { userAuthLogout };\n","import { userAuthLogout } from \"./userAuthManager/namespace\";\n\nconst namespace = {\n\tuserAuthLogout,\n};\n\nexport { namespace };\n","import {\n\tuserLogoutCreator,\n\tsetRefreshModal,\n\tsetUploadListCreator,\n\tsetIsLoginCreator,\n\tsetUsernameCreator,\n} from \"../../Redux/actions\";\nimport { store } from \"../../Redux/store\";\n// import { q } from \"../../Context\";\n\nimport { tokenManager } from \"../tokenManager\";\nimport { reduxActionWrapper, resetReduxState } from \"../../Utility\";\n// import { broadcastManager } from \"../broadcastManager\";\nimport { namespace } from \"../namespace\";\nimport { refreshTokenAPI } from \"../../APIs\";\nimport { namespace as serviceNamespace } from \"../namespace\";\nimport { history } from \"../../Routes\";\n\nconst [setRefreshModalDispatcher, setIsLoginDispatcher] = reduxActionWrapper([\n\tsetRefreshModal,\n\tsetIsLoginCreator,\n]);\nconst modalTime = 60;\nclass UserAuthManager {\n\topenRefreshModalId;\n\tcloseRefreshModalId;\n\texpirationId;\n\t/**\n\t * init refresh modal listener, broadcast listener, token expiration, autoRefreshMonitor to monitor the uploading process.\n\t * @returns {boolean} if the token is valid or not\n\t */\n\tinit() {\n\t\t// this.listenToBroadcast();\n\t\tif (tokenManager.getCookie(\"isLogin\") !== \"true\") {\n\t\t\treturn;\n\t\t} else {\n\t\t\t//set redux\n\t\t\tsetIsLoginDispatcher(true);\n\t\t\tthis.initRefreshModal();\n\t\t\tthis.initExpirationLogout();\n\t\t\ttokenManager.refreshToken();\n\t\t\tthis.autoRefreshMonitor();\n\t\t}\n\t}\n\n\tinitRefreshModal() {\n\t\tconst time = modalTime; // the time to show the refresh modal\n\t\tthis.openRefreshModalId = tokenManager.addListener({\n\t\t\ttime,\n\t\t\tfunc: () => {\n\t\t\t\tconst { isLogin } = store.getState();\n\t\t\t\tif (isLogin) setRefreshModalDispatcher(true);\n\t\t\t},\n\t\t\tcondition: (timeRemain, time) => {\n\t\t\t\treturn (\n\t\t\t\t\ttimeRemain < time && tokenManager.checkTokenUnExpiration()\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t\t// this.closeRefreshModalId = tokenManager.addListener({\n\t\t// \ttime,\n\t\t// \tfunc: () => {\n\t\t// \t\tsetRefreshModalDispatcher(false);\n\t\t// \t},\n\t\t// \tcondition: (timeRemain, time) =>\n\t\t// \t\ttimeRemain > time || !tokenManager.checkTokenUnExpiration(),\n\t\t// });\n\t}\n\t/**\n\t * if remain time is 0, logout\n\t */\n\tinitExpirationLogout() {\n\t\tconst time = 0;\n\t\tconst condition = (timeRemain, time) => timeRemain < time;\n\t\tconst func = () => {\n\t\t\tthis.logout(namespace.userAuthLogout.TOKEN_EXPIRATION);\n\t\t};\n\t\tthis.expirationId = tokenManager.addListener({ time, func, condition });\n\t}\n\n\t/**\n\t * push to interval, if the time remained is less than 2 mins and the queue has upload task, auto refresh, and broadcast\n\t */\n\tautoRefreshMonitor() {\n\t\tconst time = modalTime + 1; //the time to auto refresh, should be modal time +1\n\t\tconst func = () => {\n\t\t\t// const tasks = q.length() + q.running();\n\t\t\t// console.log(tasks, \"tasks\");\n\t\t\t// if (tasks !== 0) {\n\t\t\tconst { username } = store.getState();\n\t\t\t// this.extendAuth().then((res) => {\n\t\t\t// \tbroadcastManager.postMessage(\n\t\t\t// \t\t\"refresh\",\n\t\t\t// \t\tserviceNamespace.broadCast.AUTO_REFRESH,\n\t\t\t// \t\tusername,\n\t\t\t// \t);\n\t\t\t// });\n\t\t\t// }\n\t\t\tconst { isLogin } = store.getState();\n\t\t\tif (isLogin) setRefreshModalDispatcher(false);\n\t\t};\n\t\tconst condition = (timeRemain, time) => {\n\t\t\treturn tokenManager.checkTokenUnExpiration() && timeRemain > time;\n\t\t};\n\t\ttokenManager.addListener({ time, func, condition });\n\t}\n\n\t/**\n\t * listen to broadcast login, logout, refresh\n\t */\n\t// listenToBroadcast() {\n\t// \tbroadcastManager.addListener(\"logout\", (msg, channelNamespace) => {\n\t// \t\tthis.logout(namespace.userAuthLogout.RECEIVED_LOGOUT);\n\t// \t});\n\t// \tbroadcastManager.addListener(\"login\", (msg, channelNamespace) => {\n\t// \t\tconst { isLogin, username } = store.getState();\n\t// \t\tconsole.log(username, \"username\");\n\t// \t\tconsole.log(msg, \"  msg\");\n\t// \t\tif (!isLogin) {\n\t// \t\t\treturn;\n\t// \t\t} else if (msg === username) {\n\t// \t\t\ttokenManager.refreshToken();\n\t// \t\t\treturn;\n\t// \t\t} else {\n\t// \t\t\tthis.logout(namespace.userAuthLogout.RECEIVED_LOGIN);\n\t// \t\t}\n\t// \t});\n\t// \tbroadcastManager.addListener(\"refresh\", (msg, channelNamespace) => {\n\t// \t\tconst { isLogin, username } = store.getState();\n\t// \t\tif (!isLogin) {\n\t// \t\t\treturn;\n\t// \t\t} else if (msg === username) {\n\t// \t\t\ttokenManager.refreshToken();\n\t// \t\t\treturn;\n\t// \t\t}\n\t// \t});\n\t// }\n\n\t/**\n\t * get a new access token and refresh token from the backend. extend the auth by refreshing the refresh_token and access_token from the backend. May be called when q is uploading files or user click on the refresh button on the modal\n\t */\n\tasync extendAuth() {\n\t\tconst refreshTokenOld = tokenManager.getCookie(\"refresh_token\");\n\t\tconst res = await refreshTokenAPI({ refreshtoken: refreshTokenOld });\n\t\tconst { access_token, refresh_token } = res.data.result;\n\t\ttokenManager.setCookies({\n\t\t\taccess_token,\n\t\t\trefresh_token,\n\t\t});\n\t\ttokenManager.refreshToken(access_token);\n\t\treturn;\n\t}\n\t//reset all redux to be implemented\n\tlogout(namespace) {\n\t\tif (\n\t\t\t!Object.values(serviceNamespace.userAuthLogout).includes(namespace)\n\t\t) {\n\t\t\tthrow new Error(\n\t\t\t\t`the namespace is not defined on userAuth namepace file`,\n\t\t\t);\n\t\t}\n\t\tconsole.log(namespace, \"namespace of logout\");\n\t\t// q.kill();\n\t\ttokenManager.clearCookies();\n\t\tresetReduxState();\n\n\t\t//Refresh page\n\t\ttokenManager.removeListener(this.expirationId);\n\t\t// history.go(0);\n\t\twindow.location.href = '/';\n\t}\n}\n\nconst userAuthManager = new UserAuthManager();\nexport default userAuthManager;\n","import React, { useState, useEffect } from \"react\";\nimport { withRouter, Link } from \"react-router-dom\";\nimport { connect, useSelector } from \"react-redux\";\n\nimport { useCookies } from \"react-cookie\";\nimport {\n\tmessage,\n\tCard,\n\tForm,\n\tInput,\n\tButton,\n\tCheckbox,\n\tLayout,\n\tTypography,\n\tTabs,\n\tRow,\n\tCol,\n} from \"antd\";\nimport {\n\tUserOutlined,\n\tLockOutlined,\n\tSmileOutlined,\n\tDotChartOutlined,\n} from \"@ant-design/icons\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { StandardLayout } from \"../../Components/Layout\";\nimport styles from \"./index.module.scss\";\nimport { useMobile } from \"../../Hooks\";\nimport { login, forgotPassword, checkUserInfo } from \"../../APIs\";\nimport { serverAxios as axios } from \"../../APIs/config\";\nimport { parseJwt } from \"../../Utility\";\nimport { userAuthManager } from \"../../Service/userAuthManager\";\nimport { tokenManager } from \"../../Service/tokenManager\";\nimport { namespace as serviceNamespace } from \"../../Service/namespace\";\nimport { setIsLoginCreator, setCurrentUser } from \"../../Redux/actions\";\n\nconst { Content } = Layout;\nconst { Title } = Typography;\nconst { TabPane } = Tabs;\n\nconst layout = {\n\tlabelCol: {\n\t\tspan: 5,\n\t},\n\twrapperCol: {\n\t\tspan: 19,\n\t},\n};\nconst tailLayout = {\n\twrapperCol: {\n\t\tspan: 24,\n\t},\n};\n\nfunction Login(props) {\n\tconst [role, setRole] = useState(\"patient\");\n\tconst [forgotMode, setForgotMode] = useState(false);\n\tconst [cookies, setCookie] = useCookies([\"isLogin\"]);\n\tconst isMobile = useMobile();\n\tconst { t, i18n } = useTranslation([\"message\"]);\n\n\tuseEffect(() => {\n\t\tif (props.isLogin) {\n\t\t\twindow.location = \"/my-studies\";\n\t\t}\n\t});\n\n\tconst {\n\t\tmatch: { path, params },\n\t} = props;\n\tconst config = {\n\t\tobservationVars: [],\n\t\tinitFunc: () => {},\n\t};\n\n\tconst onFinish = (values) => {\n\t\tlogin({ ...values, user_role: role })\n\t\t\t.then(async (res) => {\n\t\t\t\tconst { access_token, refresh_token } = res.data.result;\n\t\t\t\tconst parsedJwt = parseJwt(access_token);\n\n\t\t\t\ttokenManager.setCookies({\n\t\t\t\t\tisLogin: true,\n\t\t\t\t\tusername: values.username,\n\t\t\t\t\trole: parsedJwt.user_role,\n\t\t\t\t\taccess_token: access_token,\n\t\t\t\t\trefresh_token: refresh_token,\n\t\t\t\t});\n\t\t\t\tprops.setIsLoginCreator(true);\n\n\t\t\t\t// initiating userAuthManger\n\t\t\t\tuserAuthManager.initRefreshModal();\n\t\t\t\tuserAuthManager.initExpirationLogout();\n\t\t\t\ttokenManager.refreshToken(access_token);\n\n\t\t\t\tconst userInfoRes = await checkUserInfo({\n\t\t\t\t\tusername: values.username,\n\t\t\t\t});\n\t\t\t\tif (userInfoRes.status === 200) {\n\t\t\t\t\tconsole.log(userInfoRes.data.result);\n\t\t\t\t\tprops.setCurrentUser(userInfoRes.data.result);\n\t\t\t\t}\n\n\t\t\t\t// Redirect the user to former page, if they clicked to login page with a link that sends prevPath\n\t\t\t\t// Otherwise, direct to my-studies page.\n\t\t\t\tif (props.location.state) {\n\t\t\t\t\tprops.history.push(props.location.state.prevPath);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log(params);\n\t\t\t\t\tprops.history.push(\"/my-studies\");\n\t\t\t\t}\n\t\t\t\tmessage.success(`Welcome back, ${values.username}`);\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tif (err.response && err.response.status === 409) {\n\t\t\t\t\tif (role === \"patient\") {\n\t\t\t\t\t\tmessage.error(t(\"message:login.patient_tab.role\"));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmessage.error(t(\"message:login.researcher_tab.role\"));\n\t\t\t\t\t}\n\t\t\t\t} else if (err.response && err.response.status === 403) {\n\t\t\t\t\tmessage.error(t(\"message:login.password_error\"));\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\tconst onForgotFinish = (values) => {\n\t\tforgotPassword(values.email).then((res) => {\n\t\t\tif (res.status === 200) {\n\t\t\t\tmessage.success(t(\"message:login.forgot_password.success\"));\n\t\t\t}\n\t\t});\n\t};\n\n\tconst onFinishFailed = (errorInfo) => {\n\t\tconsole.log(\"Failed:\", errorInfo);\n\t};\n\n\tfunction onChange(value) {\n\t\tsetRole(value);\n\t}\n\n\tconst forgotPwdCard = (\n\t\t<Card>\n\t\t\t<h2 style={{ textAlign: \"center\" }}>Forgot Your Password?</h2>\n\t\t\t<Form\n\t\t\t\t{...layout}\n\t\t\t\tname=\"basic\"\n\t\t\t\tinitialValues={{\n\t\t\t\t\tremember: true,\n\t\t\t\t}}\n\t\t\t\tonFinish={onForgotFinish}\n\t\t\t\tonFinishFailed={onFinishFailed}\n\t\t\t>\n\t\t\t\t<Form.Item\n\t\t\t\t\tlabel=\"Email\"\n\t\t\t\t\tname=\"email\"\n\t\t\t\t\trules={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\tmessage: t(\"message:login.email.required\"),\n\t\t\t\t\t\t},\n\t\t\t\t\t]}\n\t\t\t\t>\n\t\t\t\t\t<Input prefix={<UserOutlined />} />\n\t\t\t\t</Form.Item>\n\n\t\t\t\t<Row style={{ marginTop: -15 }}>\n\t\t\t\t\t<Col xs={{ span: 0 }} sm={{ span: 5 }}></Col>\n\t\t\t\t\t<Col xs={{ span: 24 }} sm={{ span: 19 }}>\n\t\t\t\t\t\t<Form.Item {...tailLayout}>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName={styles.forgot}\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tsetForgotMode(false);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t« Back to Login\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col xs={{ span: 0 }} sm={{ span: 5 }}></Col>\n\t\t\t\t\t<Col xs={{ span: 24 }} sm={{ span: 19 }}>\n\t\t\t\t\t\t<Form.Item {...tailLayout}>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\t\t\t\thtmlType=\"submit\"\n\t\t\t\t\t\t\t\tclassName=\"login-form-button\"\n\t\t\t\t\t\t\t\tstyle={{ width: \"100%\" }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Form>\n\t\t</Card>\n\t);\n\n\treturn (\n\t\t<StandardLayout {...config}>\n\t\t\t<Content className={\"content\"}>\n\t\t\t\t<div className={styles.container}>\n\t\t\t\t\t{!forgotMode ? (\n\t\t\t\t\t\t<Title level={3} className={styles.title}>\n\t\t\t\t\t\t\tWelcome to CANARIE Patient Portal\n\t\t\t\t\t\t</Title>\n\t\t\t\t\t) : null}\n\n\t\t\t\t\t{!forgotMode ? (\n\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t<Tabs\n\t\t\t\t\t\t\t\tdefaultActiveKey=\"patient\"\n\t\t\t\t\t\t\t\tcentered\n\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<TabPane\n\t\t\t\t\t\t\t\t\ttab={\n\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t<SmileOutlined />\n\t\t\t\t\t\t\t\t\t\t\t{!isMobile && \"I am a \"} Patient\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tkey=\"patient\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t\t\t<Col\n\t\t\t\t\t\t\t\t\t\t\txs={{ span: 0 }}\n\t\t\t\t\t\t\t\t\t\t\tsm={{ span: 5 }}\n\t\t\t\t\t\t\t\t\t\t></Col>\n\t\t\t\t\t\t\t\t\t\t<Col\n\t\t\t\t\t\t\t\t\t\t\txs={{ span: 24 }}\n\t\t\t\t\t\t\t\t\t\t\tsm={{ span: 19 }}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\tNew to the platform?{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t<Link to=\"/registration\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tRegister here.\n\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t</TabPane>\n\t\t\t\t\t\t\t\t<TabPane\n\t\t\t\t\t\t\t\t\ttab={\n\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t<DotChartOutlined />\n\t\t\t\t\t\t\t\t\t\t\t{!isMobile && \"I am a \"}Researcher\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tkey=\"researcher\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t\t\t<Col\n\t\t\t\t\t\t\t\t\t\t\txs={{ span: 0 }}\n\t\t\t\t\t\t\t\t\t\t\tsm={{ span: 5 }}\n\t\t\t\t\t\t\t\t\t\t></Col>\n\t\t\t\t\t\t\t\t\t\t<Col\n\t\t\t\t\t\t\t\t\t\t\txs={{ span: 24 }}\n\t\t\t\t\t\t\t\t\t\t\tsm={{ span: 19 }}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\tResearcher accounts are created\n\t\t\t\t\t\t\t\t\t\t\t\tby invitation only. Please\n\t\t\t\t\t\t\t\t\t\t\t\tcontact the instance admin if\n\t\t\t\t\t\t\t\t\t\t\t\tyou require credentials.\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t</TabPane>\n\t\t\t\t\t\t\t</Tabs>\n\t\t\t\t\t\t\t<Form\n\t\t\t\t\t\t\t\t{...layout}\n\t\t\t\t\t\t\t\tname=\"basic\"\n\t\t\t\t\t\t\t\tinitialValues={{\n\t\t\t\t\t\t\t\t\tremember: true,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonFinish={onFinish}\n\t\t\t\t\t\t\t\tonFinishFailed={onFinishFailed}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Form.Item\n\t\t\t\t\t\t\t\t\tlabel=\"Username\"\n\t\t\t\t\t\t\t\t\tname=\"username\"\n\t\t\t\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\t\t\tmessage: t(\n\t\t\t\t\t\t\t\t\t\t\t\t\"message:login.username.required\",\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Input prefix={<UserOutlined />} />\n\t\t\t\t\t\t\t\t</Form.Item>\n\n\t\t\t\t\t\t\t\t<Form.Item\n\t\t\t\t\t\t\t\t\tlabel=\"Password\"\n\t\t\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\t\t\tmessage: t(\n\t\t\t\t\t\t\t\t\t\t\t\t\"message:login.password.required\",\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Input.Password prefix={<LockOutlined />} />\n\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t\t<Col\n\t\t\t\t\t\t\t\t\t\txs={{ span: 0 }}\n\t\t\t\t\t\t\t\t\t\tsm={{ span: 5 }}\n\t\t\t\t\t\t\t\t\t></Col>\n\t\t\t\t\t\t\t\t\t<Col xs={{ span: 24 }} sm={{ span: 19 }}>\n\t\t\t\t\t\t\t\t\t\t<Form.Item {...tailLayout}>\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={styles.forgot}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetForgotMode(true);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tForgot password?\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t\t<Col\n\t\t\t\t\t\t\t\t\t\txs={{ span: 0 }}\n\t\t\t\t\t\t\t\t\t\tsm={{ span: 5 }}\n\t\t\t\t\t\t\t\t\t></Col>\n\t\t\t\t\t\t\t\t\t<Col xs={{ span: 24 }} sm={{ span: 19 }}>\n\t\t\t\t\t\t\t\t\t\t<Form.Item {...tailLayout}>\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\t\thtmlType=\"submit\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tLog In\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t</Card>\n\t\t\t\t\t) : (\n\t\t\t\t\t\tforgotPwdCard\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</Content>\n\t\t</StandardLayout>\n\t);\n}\n\nexport default withRouter(\n\tconnect((state) => ({ isLogin: state.isLogin }), {\n\t\tsetIsLoginCreator,\n\t\tsetCurrentUser,\n\t})(Login),\n);\n","import React from \"react\";\nimport { Layout } from \"antd\";\nimport { Switch, Route, useRouteMatch } from \"react-router-dom\";\n\nimport StandardLayout from \"../../Components/Layout/StandardLayout\";\nimport { registrationRoutes as routes } from \"../../Routes\";\n\nconst { Content } = Layout;\n\nfunction Registration(props) {\n\t// const {\n\t// \tmatch: { path, params },\n\t// } = props;\n\tconst config = {\n\t\tobservationVars: [],\n\t\tinitFunc: () => {},\n\t};\n\tconst match = useRouteMatch();\n\tconsole.log(routes);\n\treturn (\n\t\t<StandardLayout {...config}>\n\t\t\t<Content className={\"content\"}>\n\t\t\t\t<Switch>\n\t\t\t\t\t{routes.map((item) => (\n\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\texact={item.exact || false}\n\t\t\t\t\t\t\tpath={match.url + item.path}\n\t\t\t\t\t\t\tkey={item.path}\n\t\t\t\t\t\t\trender={(props) => <item.component />}\n\t\t\t\t\t\t></Route>\n\t\t\t\t\t))}\n\t\t\t\t</Switch>\n\t\t\t</Content>\n\t\t</StandardLayout>\n\t);\n}\n\nexport default Registration;\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { Form, Input, Select, Button, Space } from \"antd\";\n\nimport { searchStudiesAPI, getStudiesAPI } from \"../../../APIs\";\nimport { setAllStudies } from \"../../../Redux/actions\";\n\nconst { Search } = Input;\nconst { Option } = Select;\n\nconst children = [];\nfor (let i = 10; i < 36; i++) {\n\tchildren.push(\n\t\t<Option key={i.toString(36) + i}>{i.toString(36) + i}</Option>,\n\t);\n}\n\nfunction handleChange(value) {\n\tconsole.log(`selected ${value}`);\n}\n\nfunction StudiesFilter() {\n\tconst [form] = Form.useForm();\n\tconst dispatch = useDispatch();\n\n\tfunction reset() {\n\t\tform.resetFields();\n\t\tgetStudiesAPI().then((res) => {\n\t\t\tdispatch(setAllStudies(res.data.items));\n\t\t});\n\t}\n\n\tfunction onFinish(values) {\n\t\tconsole.log(\"Received values of form:\", values);\n\t\t// searchStudiesAPI(values).then((res) => {\n\t\t// \tdispatch(\n\t\t// \t\tsetAllStudies(\n\t\t// \t\t\ttypeof res.data.items === \"string\" ? [] : res.data.items,\n\t\t// \t\t),\n\t\t// \t);\n\t\t// });\n\t}\n\n\treturn (\n\t\t<Form\n\t\t\tform={form}\n\t\t\tname=\"dynamic_form_item\"\n\t\t\tonFinish={onFinish}\n\t\t\tlayout=\"vertical\"\n\t\t\tstyle={{ padding: \"10px\" }}\n\t\t>\n\t\t\t<Form.Item label={<strong>Name</strong>} name=\"study\">\n\t\t\t\t<Input placeholder={\"Search study name\"} />\n\t\t\t</Form.Item>\n\t\t\t<Form.Item label={<strong>Study Status</strong>} name=\"status\">\n\t\t\t\t<Select\n\t\t\t\t\tmode=\"multiple\"\n\t\t\t\t\tstyle={{ width: \"100%\" }}\n\t\t\t\t\tplaceholder=\"Recruiting, not yet recruiting\"\n\t\t\t\t\tonChange={handleChange}\n\t\t\t\t>\n\t\t\t\t\t<Option key={\"recruiting\"}>Actively Recruiting</Option>\n\t\t\t\t\t<Option key={\"developing\"}>Recruitment not yet open.</Option>\n\t\t\t\t\t<Option key={\"finished\"}>Finished</Option>\n\t\t\t\t\t<Option key={\"suspended\"}>Suspended</Option>\n\t\t\t\t</Select>\n\t\t\t</Form.Item>\n\t\t\t<Form.Item\n\t\t\t\tlabel={<strong>Condition or disease</strong>}\n\t\t\t\tname=\"disease\"\n\t\t\t>\n\t\t\t\t<Select\n\t\t\t\t\tmode=\"multiple\"\n\t\t\t\t\tstyle={{ width: \"100%\" }}\n\t\t\t\t\tplaceholder=\"e.g. breast canacer\"\n\t\t\t\t\tonChange={handleChange}\n\t\t\t\t>\n\t\t\t\t\t<Option key={\"Breast Canacer\"}>Breast Canacer</Option>\n\t\t\t\t\t<Option key={\"Health Behavior\"}>Health Behavior</Option>\n\t\t\t\t\t<Option key={\"Solid Tumor, Adult\"}>\n\t\t\t\t\t\tSolid Tumor, Adult\n\t\t\t\t\t</Option>\n\t\t\t\t\t<Option key={\"Squamous Cell Carcinoma of Head and Neck\"}>\n\t\t\t\t\t\tSquamous Cell Carcinoma of Head and Neck\n\t\t\t\t\t</Option>\n\t\t\t\t</Select>\n\t\t\t</Form.Item>\n\t\t\t<Form.Item label={<strong>Location</strong>} name=\"location\">\n\t\t\t\t<Select\n\t\t\t\t\tmode=\"multiple\"\n\t\t\t\t\tstyle={{ width: \"100%\" }}\n\t\t\t\t\tplaceholder=\"Select a location\"\n\t\t\t\t\tonChange={handleChange}\n\t\t\t\t>\n\t\t\t\t\t<Option key={\"BYC\"}>BYC</Option>\n\t\t\t\t\t<Option key={\"CAM\"}>CAM</Option>\n\t\t\t\t\t<Option key={\"SBH\"}>SBH</Option>\n\t\t\t\t\t<Option key={\"UBC\"}>UBC</Option>\n\t\t\t\t</Select>\n\t\t\t</Form.Item>\n\t\t\t<Form.Item label={<strong>Keywords</strong>} name=\"keywords\">\n\t\t\t\t<Select\n\t\t\t\t\tmode=\"multiple\"\n\t\t\t\t\tstyle={{ width: \"100%\" }}\n\t\t\t\t\tplaceholder=\"Select or search\"\n\t\t\t\t\tonChange={handleChange}\n\t\t\t\t>\n\t\t\t\t\t{children}\n\t\t\t\t</Select>\n\t\t\t</Form.Item>\n\t\t\t<Form.Item\n\t\t\t\tlabel={<strong>Investigator</strong>}\n\t\t\t\tname=\"investigator\"\n\t\t\t>\n\t\t\t\t<Select\n\t\t\t\t\tmode=\"multiple\"\n\t\t\t\t\tstyle={{ width: \"100%\" }}\n\t\t\t\t\tplaceholder=\"Select a user\"\n\t\t\t\t\tonChange={handleChange}\n\t\t\t\t>\n\t\t\t\t\t<Option key={\"Alana Sparks\"}>Alana Sparks</Option>\n\t\t\t\t\t<Option key={\"Sara Latour\"}>Sara Latour</Option>\n\t\t\t\t\t<Option key={\"Jon Gane\"}>Jon Gane</Option>\n\t\t\t\t\t<Option key={\"Sue Evans\"}>Sue Evans</Option>\n\t\t\t\t</Select>\n\t\t\t</Form.Item>\n\t\t\t<Form.Item>\n\t\t\t\t<Space>\n\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\">\n\t\t\t\t\t\tSearch\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button type=\"\" onClick={reset}>\n\t\t\t\t\t\tReset\n\t\t\t\t\t</Button>\n\t\t\t\t</Space>\n\t\t\t</Form.Item>\n\t\t</Form>\n\t);\n}\n\nexport default StudiesFilter;\n","import React, { useState, useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Layout, Typography, Row, Col, Button, Input, Card, Spin } from \"antd\";\nimport { RightOutlined, LeftOutlined, FilterOutlined } from \"@ant-design/icons\";\n\nimport AppFooter from \"../../../Components/Layout/Footer\";\nimport StudiesTile from \"../../../Components/Cards/StudiesTile\";\nimport LeftSider from \"../../../Components/Layout/LeftSider\";\n\nimport styles from \"./index.module.scss\";\nimport Filter from \"./StudiesFilter\";\nimport { useMobile } from \"../../../Hooks\";\nimport { searchStudiesAPI } from \"../../../APIs\";\nimport { setAllStudies } from \"../../../Redux/actions\";\n\nconst { Content } = Layout;\nconst { Title } = Typography;\nconst { Search } = Input;\n\nfunction StudiesContent() {\n\tconst [collapsed, setCollapsed] = useState(true);\n\tconst [filterPanel, setFilterPanel] = useState(false);\n\tconst studies = useSelector((state) => state.publicStudies);\n\n\tconst isMobile = useMobile();\n\n\t// Closes all the filter panels on screen resize\n\tuseEffect(() => {\n\t\tconst handleResize = () => {\n\t\t\tsetCollapsed(true);\n\t\t\tsetFilterPanel(false);\n\t\t};\n\n\t\twindow.addEventListener(\"resize\", handleResize);\n\t\treturn () => {\n\t\t\twindow.removeEventListener(\"resize\", handleResize);\n\t\t};\n\t});\n\n\tfunction toggle() {\n\t\tsetCollapsed(!collapsed);\n\t}\n\n\tfunction handleFilterPanel() {\n\t\tsetFilterPanel(!filterPanel);\n\t}\n\n\tfunction onSearch(value) {\n\t\tconst data = { study: value };\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{/*  Sidebar only renders on desktop */}\n\t\t\t{!isMobile && (\n\t\t\t\t<LeftSider collapsed={collapsed}>\n\t\t\t\t\t<Filter />\n\t\t\t\t</LeftSider>\n\t\t\t)}\n\n\t\t\t<Content className={collapsed ? \"content\" : \"contentOpen\"}>\n\t\t\t\t{/*  Sidebar control only renders on desktop */}\n\t\t\t\t{!isMobile &&\n\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\tcollapsed ? RightOutlined : LeftOutlined,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tclassName: \"toggle\",\n\t\t\t\t\t\t\tonClick: toggle,\n\t\t\t\t\t\t},\n\t\t\t\t\t)}\n\n\t\t\t\t<div className={styles.container}>\n\t\t\t\t\t<Title level={2}>Discover Studies</Title>\n\t\t\t\t\t<Row style={{ marginBottom: \"20px\" }} gutter={8}>\n\t\t\t\t\t\t<Col xs={{ span: 24 }} sm={{ span: 12 }}>\n\t\t\t\t\t\t\t<Button type=\"link\" style={{ paddingLeft: 0 }}>\n\t\t\t\t\t\t\t\tEnter Invitation Code\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col xs={{ span: 22 }} sm={{ span: 12 }}>\n\t\t\t\t\t\t\t<Search\n\t\t\t\t\t\t\t\tplaceholder=\"Search study name\"\n\t\t\t\t\t\t\t\tonSearch={(v) => onSearch(v)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Col>\n\n\t\t\t\t\t\t{/* mobile filter */}\n\t\t\t\t\t\t{isMobile && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<Col xs={{ span: 2 }}>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\t\t\t\t\t\tshape=\"circle\"\n\t\t\t\t\t\t\t\t\t\ticon={<FilterOutlined />}\n\t\t\t\t\t\t\t\t\t\tonClick={handleFilterPanel}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t{filterPanel && (\n\t\t\t\t\t\t\t\t\t<Card className={styles.fileterContentOpen}>\n\t\t\t\t\t\t\t\t\t\t<Filter />\n\t\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Row>\n\t\t\t\t\t{studies ? (\n\t\t\t\t\t\tstudies.length > 0 ? (\n\t\t\t\t\t\t\t<StudiesTile data={studies} />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\tThere aren’t any studies that match your\n\t\t\t\t\t\t\t\t\tsearch query. Ensure you entered all\n\t\t\t\t\t\t\t\t\tinformation correctly and try again.\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p>Need help?</p>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t<a href=\"mailto:che@indocresearch.org\">\n\t\t\t\t\t\t\t\t\t\tContact administrator\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Spin />\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<AppFooter />\n\t\t\t</Content>\n\t\t</>\n\t);\n}\n\nexport default StudiesContent;\n","import React from \"react\";\nimport { StandardLayout } from \"../../Components/Layout\";\nimport { withRouter } from \"react-router-dom\";\nimport StudiesContent from \"./StudiesContent/StudiesContent\";\n\nfunction Studies(props) {\n\t// const {\n\t// \tmatch: { path, params },\n\t// } = props;\n\tconst config = {\n\t\tobservationVars: [],\n\t\tinitFunc: () => {\n\t\t\t// getContainers().then((res) => {\n\t\t\t// \tconst containers = res?.data?.result?.node;\n\t\t\t// \tdispatch(setAllStudies(containers));\n\t\t\t// });\n\t\t},\n\t};\n\treturn (\n\t\t<StandardLayout {...config}>\n\t\t\t<StudiesContent />\n\t\t</StandardLayout>\n\t);\n}\n\nexport default withRouter(Studies);\n","import React, { useEffect, useState } from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport { useCookies } from \"react-cookie\";\nimport { useSelector } from 'react-redux';\nimport { getResearcherApplicable } from '../../APIs';\n\nconst StudyResearcherPageRoleMap = {\n\t\"admin\": [\n\t\t'/study/:studyId/researchers', \n\t\t'/study/:studyId/patients', \n\t\t'/study/:studyId/landing', \n\t\t'/study/:studyId/config',\n\t\t'/study/:studyId',\n\t],\n\t\"member\": [\n\t\t'/study/:studyId/patients', \n\t\t'/study/:studyId/landing', \n\t\t'/study/:studyId',\n\t],\n\t\"patient\": [\n\t\t'/study/:studyId/landing', \n\t\t'/study/:studyId',\n\t],\n};\n\nconst ProtectedRoute = ({ component: Component, ...rest }) => {\n\tconst [cookies] = useCookies([\"isLogin\"]);\n\tconst [access, setAccess] = useState(true);\n\tconst user = useSelector(state => state.user);\n\n\tconst platformRole = cookies.role;\n\n\tconst pathname = rest.location.pathname;\n\tconst pathArr = pathname.split('/');\n\tconst studyId = pathname.includes('study') && pathArr[pathArr.length - 2];\n\n\tuseEffect(() => {\n\t\t(studyId && studyId !== 'undefined' && user.role !== 'patient') && getResearcherApplicable(studyId)\n\t\t\t.then((res) => {\n\t\t\t\tconst username = cookies.username;\n\t\t\t\tif (res.status === 200) {\n\t\t\t\t\tconst { result } = res.data;\n\n\t\t\t\t\tconst user = result.find(item => item.username === username);\n\n\t\t\t\t\tconst path = rest.path;\n\n\t\t\t\t\tif (platformRole === 'patient') {\n\t\t\t\t\t\tif (!StudyResearcherPageRoleMap[platformRole].includes(path)) setAccess(false);;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else if (platformRole !== 'instance-admin' && !StudyResearcherPageRoleMap[user['permission']].includes(path)) {\n\t\t\t\t\t\tsetAccess(false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tsetAccess(false);\n\t\t\t});\n\t}, [])\n\n\treturn (\n\t\t<Route\n\t\t\t{...rest}  \n\t\t\trender={(props) => {\n\t\t\t\tif (cookies.isLogin && access) {\n\t\t\t\t\treturn <Component {...rest} {...props} />;\n\t\t\t\t} else {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Redirect\n\t\t\t\t\t\t\tto={{\n\t\t\t\t\t\t\t\tpathname: \"/error/403\",\n\t\t\t\t\t\t\t\tstate: {\n\t\t\t\t\t\t\t\t\tfrom: props.location,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}}\n\t\t/>\n\t);\n};\n\nexport default ProtectedRoute;\n","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Menu } from \"antd\";\nimport { useCookies } from \"react-cookie\";\nimport {\n\tSettingOutlined,\n\tHomeOutlined,\n\tUnorderedListOutlined,\n\tTeamOutlined,\n\tUserOutlined,\n\tQuestionOutlined,\n\tFormOutlined,\n} from \"@ant-design/icons\";\n\nfunction StudyMenu({ currentStudy, currentPath, isPublicView, isSurveyConnected }) {\n\tconst [cookies] = useCookies();\n\tconst currentRole = cookies.role;\n\tconst currentPermission = currentStudy && currentStudy.permission;\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"logo\" />\n\t\t\t<Menu theme=\"light\" selectedKeys={[currentPath]} mode=\"inline\">\n\t\t\t\t<Menu.Item key=\"landing\" icon={<HomeOutlined />}>\n\t\t\t\t\t<Link to=\"landing\">Landing</Link>\n\t\t\t\t</Menu.Item>\n\t\t\t\t{\n\t\t\t\t\t!isPublicView && (currentRole === 'instance-admin' || currentPermission === 'admin') && (\n\t\t\t\t\t\t<Menu.Item key=\"config\" icon={<SettingOutlined />}>\n\t\t\t\t\t\t\t<Link to=\"config\">Study Configuration</Link>\n\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t)\n\t\t\t\t}\n\n\t\t\t\t{\n\t\t\t\t\t!isPublicView && currentRole !== 'patient' && (\n\t\t\t\t\t\t<Menu.Item key=\"patients\" icon={<UserOutlined />}>\n\t\t\t\t\t\t\t<Link to=\"patients\">Patient</Link>\n\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t)\n\t\t\t\t}\n\n\t\t\t\t{\n\t\t\t\t\t!isPublicView && (currentRole === 'instance-admin' || currentPermission === 'admin') && (\n\t\t\t\t\t\t<Menu.Item key=\"researchers\" icon={<TeamOutlined />}>\n\t\t\t\t\t\t\t<Link to=\"researchers\">Researchers</Link>\n\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t)\n\t\t\t\t}\n\n\t\t\t\t{\n\t\t\t\t\t!isPublicView && currentRole === 'patient' && (\n\t\t\t\t\t\t<Menu.Item key=\"survey\" disabled={!isSurveyConnected} icon={<FormOutlined />}>\n\t\t\t\t\t\t\t<Link to=\"survey\">Survey</Link>\n\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\t{\n\t\t\t\t\t!isPublicView && (currentRole === 'instance-admin' || currentPermission === 'admin') && (\n\t\t\t\t\t\t<Menu.Item key=\"5\" icon={<UnorderedListOutlined />}>\n\t\t\t\t\t\t\tLogging\n\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t)\n\t\t\t\t}\n\n\t\t\t\t{\n\t\t\t\t\t!isPublicView && (\n\t\t\t\t\t\t<Menu.Item key=\"6\" icon={<QuestionOutlined />}>\n\t\t\t\t\t\t\tHelp\n\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t)\n\t\t\t\t}\n\n\t\t\t</Menu>\n\t\t</>\n\t);\n}\n\nexport default StudyMenu;\n","import React from \"react\";\n\nimport { Link, withRouter } from \"react-router-dom\";\nimport { Breadcrumb } from \"antd\";\n\nfunction StudyBreadcrumb(props) {\n\tconst studyId = props.match.params.studyId;\n\tconst routePaths = props.routePaths;\n\tconst getPath = (item) => {\n\t\tswitch (item) {\n\t\t\tcase \"My Studies\": {\n\t\t\t\treturn `/my-studies`;\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\treturn `/study/${studyId}/landing`;;\n\t\t}\n\t};\n\n\tfunction capitalizeFirstLetter(string) {\n\t\treturn string.charAt(0).toUpperCase() + string.slice(1);\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<Breadcrumb>\n\t\t\t\t{routePaths.map((item, index) => (\n\t\t\t\t\t<Breadcrumb.Item key={item}>\n\t\t\t\t\t\t{/* no link if current page */}\n\t\t\t\t\t\t{index === routePaths.length - 1 ? (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{parseInt(item)\n\t\t\t\t\t\t\t\t\t? item\n\t\t\t\t\t\t\t\t\t: item && capitalizeFirstLetter(item)}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<Link to={getPath(item)}>\n\t\t\t\t\t\t\t\t\t{parseInt(item)\n\t\t\t\t\t\t\t\t\t\t? item\n\t\t\t\t\t\t\t\t\t\t: item && capitalizeFirstLetter(item)}\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Breadcrumb.Item>\n\t\t\t\t))}\n\t\t\t</Breadcrumb>\n\t\t</>\n\t);\n}\n\nexport default withRouter(StudyBreadcrumb);\n","import React, { useState, useEffect } from \"react\";\nimport { useCookies } from \"react-cookie\";\nimport { StandardLayout } from \"../../Components/Layout\";\nimport ProtectedRoute from '../../Components/ProtectedRoute/ProtectedRoute';\nimport { studyRoutes as routes } from \"../../Routes/index\";\nimport { withRouter, Switch, Route, useLocation } from \"react-router-dom\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setSurveyLink, setSurveyQueueLink, setSurveyStatus } from \"../../Redux/actions\";\nimport { checkRedCapSurvey, getRedCapSurveyQueueLink, getRedCapSurveyLink } from \"../../APIs\";\n\nimport StudyMenu from \"./Menu/Menu\";\nimport StudyBreadCrumb from \"./Menu/BreadCrumbs\";\nimport { Layout } from \"antd\";\nconst { Content } = Layout;\nfunction Study(props) {\n\tconst {\n\t\tmatch: { path, params },\n\t\tredirect,\n\t} = props;\n\tconst config = {\n\t\tobservationVars: [params.datasetId],\n\t\tinitFunc: () => { },\n\t};\n\tconst [cookies] = useCookies();\n\tconst studies = useSelector((state) => state.studies && state.studies.allStudies);\n\tconst user = useSelector((state) => state.user);\n\tconst publicStudies = useSelector((state) => state.publicStudies);\n\tconst [isSurveyStarted, setIsSurveyStarted] = useState(false);\n\tconst [isSurveyConnected, setSurveyConnected] = useState(false);\n\tconst [completedSurveyNum, setCompletedSurveyNum] = useState(0);\n\tconst dispatch = useDispatch();\n\tconst location = useLocation();\n\n\tconst studyId = props.match.params.studyId;\n\n\tlet isPublicView = false;\n\tlet currentStudy = studies && studies.find((item) => item.id === Number(studyId));\n\n\tuseEffect(() => {\t\n\t\tif (currentStudy) {\n\t\t\tconsole.log('Location changed', location);\n\t\t\tif (user && Object.keys(user).length && user.role === 'patient') {\n\t\t\t\tconst container_guid_guid = user.container_guid_guid;\n\t\t\t\tconst container_guid_container = user.container_guid_container;\n\t\n\t\t\t\tconst index = container_guid_container && container_guid_container.indexOf(String(currentStudy.id));\n\t\n\t\t\t\tconst recordId = container_guid_guid && container_guid_guid[index];\n\t\t\t\t\n\t\t\t\trecordId && checkRedCapSurvey(recordId, String(currentStudy.id))\n\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\tif (res.status === 200) {\n\t\t\t\t\t\t\tif (res.data.result && res.data.result.length > 0) {\n\t\t\t\t\t\t\t\tsetSurveyConnected(true);\n\t\t\t\t\t\t\t\tconst eConsentData = res.data.result[0];\n\t\t\t\t\t\t\t\tif (eConsentData['econsent'] === '1') {\n\t\t\t\t\t\t\t\t\tsetIsSurveyStarted(true);\n\t\t\t\t\t\t\t\t\tdispatch(setSurveyStatus(true));\n\n\t\t\t\t\t\t\t\t\tconst keys = Object.keys(eConsentData);\n\t\t\t\t\t\t\t\t\tlet num = 0;\n\t\t\t\t\t\t\t\t\tfor (const key of keys) {\n\t\t\t\t\t\t\t\t\t\tif (key.includes('_complete') && eConsentData[key] === '2') num++;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tsetCompletedSurveyNum(num);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tgetRedCapSurveyLink(recordId, String(currentStudy.id))\n\t\t\t\t\t\t\t\t\t.then((res2) => {\n\t\t\t\t\t\t\t\t\t\tif (res2.status === 200) {\n\t\t\t\t\t\t\t\t\t\t\tdispatch(setSurveyLink(res2.data.result))\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\n\t\t\t\trecordId && getRedCapSurveyQueueLink(recordId, String(currentStudy.id))\n\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\tif (res.status === 200) {\n\t\t\t\t\t\t\tdispatch(setSurveyQueueLink(res.data.result))\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t}, [user, currentStudy, location])\n\n\tif (!currentStudy) {\n\t\tcurrentStudy = publicStudies && publicStudies.find((item) => item.id === Number(studyId));\n\n\t\tif (currentStudy) isPublicView = true;\n\t}\n\n\tconst routePaths = props.location.pathname\n\t\t.split(\"/\")\n\t\t.filter((el) => el != \"\");\n\n\tconst pathList = ['My Studies', currentStudy && currentStudy.name, routePaths[routePaths.length - 1]]\n\n\treturn (\n\t\t<StandardLayout\n\t\t\t{...config}\n\t\t\tleftContent={\n\t\t\t\t<StudyMenu \n\t\t\t\t\tcurrentStudy={currentStudy} \n\t\t\t\t\tcurrentPath={routePaths.length && routePaths[2]} \n\t\t\t\t\tisPublicView={isPublicView} \n\t\t\t\t\tisSurveyConnected={isSurveyConnected}\n\t\t\t\t/>\n\t\t\t}\n\t\t>\n\t\t\t<Content style={{ marginLeft: 80 }}>\n\t\t\t\t<div\n\t\t\t\t\tclassName={\"container\"}\n\t\t\t\t\tstyle={{ maxWidth: \"1440px\", marginLeft: \"50px\", marginTop: \"50px\" }}\n\t\t\t\t>\n\t\t\t\t\t<StudyBreadCrumb routePaths={pathList} />\n\t\t\t\t</div>\n\t\t\t\t<Switch>\n\t\t\t\t\t{routes.map((item) => {\n\t\t\t\t\t\tif (item.protected) {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<ProtectedRoute\n\t\t\t\t\t\t\t\t\texact={item.exact || false}\n\t\t\t\t\t\t\t\t\tpath={path + item.path}\n\t\t\t\t\t\t\t\t\tkey={item.path}\n\t\t\t\t\t\t\t\t\tcomponent={item.component}\n\t\t\t\t\t\t\t\t\tdatasetId={item.datasetId}\n\t\t\t\t\t\t\t\t\tcurrentStudy={currentStudy}\n\t\t\t\t\t\t\t\t\tisSurveyStarted={isSurveyStarted}\n\t\t\t\t\t\t\t\t\tisSurveyConnected={isSurveyConnected}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\texact={item.exact || false}\n\t\t\t\t\t\t\t\tpath={path + item.path}\n\t\t\t\t\t\t\t\tkey={item.path}\n\t\t\t\t\t\t\t\trender={() => (\n\t\t\t\t\t\t\t\t\t<item.component \n\t\t\t\t\t\t\t\t\t\tdatasetId={item.datasetId} \n\t\t\t\t\t\t\t\t\t\tcurrentStudy={currentStudy} \n\t\t\t\t\t\t\t\t\t\tisSurveyStarted={isSurveyStarted} \n\t\t\t\t\t\t\t\t\t\tisSurveyConnected={isSurveyConnected}\n\t\t\t\t\t\t\t\t\t\tcompletedSurveyNum={completedSurveyNum}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)\n\t\t\t\t\t})}\n\t\t\t\t</Switch>\n\t\t\t</Content>\n\t\t</StandardLayout>\n\t);\n}\n\nexport default withRouter(Study);\n","import React, { useState } from \"react\";\nimport { Menu, Dropdown, Button, Popconfirm, message, Typography } from \"antd\";\nimport { DownOutlined } from \"@ant-design/icons\";\nimport { useTranslation } from 'react-i18next';\n\nimport { suspendUsers } from \"../../APIs\";\n\nconst { Text } = Typography;\n\nfunction PopconfirmDropdown({ record, fetchUsers }) {\n\tconst [v, setV] = useState(false);\n\tconst { t, i18n } = useTranslation(['message']);\n\t\n\tconst menu = (id) => (\n\t\t<Menu>\n\t\t\t<Menu.Item key={id}>\n\t\t\t\t<Text type=\"danger\" onClick={() => setV(true)}>\n\t\t\t\t\tSuspend\n\t\t\t\t</Text>\n\t\t\t</Menu.Item>\n\t\t</Menu>\n\t);\n\n\tasync function suspendUser() {\n\t\tsuspendUsers([record.username])\n\t\t\t.then((res) => {\n\t\t\t\tmessage.success(`The user ${record.username} is suspended`);\n\t\t\t\tfetchUsers();\n\t\t\t})\n\t\t\t.then((error) => console.log(error));\n\t}\n\treturn (\n\t\t<Popconfirm\n\t\t\ttitle={`${t('message:users.suspend.doubleConfirm')} ${record.username}?`}\n\t\t\tcancelText=\"No\"\n\t\t\ttrigger=\"click\"\n\t\t\tvisible={v}\n\t\t\tonCancel={() => setV(false)}\n\t\t\tonConfirm={() => {\n\t\t\t\tsuspendUser();\n\t\t\t\tsetV(false);\n\t\t\t}}\n\t\t>\n\t\t\t<Dropdown\n\t\t\t\toverlay={menu(record._id, record.name)}\n\t\t\t\tplacement=\"bottomLeft\"\n\t\t\t>\n\t\t\t\t<Button\n\t\t\t\t\tclassName=\"ant-dropdown-link\"\n\t\t\t\t\ttype=\"link\"\n\t\t\t\t\tstyle={{ paddingLeft: \"0\" }}\n\t\t\t\t>\n\t\t\t\t\tMore <DownOutlined />\n\t\t\t\t</Button>\n\t\t\t</Dropdown>\n\t\t</Popconfirm>\n\t);\n}\n\nexport default PopconfirmDropdown;\n","import React from \"react\";\nimport { Modal, Form, Input, Tooltip, Radio, message } from \"antd\";\nimport { QuestionCircleOutlined } from \"@ant-design/icons\";\nimport _ from \"lodash\";\nimport { useTranslation } from 'react-i18next';\n\nimport { inviteUser, checkUserInfo } from \"../../APIs\";\n\nconst formRef = React.createRef();\n\nconst layout = {\n\tlabelCol: {\n\t\tspan: 6,\n\t},\n\twrapperCol: {\n\t\tspan: 18,\n\t},\n};\n\nconst onFinishFailed = (errorInfo) => {\n\tconsole.log(\"Failed:\", errorInfo);\n};\n\nconst options = [\n\t// { label: \"Study Onwer\", value: \"container-requester\" },\n\t// { label: \"Study Member\", value: \"registered-user\" },\n\t{ label: \"Instance Admin\", value: \"instance-admin\" },\n];\n\nfunction InviteUser(props) {\n\tconst { t, i18n } = useTranslation(['message']);\n\n\tconst onFinish = async () => {\n\t\tformRef.current.validateFields().then((values) => {\n\t\t\tconst user = Object.assign({}, values, { projectId: -1 });\n\t\t\tconsole.log(\"onFinish -> user\", user);\n\t\t\tinviteUser(user)\n\t\t\t\t.then((res) =>\n\t\t\t\t\tmessage.success(\n\t\t\t\t\t\tt('message:invitation.invite.success')\n\t\t\t\t\t),\n\t\t\t\t)\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tconsole.error(err);\n\t\t\t\t});\n\t\t\tprops.onInviteUserCancel();\n\t\t\tformRef.current.resetFields();\n\t\t});\n\t};\n\tconst roleTip = (\n\t\t<p>\n\t\t\tInstance Admin: An instance admin who oversees the site\n\t\t\t{/* <br />\n\t\t\tStudy Onwer: A user who can request containers\n\t\t\t<br />\n\t\t\tStudy Member: A user who can be added to containers, with no special\n\t\t\tpreviliges */}\n\t\t</p>\n\t);\n\t/**\n\t * Validate user with username or email\n\t *\n\t * @param {*} rule the\n\t * @param {*} value\n\t */\n\tconst validateUser = async (rule, value) => {\n\t\ttry {\n\t\t\tconst query = {};\n\t\t\tquery[rule.field] = value;\n\t\t\tconst userInfo = await checkUserInfo(query);\n\t\t\tif (!_.isEmpty(userInfo.data.result)) {\n\t\t\t\tthrow `${rule.field} ${value} is taken`;\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tthrow err;\n\t\t}\n\t};\n\n\treturn (\n\t\t<Modal\n\t\t\ttitle=\"Invite User\"\n\t\t\tvisible={props.inviteUser}\n\t\t\tonOk={onFinish}\n\t\t\tonCancel={props.onInviteUserCancel}\n\t\t>\n\t\t\t<Form\n\t\t\t\t{...layout}\n\t\t\t\tname=\"basic\"\n\t\t\t\tinitialValues={{\n\t\t\t\t\tremember: true,\n\t\t\t\t}}\n\t\t\t\tonFinish={onFinish}\n\t\t\t\tonFinishFailed={onFinishFailed}\n\t\t\t\tref={formRef}\n\t\t\t>\n\t\t\t\t<Form.Item\n\t\t\t\t\tlabel=\"Username\"\n\t\t\t\t\tname=\"username\"\n\t\t\t\t\tvalidateTrigger=\"onBlur\"\n\t\t\t\t\trules={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\tmessage: t('message:invitation.invite.username.required')\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ validator: validateUser },\n\t\t\t\t\t]}\n\t\t\t\t>\n\t\t\t\t\t<Input />\n\t\t\t\t</Form.Item>\n\t\t\t\t<Form.Item\n\t\t\t\t\tlabel=\"First Name\"\n\t\t\t\t\tname=\"firstname\"\n\t\t\t\t\trules={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\tmessage: t('message:invitation.invite.firstName.required'),\n\t\t\t\t\t\t},\n\t\t\t\t\t]}\n\t\t\t\t>\n\t\t\t\t\t<Input />\n\t\t\t\t</Form.Item>\n\t\t\t\t<Form.Item\n\t\t\t\t\tlabel=\"Last Name\"\n\t\t\t\t\tname=\"lastname\"\n\t\t\t\t\trules={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\tmessage: t('message:invitation.invite.lastName.required')\n\t\t\t\t\t\t},\n\t\t\t\t\t]}\n\t\t\t\t>\n\t\t\t\t\t<Input />\n\t\t\t\t</Form.Item>\n\t\t\t\t<Form.Item\n\t\t\t\t\tlabel=\"User Email\"\n\t\t\t\t\tname=\"email\"\n\t\t\t\t\tvalidateTrigger=\"onBlur\"\n\t\t\t\t\trules={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\tmessage: t('message:invitation.invite.email.required')\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: \"email\",\n\t\t\t\t\t\t\tmessage: t('message:invitation.invite.username.valid')\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ validator: validateUser },\n\t\t\t\t\t]}\n\t\t\t\t>\n\t\t\t\t\t<Input />\n\t\t\t\t</Form.Item>\n\n\t\t\t\t<Form.Item\n\t\t\t\t\tlabel={\n\t\t\t\t\t\t<Tooltip placement=\"top\" title={roleTip}>\n\t\t\t\t\t\t\tRole <QuestionCircleOutlined />\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t}\n\t\t\t\t\tname=\"role\"\n\t\t\t\t\trules={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\tmessage: t('message:invitation.invite.role.required')\n\t\t\t\t\t\t},\n\t\t\t\t\t]}\n\t\t\t\t>\n\t\t\t\t\t<Radio.Group options={options} />\n\t\t\t\t</Form.Item>\n\t\t\t</Form>\n\t\t</Modal>\n\t);\n}\n\nexport default InviteUser;\n","import React, { useState } from \"react\";\nimport {\n\tTypography,\n\tTable,\n\tButton,\n\tmessage,\n\tModal,\n\tUpload,\n\tProgress,\n} from \"antd\";\nimport { UploadOutlined } from \"@ant-design/icons\";\nimport csv from \"papaparse\";\nimport _ from \"lodash\";\nimport { useTranslation } from 'react-i18next';\nimport { inviteUser, checkUserInfo } from \"../../APIs\";\n\nconst { Text } = Typography;\nvar Promise = require(\"bluebird\");\n\nfunction BulkInviteUsers({ closeBulkModal, visible }) {\n\tconst [csvError, setCsvError] = useState(null);\n\tconst [usersError, setUsersError] = useState([]);\n\tconst [userList, setUserList] = useState(null);\n\tconst [selectedUsers, setSelectedUsers] = useState(null);\n\tconst [progress, setProgress] = useState(0); // 0-100\n\tconst { t, i18n } = useTranslation(['message']);\n\n\tconst bulkUserColumns = [\n\t\t{\n\t\t\ttitle: \"Username\",\n\t\t\tdataIndex: \"username\",\n\t\t\tkey: \"username\",\n\t\t},\n\t\t{\n\t\t\ttitle: \"First Name\",\n\t\t\tdataIndex: \"firstname\",\n\t\t\tkey: \"firstname\",\n\t\t},\n\t\t{\n\t\t\ttitle: \"Last Name\",\n\t\t\tdataIndex: \"lastname\",\n\t\t\tkey: \"lastname\",\n\t\t},\n\t\t{\n\t\t\ttitle: \"Email\",\n\t\t\tdataIndex: \"email\",\n\t\t\tkey: \"email\",\n\t\t},\n\t\t{\n\t\t\ttitle: \"Role\",\n\t\t\tdataIndex: \"role\",\n\t\t\tkey: \"role\",\n\t\t},\n\t];\n\tfunction onClose() {\n\t\tcloseBulkModal();\n\t\tclearStatus();\n\t}\n\n\tfunction clearStatus() {\n\t\tsetUserList(null);\n\t\tsetCsvError(null);\n\t\tsetSelectedUsers(null);\n\t\tsetProgress(0);\n\t\tsetUsersError([]);\n\t}\n\tconst onBulkSubmit = async () => {\n\t\tconsole.log(\"selected:\", selectedUsers);\n\n\t\t// for each selected user, run addOneUser()\n\t\t// when all promised are settled, based on whether exceptions are thrown, print\n\t\t// the right summary message\n\n\t\tsetProgress(0);\n\t\tconst step = (1 / selectedUsers.length) * 100;\n\t\tlet progressPercentage = 0;\n\n\t\tconst promises = selectedUsers.map((user) => addOneUser(user));\n\n\t\tPromise.allSettled(promises).then((res) => {\n\t\t\tlet hasProblem = false;\n\t\t\tres.forEach((result) => {\n\t\t\t\tif (result._settledValueField instanceof Error) {\n\t\t\t\t\thasProblem = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (hasProblem) {\n\t\t\t\tmessage.info(t('message:invitation.bulk_invite.problem'));\n\t\t\t} else {\n\t\t\t\t// onClose();\n\t\t\t\tsetProgress(100);\n\t\t\t\tmessage.success(t('message:invitation.bulk_invite.success'));\n\t\t\t}\n\t\t});\n\n\t\t/**\n\t\t * Check username and email of this user. If both valid,\n\t\t * this user will be invited.\n\t\t * Otherwise, exception will be thrown and error will be added to to usersError state.\n\t\t *\n\t\t * @param {*} user\n\t\t * @returns\n\t\t */\n\t\tfunction addOneUser(user) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tconst checkUsername = validateUser(\n\t\t\t\t\t{ field: \"username\" },\n\t\t\t\t\tuser.username,\n\t\t\t\t);\n\n\t\t\t\tcheckUsername\n\t\t\t\t\t.then(() => console.log(\"name is ok\"))\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\treturn validateUser({ field: \"email\" }, user.email);\n\t\t\t\t\t})\n\t\t\t\t\t.then(() => console.log(\"email is ok\"))\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\treturn inviteUser(\n\t\t\t\t\t\t\tObject.assign({}, user, { projectId: -1 }),\n\t\t\t\t\t\t);\n\t\t\t\t\t})\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tprogressPercentage += step;\n\t\t\t\t\t\tsetProgress(progressPercentage);\n\t\t\t\t\t\tresolve(\"userAdded!\");\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\tsetUsersError([...usersError, error.message]);\n\t\t\t\t\t\tconsole.log(error.message);\n\t\t\t\t\t\treject(new Error(error.message));\n\t\t\t\t\t});\n\t\t\t});\n\t\t}\n\t};\n\n\t/**\n\t * Validate user with username or email\n\t *\n\t * @param {*} rule the\n\t * @param {*} value\n\t */\n\tconst validateUser = (rule, value) => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst query = {};\n\t\t\tquery[rule.field] = value;\n\t\t\tconst userInfo = checkUserInfo(query);\n\t\t\tuserInfo\n\t\t\t\t.then((result) => {\n\t\t\t\t\tconsole.log(\"validateUser -> result\", result);\n\t\t\t\t\tif (!_.isEmpty(result.data.result)) {\n\t\t\t\t\t\treject(new Error(`${rule.field} ${value} is taken`));\n\t\t\t\t\t}\n\t\t\t\t\tconst res = { message: \"the user info is valid\" };\n\t\t\t\t\tresolve(res);\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tconsole.log(\"validateUser -> err\", err);\n\t\t\t\t\treject(new Error(err));\n\t\t\t\t});\n\t\t});\n\t};\n\n\tconst props = {\n\t\tname: \"file\",\n\t\tbeforeUpload: (file) => {\n\t\t\tclearStatus();\n\t\t\t// Check file type.\n\t\t\t// on windows, the csv file will be read as application/vnd.ms-excel,\n\t\t\t// https://christianwood.net/csv-file-upload-validation/\n\t\t\tif (\n\t\t\t\tfile.type === \"text/csv\" ||\n\t\t\t\tfile.type === \"application/vnd.ms-excel\"\n\t\t\t) {\n\t\t\t\t//Parse csv with papa parser\n\t\t\t\tcsv.parse(file, {\n\t\t\t\t\theader: true,\n\t\t\t\t\tskipEmptyLines: true,\n\t\t\t\t\tcomplete: function (results) {\n\t\t\t\t\t\t// Check first item, if not exist, throw error\n\t\t\t\t\t\tif (!results.data[0]) {\n\t\t\t\t\t\t\tsetCsvError(\n\t\t\t\t\t\t\t\t\"Cannot read items in uploaded file, please use the template or check format.\",\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Check header format, has to have following fields\n\t\t\t\t\t\tconst header = Object.keys(results.data[0]);\n\t\t\t\t\t\tconst requiredCols = [\n\t\t\t\t\t\t\t\"username\",\n\t\t\t\t\t\t\t\"firstname\",\n\t\t\t\t\t\t\t\"lastname\",\n\t\t\t\t\t\t\t\"email\",\n\t\t\t\t\t\t\t\"role\",\n\t\t\t\t\t\t];\n\t\t\t\t\t\tfor (const item of requiredCols) {\n\t\t\t\t\t\t\tif (!header.includes(item)) {\n\t\t\t\t\t\t\t\tsetCsvError(\n\t\t\t\t\t\t\t\t\t'csv header has to include following fields: \"username\",\"firstname\",\"lastname\",\"email\", \"role\"',\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//Update userlist\n\t\t\t\t\t\tsetUserList(results.data);\n\t\t\t\t\t\tsetSelectedUsers(results.data);\n\t\t\t\t\t},\n\t\t\t\t\terror: function (error) {\n\t\t\t\t\t\tconsole.error(\"error: \", error);\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tsetCsvError(\"You can only upload csv file.\");\n\t\t\t\tsetUserList(null);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tshowUploadList: false,\n\t\theaders: {\n\t\t\tauthorization: \"authorization-text\",\n\t\t},\n\t\tonChange(info) {\n\t\t\tif (info.file.status !== \"uploading\") {\n\t\t\t\t// console.log(info.file, info.fileList);\n\t\t\t}\n\t\t\tif (info.file.status === \"done\") {\n\t\t\t\tmessage.success(`${info.file.name} ${t('message:invitation.bulk_invite.file.success')}`);\n\t\t\t} else if (info.file.status === \"error\") {\n\t\t\t\tmessage.error(`${info.file.name} ${t('message:invitation.bulk_invite.file.failed')}`);\n\t\t\t}\n\t\t},\n\t};\n\tconst rowSelection = {\n\t\tonChange: (selectedRowKeys, selectedRows) => {\n\t\t\tconsole.log(\n\t\t\t\t`selectedRowKeys: ${selectedRowKeys}`,\n\t\t\t\t\"selectedRows: \",\n\t\t\t\tselectedRows,\n\t\t\t);\n\t\t\tsetSelectedUsers(selectedRows);\n\t\t},\n\t\tgetCheckboxProps: (record) => ({\n\t\t\tdisabled: record.name === \"Disabled User\", // Column configuration not to be checked\n\t\t\tname: record.name,\n\t\t}),\n\t\tselectedRowKeys:\n\t\t\tselectedUsers && selectedUsers.map((user) => user.email),\n\t};\n\n\treturn (\n\t\t<Modal\n\t\t\ttitle=\"Bulk Add Users\"\n\t\t\tvisible={visible}\n\t\t\tonOk={onBulkSubmit}\n\t\t\tonCancel={onClose}\n\t\t\twidth={800}\n\t\t\tfooter={[\n\t\t\t\t<Button key=\"cancel\" onClick={onClose}>\n\t\t\t\t\tCancel\n\t\t\t\t</Button>,\n\t\t\t\t<Button\n\t\t\t\t\tkey=\"submit\"\n\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\tdisabled={\n\t\t\t\t\t\t!(selectedUsers && selectedUsers.length > 0) || csvError\n\t\t\t\t\t}\n\t\t\t\t\tonClick={onBulkSubmit}\n\t\t\t\t>\n\t\t\t\t\tSubmit\n\t\t\t\t</Button>,\n\t\t\t]}\n\t\t>\n\t\t\t<p>\n\t\t\t\tYou can use{\" \"}\n\t\t\t\t<a href=\"/files/users-template.csv\" download target=\"_self\">\n\t\t\t\t\tthis template\n\t\t\t\t</a>{\" \"}\n\t\t\t\tto create the csv for bulk adding users.\n\t\t\t</p>\n\t\t\t<p>Select a csv file which contains user details.</p>\n\n\t\t\t<Upload {...props}>\n\t\t\t\t<Button\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tmarginBottom: \"15px\",\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<UploadOutlined /> Click to Upload\n\t\t\t\t</Button>\n\t\t\t</Upload>\n\t\t\t{csvError && (\n\t\t\t\t<p>\n\t\t\t\t\t<Text type=\"danger\">{csvError}</Text>\n\t\t\t\t</p>\n\t\t\t)}\n\t\t\t{usersError &&\n\t\t\t\tusersError.map((e, i) => (\n\t\t\t\t\t<p key={`error-${i}`}>\n\t\t\t\t\t\t<Text type=\"danger\">{e}</Text>\n\t\t\t\t\t</p>\n\t\t\t\t))}\n\t\t\t{userList && (\n\t\t\t\t<Table\n\t\t\t\t\trowSelection={{\n\t\t\t\t\t\ttype: \"checkbox\",\n\t\t\t\t\t\t...rowSelection,\n\t\t\t\t\t}}\n\t\t\t\t\tdataSource={userList}\n\t\t\t\t\tcolumns={bulkUserColumns}\n\t\t\t\t\trowKey={(record) => record.email}\n\t\t\t\t\tfooter={() =>\n\t\t\t\t\t\t`${\n\t\t\t\t\t\t\tselectedUsers ? selectedUsers.length : 0\n\t\t\t\t\t\t} users are selected`\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{progress > 0 && (\n\t\t\t\t<Progress\n\t\t\t\t\tstrokeColor={\n\t\t\t\t\t\tusersError.length > 0\n\t\t\t\t\t\t\t? null\n\t\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\t\tfrom: \"#108ee9\",\n\t\t\t\t\t\t\t\t\tto: \"#87d068\",\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t}\n\t\t\t\t\tpercent={progress}\n\t\t\t\t\tstatus={usersError.length > 0 ? \"exception\" : \"active\"}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</Modal>\n\t);\n}\n\nexport default BulkInviteUsers;\n","import { Table, Input, Button, Space, Badge, Tooltip } from 'antd';\nimport { SearchOutlined, CrownFilled } from '@ant-design/icons';\nimport React from 'react';\n\nclass PlatformUsersTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchText: '',\n      searchedColumn: '',\n      page: 0,\n      pageSize: 10,\n      order: 'desc',\n      sortColumn: 'createTime',\n    };\n  }\n\n  statusMap = {\n    active: 'success',\n    disabled: 'error',\n    pending: 'warning',\n    hibernate: 'error',\n    null: 'success',\n  };\n\n  getColumnSearchProps = (dataIndex, tableKey) => ({\n    filterDropdown: ({\n      setSelectedKeys,\n      selectedKeys,\n      confirm,\n      clearFilters,\n    }) => (\n      <div style={{ padding: 8 }}>\n        <Input\n          ref={(node) => {\n            this.searchInput = node;\n          }}\n          placeholder={`Search ${dataIndex}`}\n          value={selectedKeys[0]}\n          onChange={(e) =>\n            setSelectedKeys(e.target.value ? [e.target.value] : [])\n          }\n          onPressEnter={() =>\n            this.props.handleSearch(selectedKeys, confirm, dataIndex)\n          }\n          style={{ width: 188, marginBottom: 8, display: 'block' }}\n        />\n        <Space>\n          <Button\n            type=\"primary\"\n            onClick={() =>\n              this.props.handleSearch(selectedKeys, confirm, dataIndex)\n            }\n            icon={<SearchOutlined />}\n            size=\"small\"\n            style={{ width: 90 }}\n          >\n            Search\n          </Button>\n          <Button\n            onClick={() => this.props.handleReset(clearFilters, dataIndex)}\n            size=\"small\"\n            style={{ width: 90 }}\n          >\n            Reset\n          </Button>\n        </Space>\n      </div>\n    ),\n    filterIcon: (filtered) => (\n      <SearchOutlined\n        style={{ color: filtered ? '#1890ff' : undefined, top: '60%' }}\n      />\n    ),\n    onFilterDropdownVisibleChange: (visible) => {\n      if (visible) {\n        setTimeout(() => {\n          this.searchInput.select();\n        }, 100);\n      }\n    },\n    render: (text, record) => {\n      if (dataIndex === 'name') {\n        const status =\n          tableKey === 'projectUsers' ? record.projectStatus : record.status;\n        const statusBadge = (\n          <Tooltip placement=\"top\" title={status || 'active'}>\n            <Badge status={this.statusMap[status]} />\n          </Tooltip>\n        );\n        const adminCrown = record.role && record.role === 'admin' && (\n          <CrownFilled style={{ color: 'gold', marginLeft: 5 }} />\n        );\n        return (\n          <>\n            {statusBadge}\n            {text}\n            {adminCrown}\n          </>\n        );\n      } else if (\n        tableKey &&\n        tableKey === 'platformInvitations' &&\n        dataIndex === 'email'\n      ) {\n        return (\n          <>\n            {text}\n            {!record.projectId && record.role && record.role === 'admin' && (\n              <CrownFilled style={{ color: 'gold', marginLeft: 5 }} />\n            )}\n          </>\n        );\n      } else if (\n        tableKey &&\n        tableKey === 'projectInvitations' &&\n        dataIndex === 'email'\n      ) {\n        return (\n          <>\n            {text}\n            {record.projectId && record.role && record.role === 'admin' && (\n              <CrownFilled style={{ color: 'gold', marginLeft: 5 }} />\n            )}\n          </>\n        );\n      } else {\n        return text;\n      }\n    },\n  });\n\n  render() {\n    const {\n      totalItem,\n      page,\n      pageSize,\n      dataSource,\n      width,\n      setClassName,\n      tableKey,\n      style,\n    } = this.props;\n\n    const columns =\n      this.props.columns &&\n      this.props.columns.map((el) => {\n        if (el.searchKey) {\n          return {\n            ...el,\n            ...this.getColumnSearchProps(el.searchKey, tableKey),\n          };\n        }\n        return el;\n      });\n\n    return (\n      <Table\n        columns={columns}\n        dataSource={dataSource}\n        onChange={this.props.onChange}\n        pagination={{\n          current: page + 1,\n          pageSize,\n          total: totalItem,\n          showQuickJumper: true,\n          showSizeChanger: true,\n        }}\n        key={this.props.tableKey}\n        scroll={{ x: true }}\n        // rowKey={(record) => record.name || record.email}\n        width={width}\n        rowClassName={setClassName} //This attribute takes a function to add classes to the row\n        style={style}\n      />\n    );\n  }\n}\n\nexport default PlatformUsersTable;\n","import React, { useState, useEffect } from 'react';\nimport { Menu, Dropdown, Button, message, Badge, Tooltip } from 'antd';\nimport { MoreOutlined } from '@ant-design/icons';\nimport { useSelector } from 'react-redux';\nimport PlatformUsersTable from './PlatformUsersTable';\nimport { getInvitaions, updateInvitation } from '../../APIs';\nimport _ from 'lodash';\nimport moment from 'moment';\nimport { useTranslation } from 'react-i18next';\n\n/**\n * Takes one prop: projectId. If projetId is given, the component will fetch the invitations on this proejct and not deisplay the project name\n *\n * @param {*} props\n * @returns\n */\nfunction InvitationTable(props) {\n  const [invitations, setInvitations] = useState(null);\n  const [filters, setFilters] = useState({\n    page: 0,\n    pageSize: 10,\n    orderBy: 'create_timestamp',\n    orderType: 'desc',\n    filters: {},\n  });\n  const [page, setPage] = useState(0);\n  const [pageSize, setPageSize] = useState(10);\n  const [total, setTotal] = useState(0);\n  const [searchText, setSearchText] = useState([]);\n  const allProjects = useSelector((state) => state.studies.allStudies);\n\n  const { t, i18n } = useTranslation(['message']);\n\n  useEffect(() => {\n    if (props.projectId) {\n      const filtersWithProject = filters;\n      filtersWithProject.filters.projectId = props.projectId;\n      setFilters(filtersWithProject);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchInvitations();\n  }, [filters, props.totalInvitations]);\n\n  const fetchInvitations = () => {\n    filters.filters.projectId = props.projectId;\n    getInvitaions(filters)\n      .then((res) => {\n        const { page, result, total } = res.data;\n        setInvitations(result);\n        setTotal(total);\n        setPage(page);\n      });\n  };\n\n  const onChange = async (pagination, filterParam, sorter) => {\n    let newFilters = Object.assign({}, filters);\n\n    //Pagination\n    setPage(pagination.current - 1);\n    newFilters.page = pagination.current - 1;\n\n    if (pagination.pageSize) {\n      setPageSize(pagination.pageSize);\n      newFilters.pageSize = pagination.pageSize;\n    }\n\n    //Search\n    let searchText = [];\n\n    if (filterParam.email && filterParam.email.length > 0) {\n      searchText.push({\n        key: 'email',\n        value: filterParam.email[0],\n      });\n\n      newFilters.filters['email'] = filterParam.email[0];\n    } else {\n      delete newFilters.filters['email'];\n    }\n\n    if (filterParam.invited_by && filterParam.invited_by.length > 0) {\n      searchText.push({\n        value: filterParam.invited_by[0],\n        key: 'invited_by',\n      });\n\n      newFilters.filters['invited_by'] = filterParam.invited_by[0];\n    } else {\n      delete newFilters.filters['invited_by'];\n    }\n\n    //Sorters\n    if (sorter && sorter.order) {\n      if (sorter.columnKey) {\n        if (sorter.columnKey === 'email') {\n          newFilters.orderBy = 'invitation_detail';\n        } else {\n          newFilters.orderBy = sorter.columnKey;\n        }\n      }\n      newFilters.orderType = sorter.order === 'ascend' ? 'asc' : 'desc';\n    }\n\n    if (sorter && !sorter.order) {\n      newFilters = {\n        ...newFilters,\n        orderBy: 'create_timestamp',\n        orderType: 'desc',\n      }\n    }\n\n    setFilters(newFilters);\n    setSearchText(searchText);\n  };\n\n  const handleSearch = (selectedKeys, confirm, dataIndex) => {\n    confirm();\n  };\n\n  const handleReset = (clearFilters, dataIndex) => {\n    clearFilters();\n    let filters = searchText;\n    filters = filters.filter((el) => el.key !== dataIndex);\n    setSearchText(filters);\n  };\n\n  const invitationColumns = [\n    {\n      title: 'Email',\n      dataIndex: 'email',\n      key: 'email',\n      sorter: true,\n      width: '20%',\n      searchKey: 'email',\n    },\n    {\n      title: 'Status',\n      dataIndex: 'is_active',\n      key: 'status',\n      width: '10%',\n      render: (text, record) => {\n        if (text === false) {\n          return (\n            <div>\n              <Badge status=\"error\" />\n              Cancelled\n            </div>\n          )\n        } \n\n        const isExpired = getExpired(record);\n\n        if (isExpired) {\n          return (\n            <div>\n              <Badge status=\"default\" />\n              Expired\n            </div>\n          )\n        }\n\n        return (\n          <div>\n            <Badge status=\"success\" />\n            Active\n          </div>\n        )\n      }\n    },\n    {\n      title: 'Invited Time',\n      dataIndex: 'create_timestamp',\n      key: 'create_timestamp',\n      sorter: true,\n      width: '15%',\n      render: (text) => text && moment(text*1000).format('YYYY-MM-DD HH:mm:ss'),\n    },\n    {\n      title: 'Expiration Time',\n      dataIndex: 'expiry_timestamp',\n      key: 'expiry_timestamp',\n      sorter: true,\n      width: '15%',\n      render: (text) => text && moment(text*1000).format('YYYY-MM-DD HH:mm:ss'),\n    },\n    {\n      title: 'Project',\n      dataIndex: 'projectId',\n      key: 'project',\n      width: '10%',\n      render: (text) => {\n        const project = allProjects.find(el => el.id === Number(text));\n\n        if (project) {\n          return project.name;\n        }\n\n        return 'No Project Assigned';\n      },\n    },\n    {\n      title: 'Action',\n      key: 'action',\n      width: '5%',\n      render: (text, record) => {\n        const status = record.status;\n\n        const menu = (\n          <Menu>\n            <Menu.Item onClick={() => {\n              const code = record.invitation_code;\n              if (status === 'pending') {\n                updateInvitation(code, 'resend')\n                  .then((res) => {\n                    fetchInvitations();\n                    setPage(0);\n                    setPageSize(10);\n                    message.success(t('message:invitation.patient.re-invite.success'))\n                  })\n                  .catch((err) => {\n                    message.error(t('message:invitation.patient.re-invite.failed'));\n                  })\n              } else {\n                message.warning('Patient already enrolled')\n              }\n              \n            }}>\n              Re-invite\n            </Menu.Item>\n            {\n              status === 'pending' ? (\n                <Menu.Item\n                  onClick={() => {\n                    const code = record.invitation_code;\n                    updateInvitation(code, 'cancel')\n                      .then((res) => {\n                        fetchInvitations();\n                        setPage(0);\n                        setPageSize(10);\n                        message.success(t('message:invitation.patient.cancel.success'))\n                      })\n                      .catch((err) => {\n                        message.error(t('message:invitation.patient.cancel.failed'));\n                      })\n                  }}\n                  style={{ color: 'red' }}\n                >\n                  Revoke Invitation\n              </Menu.Item>\n              ) : undefined\n            }\n          </Menu>\n        );\n        return (\n          <Dropdown overlay={menu} placement=\"bottomRight\">\n            <Button shape=\"circle\">\n              <MoreOutlined />\n            </Button>\n          </Dropdown>\n        );\n      },\n    },\n  ];\n\n  const getExpired = (record) => {\n    const current = moment();\n    const isExpired = moment(\n      record.expiry_timestamp * 1000,\n    ).isBefore(current);\n    return isExpired;\n  };\n\n  return (\n    <PlatformUsersTable\n      columns={invitationColumns}\n      onChange={onChange}\n      handleReset={handleReset}\n      handleSearch={handleSearch}\n      dataSource={invitations}\n      totalItem={total}\n      pageSize={pageSize}\n      page={page}\n      // setClassName={getExpired}\n      {...props}\n    />\n  );\n}\n\nexport default InvitationTable;\n","import React, { useContext, useState, useEffect, useRef } from 'react';\nimport { Table, Input, Button, Popconfirm, Form } from 'antd';\nimport {\n PlusOutlined,\n EditOutlined,\n} from '@ant-design/icons';\nimport { addPlatformGUID, deletePlatformGUID } from '../../APIs';\n\nconst EditableContext = React.createContext(null);\n\nconst EditableRow = ({ index, ...props }) => {\n  const [form] = Form.useForm();\n  return (\n    <Form form={form} component={false}>\n      <EditableContext.Provider value={form}>\n        <tr {...props} />\n      </EditableContext.Provider>\n    </Form>\n  );\n};\n\nconst EditableCell = ({\n  title,\n  editable,\n  children,\n  dataIndex,\n  record,\n  handleSave,\n  ...restProps\n}) => {\n  const [editing, setEditing] = useState(false);\n  const inputRef = useRef(null);\n  const form = useContext(EditableContext);\n  useEffect(() => {\n    if (editing) {\n      inputRef.current.focus();\n    }\n  }, [editing]);\n\n  const toggleEdit = () => {\n    setEditing(!editing);\n    form.setFieldsValue({\n      [dataIndex]: record[dataIndex],\n    });\n  };\n\n  const save = async () => {\n    try {\n      const values = await form.validateFields();\n      toggleEdit();\n      handleSave({ ...record, ...values });\n    } catch (errInfo) {\n      console.log('Save failed:', errInfo);\n    }\n  };\n\n  let childNode = children;\n\n  if (editable) {\n    childNode = editing ? (\n      <Form.Item\n        style={{\n          margin: 0,\n        }}\n        name={dataIndex}\n        rules={[\n          {\n            required: true,\n            message: `${title} is required.`,\n          },\n        ]}\n      >\n        <Input ref={inputRef} onPressEnter={save} onBlur={save} />\n      </Form.Item>\n    ) : (\n      <div\n        className=\"editable-cell-value-wrap\"\n        style={{\n          paddingRight: 24,\n        }}\n        onClick={toggleEdit}\n      >\n        {children}\n      </div>\n    );\n  }\n\n  return <td {...restProps}>{childNode}</td>;\n};\n\nclass PlatformTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.columns = [\n      {\n        title: \"Platform\",\n        dataIndex: \"platform\",\n        key: \"platform\",\n        editable: true,\n      },\n      {\n        title: \"Platform ID\",\n        dataIndex: \"platformId\",\n        key: \"platformId\",\n        editable: true,\n      },\n      {\n        title: 'operation',\n        dataIndex: 'operation',\n        render: (_, record) =>\n          this.state.dataSource.length >= 1 ? (\n            <Popconfirm title=\"Sure to delete?\" onConfirm={() => this.handleDelete(record.key)}>\n              <a>Delete</a>\n            </Popconfirm>\n          ) : null,\n      },\n    ];\n    this.state = {\n      dataSource: [],\n      count: 2,\n      newRecord: {},\n    };\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.dataSource !== this.props.dataSource) this.setState({ dataSource: this.props.dataSource});\n  }\n\n  handleDelete = (key) => {\n    const dataSource = [...this.state.dataSource];\n    const deletedPlatform = dataSource.find(item => item.key === key);\n    deletePlatformGUID(this.props.studyId, this.props.userId, deletedPlatform.platform, deletedPlatform.platformId)\n      .then((res) => {\n        if (res.status === 200) {\n          this.setState({\n            dataSource: dataSource.filter((item) => item.key !== key),\n          });\n        }\n      })\n  };\n\n  handleAdd = () => {\n    const { count, dataSource, newRecord } = this.state;\n    const newData = {\n      key: count,\n      ...newRecord\n    };\n    addPlatformGUID(this.props.studyId, this.props.userId, newData.platform, newData.platformId)\n      .then((res) => {\n        if (res.status === 200) {\n          this.setState({\n            dataSource: [...dataSource, newData],\n            count: count + 1,\n            newRecord: {},\n          });\n        }\n      });\n  };\n\n  handleSave = (row) => {\n    const newData = [...this.state.dataSource];\n    const index = newData.findIndex((item) => row.key === item.key);\n    const item = newData[index];\n    newData.splice(index, 1, { ...item, ...row });\n    this.setState({\n      dataSource: newData,\n    });\n  };\n\n  render() {\n    const { dataSource } = this.state;\n    const components = {\n      body: {\n        row: EditableRow,\n        cell: EditableCell,\n      },\n    };\n    const columns = this.columns.map((col) => {\n      if (!col.editable) {\n        return col;\n      }\n\n      return {\n        ...col,\n        onCell: (record) => ({\n          record,\n          editable: col.editable,\n          dataIndex: col.dataIndex,\n          title: col.title,\n          handleSave: this.handleSave,\n        }),\n      };\n    });\n    const addContent = (\n      <div style={{ maxWidth: '200px' }}>\n        <span>Platform</span>\n        <Input\n          onChange={(e) => {\n            const record = { ...this.state.newRecord };\n            record['platform'] = e.target.value;\n            this.setState({ newRecord: record });\n          }} \n        />\n        <span>Platform ID</span>\n        <Input \n          onChange={(e) => {\n            const record = { ...this.state.newRecord };\n            record['platformId'] = e.target.value;\n            this.setState({ newRecord: record });\n          }} \n        />\n      </div>\n    )\n    return (\n      <div>\n        <Popconfirm\n          title={addContent}\n          okText=\"Yes\"\n          cancelText=\"No\"\n          icon={<EditOutlined />}\n          onConfirm={this.handleAdd}\n        >\n          <Button\n            type=\"dashed\"\n            style={{\n              marginBottom: 16,\n            }}\n            icon={<PlusOutlined/>}\n          >\n            Add a Record\n          </Button>\n        </Popconfirm>\n        <Table\n          components={components}\n          rowClassName={() => \"editable-row\"}\n          bordered\n          dataSource={dataSource}\n          columns={columns}\n        />\n      </div>\n    );\n  }\n}\n\n// ReactDOM.render(<PlatformTable />, mountNode);\n\nexport default PlatformTable;","import React, { useEffect, useState } from 'react';\nimport { Descriptions, Table, Popover } from 'antd';\nimport PlatformTable from './PlatformTable';\nimport { checkUserInfo, checkRedCapSurvey } from '../../APIs';\nimport { useSelector } from 'react-redux';\n\nfunction UserDetails(props) {\n  const { record, location, studyId } = props;\n  const { allStudies } = useSelector(state => state.studies);\n  const [userForeignPlatforms, setUserForeignPlatforms]  = useState([]);\n  const [userProjects, setUserProjects] = useState([]);\n  const [userPlaformGuid, setUserPlatformGuid] = useState(null);\n  const [enrolled, setErolled] = useState(false);\n\n  useEffect(() => {\n    checkUserInfo({ username: record.username })\n      .then((res) => {\n        if (res.status === 200) {\n          const { result } = res.data;\n          setUserPlatformGuid(result.guid);\n          if (result.foreign_guid_platform) {\n            const platforms = [];\n           \n            for (let i = 0; i < result.foreign_guid_platform.length; i++) {\n              platforms.push({\n                platform: result.foreign_guid_platform[i],\n                platformId: result.foreign_guid_guid[i],\n                key: String(i)\n              })\n            }\n            setUserForeignPlatforms(platforms);\n          }\n\n          if (result.container_guid_container) {\n            const projects = [];\n\n            for (let i = 0; i < result.container_guid_container.length; i++) {\n              const project = allStudies.find(el => el.id === Number(result.container_guid_container[i]))\n              projects.push({\n                containerGuid: result.container_guid_guid[i],\n                container: project.name,\n                key: String(i),\n                status: 'Enrolled',\n              })\n            }\n            setUserProjects(projects);\n          }\n        }\n      });\n\n\n      const container_guid_guid = record.container_guid_guid;\n      const container_guid_container = record.container_guid_container;\n      const index = container_guid_container && container_guid_container.indexOf(String(studyId));\n      const recordId = container_guid_guid && container_guid_guid[index];\n  }, [record]);\n\n  const columns = [\n    {\n\t\t\ttitle: \"Container\",\n\t\t\tdataIndex: \"container\",\n\t\t\tkey: \"container\",\n\t\t},\n    {\n\t\t\ttitle: \"Container GUID\",\n\t\t\tdataIndex: \"containerGuid\",\n\t\t\tkey: \"containerGuid\",\n\t\t},\n    {\n\t\t\ttitle: \"Status\",\n\t\t\tdataIndex: \"status\",\n\t\t\tkey: \"status\",\n\t\t},\n  ];\n\n  const columns2 = [\n    {\n\t\t\ttitle: \"Platform\",\n\t\t\tdataIndex: \"platform\",\n\t\t\tkey: \"platform\",\n\t\t},\n    {\n\t\t\ttitle: \"Platform ID\",\n\t\t\tdataIndex: \"platformId\",\n\t\t\tkey: \"platformId\",\n\t\t}\n  ];\n\n  const surveysDetails = (\n    <div>\n      <p>\n        <b>Complete Econsent: {record.isSurveyStarted ? 'Yes': 'No'}</b>\n      </p>\n      {\n        record.isSurveyStarted && record.uncompletedSurveys ? (\n          <div>\n            <h4>Uncomplete surveys:</h4>\n            <ul>\n            {record.uncompletedSurveys.map(el => <li>{el}</li>)}\n            </ul> \n          </div>\n        ) : null\n      }\n    </div>\n  );\n\n  return (\n    <div style={{ paddingBottom: '6px', overflow: 'auto' }}>\n      {\n        !location ? (\n          <Descriptions size=\"small\" column={1}>\n            <Descriptions.Item label={<b>User Name</b>}>{record.username}</Descriptions.Item>\n            <Descriptions.Item label={<b>Status</b>}>{record.enabled ? 'Active': 'Disabled'}</Descriptions.Item>\n            {\n              userPlaformGuid ? (\n                <Descriptions.Item label={<b>Platform GUID</b>}>{userPlaformGuid}</Descriptions.Item>\n              ) : null\n            }\n          </Descriptions>\n        ) : (\n          <Descriptions size=\"small\" column={1}>\n            <Descriptions.Item label={<b>User Name</b>}>{record.username}</Descriptions.Item>\n            <Descriptions.Item label={<b>Container GUID</b>}>7FHSDJK</Descriptions.Item>\n            <Descriptions.Item label={<b>Status</b>}>{record.enabled ? 'Enrolled': 'Disabled'}</Descriptions.Item>\n            <Descriptions.Item label={<b>eConsent Enrolled</b>}>\n              {record.isSurveyComplete ? 'Yes': 'No'}\n              <a style={{ marginLeft: 10 }}>\n                <Popover title=\"Surveys Detail\" content={surveysDetails}>\n                View Detail\n                </Popover>\n              </a>\n            </Descriptions.Item>\n          </Descriptions>\n        )\n      }\n\n      {\n        !location ? (\n          <Table\n            style={{ marginTop: 20 }}\n            columns={columns}\n            dataSource={userProjects} \n          />\n        ) : (\n          <PlatformTable \n            columns={columns2}\n            dataSource={userForeignPlatforms} \n            studyId={props.studyId}\n            userId={record.id}\n          />\n        )\n      }\n      \n    </div>\n  );\n}\n\nexport default UserDetails;\n","import React, { useEffect, useState } from \"react\";\nimport { Table, Space, Modal, message, Divider } from \"antd\";\nimport { ExclamationCircleOutlined } from \"@ant-design/icons\";\nimport { authorizeFitbit, pullFitbitData } from \"../../APIs\";\nimport { useSelector } from \"react-redux\";\nimport { parse_query_string } from \"../../Utility\";\n\nfunction ExternalIdentityManagement(props) {\n\tconst { record, studyId } = props;\n\n\tconst studies = useSelector(\n\t\t(state) => state.studies && state.studies.allStudies,\n\t);\n\n\tconst currentStudy = studies.find((el) => el.id === Number(studyId));\n\n\tconst handleAuthorize = async () => {\n\t\tconst response = await authorizeFitbit(record.name);\n\t\tlet authorizeUrl = null;\n\n\t\tif (response.status === 200) {\n\t\t\tauthorizeUrl = response.data.result.authorizationUrl;\n\t\t} else {\n\t\t\tmessage.error(\n\t\t\t\t\"Network error when trying to authorize user in fitbit.\",\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tconst queryString = authorizeUrl.split(\"?\")[1];\n\t\tconst baseUrl = authorizeUrl.split(\"?\")[0];\n\t\tconst params = parse_query_string(queryString);\n\n\t\tif (params.redirect_uri) delete params.redirect_uri;\n\n\t\tlet fitbitData = localStorage.getItem(\"fitbitData\") || [];\n\n\t\tif (fitbitData.length) fitbitData = JSON.parse(fitbitData);\n\n\t\tconst userFitbitData = fitbitData.find(\n\t\t\t(el) => el.state === params.state,\n\t\t);\n\n\t\tif (!userFitbitData) {\n\t\t\tfitbitData.push({\n\t\t\t\tid: currentStudy.id,\n\t\t\t\tstate: params.state,\n\t\t\t\tname: record.name,\n\t\t\t\tuserId: record.id,\n\t\t\t});\n\t\t}\n\n\t\tlocalStorage.setItem(\"fitbitData\", JSON.stringify(fitbitData));\n\t\tlet newQueryString = \"\";\n\t\tfor (let key in params) {\n\t\t\tif (newQueryString.length) {\n\t\t\t\tnewQueryString = newQueryString + \"&\" + `${key}=${params[key]}`;\n\t\t\t} else {\n\t\t\t\tnewQueryString = newQueryString + `${key}=${params[key]}`;\n\t\t\t}\n\t\t}\n\t\tconst newAuthUrl = `${baseUrl}?${newQueryString}`;\n\t\twindow.open(newAuthUrl);\n\t};\n\n\tfunction confirm(platform) {\n\t\tModal.confirm({\n\t\t\ttitle: \"Confirm\",\n\t\t\ticon: <ExclamationCircleOutlined />,\n\t\t\tcontent: `You are authrizing user ${record.name} on platform ${platform}, the page will redirect to third party page for authorization for a while`,\n\t\t\tonOk: handleAuthorize,\n\t\t});\n\t}\n\n\tconst pullData = async () => {\n\t\tconst stepCountRes = await pullFitbitData(\"step_count\", record.name);\n\t\tconst sleepDurationRes = await pullFitbitData(\n\t\t\t\"sleep_duration\",\n\t\t\trecord.name,\n\t\t);\n\t\tconst physicalActivityRes = await pullFitbitData(\n\t\t\t\"physical_activity\",\n\t\t\trecord.name,\n\t\t);\n\n\t\tmessage.success(\n\t\t\t`Successfully pull patient ${record.name} data from fitbit`,\n\t\t);\n\t};\n\n\tconst columns = [\n\t\t{\n\t\t\ttitle: \"Platform\",\n\t\t\tdataIndex: \"platform\",\n\t\t\tkey: \"platform\",\n\t\t},\n\t\t{\n\t\t\ttitle: \"Platform ID\",\n\t\t\tdataIndex: \"platformId\",\n\t\t\tkey: \"platformId\",\n\t\t\trender: (text, item) => {\n\t\t\t\tif (record.fitbit_status === \"authorized\") {\n\t\t\t\t\treturn \"Account connected\";\n\t\t\t\t} else {\n\t\t\t\t\treturn <span style={{ color: \"red\" }}>{text}</span>;\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\ttitle: \"Actions\",\n\t\t\tkey: \"action\",\n\t\t\trender: (text, item) => {\n\t\t\t\tif (record.fitbit_status === \"authorized\") {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Space size=\"small\">\n\t\t\t\t\t\t\t<a onClick={() => console.log(\"Unauthorize\")}>\n\t\t\t\t\t\t\t\tUnauthorize\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<Divider type=\"vertical\" />\n\t\t\t\t\t\t\t<a onClick={() => pullData()}>Pull Data</a>\n\t\t\t\t\t\t</Space>\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Space size=\"middle\">\n\t\t\t\t\t\t\t<a onClick={() => confirm(item.platform)}>\n\t\t\t\t\t\t\t\tAuthorize\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</Space>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t];\n\n\tconst thirdParty = currentStudy?.thirdParty;\n\n\tconst dataSource = [];\n\n\tif (thirdParty) {\n\t\tfor (const item of thirdParty) {\n\t\t\tdataSource.push({\n\t\t\t\tplatform: item,\n\t\t\t\tplatformId: \"No account connected\",\n\t\t\t\tkey: item,\n\t\t\t});\n\t\t}\n\t}\n\n\treturn (\n\t\t<div style={{ paddingBottom: \"6px\", overflow: \"auto\" }}>\n\t\t\t<Table columns={columns} dataSource={dataSource} />\n\t\t</div>\n\t);\n}\n\nexport default ExternalIdentityManagement;\n","import React, { useEffect, useState } from 'react';\nimport {\n  CloseOutlined,\n  FullscreenOutlined,\n  PauseOutlined,\n} from '@ant-design/icons';\nimport { Button, Collapse, Typography, Modal, Form, Input } from 'antd';\nimport UserDetails from './UserDetails';\nimport ExternalIdentityManagement from './ExternalIdentity';\n\nconst { Panel } = Collapse;\nconst { Title } = Typography;\n\nconst layout = {\n  labelCol: {\n    span: 8,\n  },\n  wrapperCol: {\n    span: 16,\n  },\n};\n\nfunction ScalableDetails(props) {\n  const { close, width, record } = props;\n  const [projectList, setProjectList] = useState([]);\n  const [modalTitle, setModalTitle] = useState(null);\n  const [visible, setVisible] = useState(false);\n  useEffect(() => {\n    setProjectList([]);\n  }, [record.name]);\n\n  function onCancel() {\n    setVisible(false);\n  }\n  \n  return (\n    <div\n      style={{\n        width: width,\n        position: 'relative',\n        minWidth: '180px',\n        maxWidth: '700px',\n        marginLeft: '10px'\n      }}\n    >\n      <Button\n        onMouseDown={props.mouseDown}\n        type=\"link\"\n        style={{\n          position: 'absolute',\n          top: '50%',\n          left: `-31px`,\n          transform: 'translateY(-50%)',\n          transition: 'none',\n          cursor: 'ew-resize',\n        }}\n      >\n        <PauseOutlined />\n      </Button>\n      <div style={{ position: 'relative' }}>\n        <CloseOutlined\n          onClick={close}\n          style={{\n            zIndex: '99',\n            float: 'right',\n            marginTop: '11px',\n            marginRight: '15px',\n            fontSize: '18px'\n          }}\n        />\n        <Title level={4} style={{ lineHeight: '1.9' }}>\n          Patient Information\n        </Title>\n      </div>\n      <Collapse defaultActiveKey={['1']}>\n        <Panel\n          header=\"Container Membership\"\n          key=\"1\"\n        >\n          <UserDetails record={record} location={props.location} studyId={props.studyId} />\n        </Panel>\n        <Panel\n          header=\"External Identity Management\"\n          key=\"2\"\n        >\n          <ExternalIdentityManagement record={record} studyId={props.studyId} />\n        </Panel>\n      </Collapse>\n      <Modal\n        visible={visible}\n        onCancel={onCancel}\n        title={modalTitle}\n        width={400}\n        footer={[\n          <Button key=\"back\" onClick={onCancel}>\n            OK\n          </Button>,\n        ]}\n      >\n        <Form\n          {...layout}\n          name=\"basic\"\n        >\n          <Form.Item\n            label=\"Platform\"\n            name=\"platform\"\n            rules={[\n              {\n                required: true,\n                message: 'Please input platform name!',\n              },\n            ]}\n          >\n            <Input />\n          </Form.Item>\n\n          <Form.Item\n            label=\"Platform ID\"\n            name=\"platformId\"\n            rules={[\n              {\n                required: true,\n                message: 'Please input platform ID!',\n              },\n            ]}\n          >\n            <Input />\n          </Form.Item>\n        </Form>\n      </Modal>\n    </div>\n  );\n}\n\nexport default ScalableDetails;\n","import React, { useState, useEffect, useRef } from \"react\";\nimport {\n\tTypography,\n\tTable,\n\tSpin,\n\tCard,\n\tButton,\n\tSpace,\n\tDropdown,\n\tMenu,\n\tModal,\n\tmessage,\n\tBadge,\n\tTabs,\n} from \"antd\";\nimport {\n\tMoreOutlined,\n\tUserOutlined,\n\tExclamationCircleOutlined,\n} from \"@ant-design/icons\";\nimport { StandardLayout } from \"../../Components/Layout\";\nimport { useCookies } from \"react-cookie\";\nimport moment from \"moment\";\nimport csv from \"papaparse\";\nimport PopConfirmDropdown from \"./PopConfirmDropdown\";\n\nimport InviteUser from \"./InviteUser\";\nimport styles from \"./index.module.scss\";\nimport BulkInviteUsers from \"./BulkInviteUsers\";\nimport { getUsers, suspendUsers, activateUsers, getInvitaion, getInvitaions, } from \"../../APIs\";\nimport { useTranslation } from 'react-i18next';\nimport InvitationTable from \"../../Components/Table/InvitationTable\";\nimport ScalableDetails from \"../../Components/ScalableDetail/ScalableDetails\";\n\nconst { Title, Text } = Typography;\nconst { confirm } = Modal;\nconst { TabPane } = Tabs;\n\nfunction AdminUsers() {\n\tconst [cookies] = useCookies([\"user\"]);\n\tconst [loading, setLoading] = useState(false);\n\tconst [bulkEdit, setBulkEdit] = useState(false);\n\tconst [bulkModal, setBulkModal] = useState(false);\n\tconst [inviteUser, setInviteUser] = useState(false);\n\tconst [users, setUsers] = useState(null);\n\tconst [selectedUsers, setSelectedUsers] = useState(null);\n\tconst [selectedRowKeys, setSelectedRowKeys] = useState([]);\n\tconst [researchers, setResearchers] = useState([]);\n\tconst [patients, setPatients] = useState([]);\n\n\tconst [sidePanel, setSidePanel] = useState(false);\n\tconst [currentRecord, setCurrentRecord] = useState(null);\n\tconst [panelWidth, setPanelWidth] = useState(350);\n\tconst [tableWidth, setTableWidth] = useState('70%');\n\n\tconst myRef = useRef(null);\n\n\tconst { t, i18n } = useTranslation(['message']);\n\n\tuseEffect(() => {\n\t\tfetchUsers();\n\t}, []);\n\n\tfunction fetchUsers() {\n\t\tgetUsers()\n\t\t\t.then((res) => {\n\t\t\t\tsetLoading(false);\n\t\t\t\tconst users = res.data.result;\n\n\t\t\t\tconst researchers = users.filter((user) => !user.role.includes('patient') && !user.role.includes('container-requester'));\n\n\t\t\t\tconst patients = users.filter((user) => user.role.includes('patient'));\n\n\t\t\t\tsetUsers(res.data.result);\n\t\t\t\tsetPatients(patients);\n\t\t\t\tsetResearchers(researchers);\n\t\t\t})\n\t\t\t.catch((res) => {\n\t\t\t\tsetLoading(false);\n\t\t\t\tconsole.log(res);\n\t\t\t});\n\t}\n\n\tasync function activateUser(users) {\n\t\tsetLoading(true);\n\t\tconst result = await activateUsers(users);\n\t\tif (result.status === 200) {\n\t\t\tmessage.success(`${t('message:users.activate.success')} ${users[0]}`);\n\t\t\tfetchUsers();\n\t\t} else {\n\t\t\tsetLoading(false);\n\t\t\tconsole.error(\"failed activating user, \", result);\n\t\t}\n\t}\n\n\tasync function bulkActivateUser() {\n\t\tsetLoading(true);\n\t\tconsole.log(\"bulk activate\", selectedRowKeys, selectedUsers);\n\t\tconst result = await activateUsers(selectedRowKeys);\n\t\tif (result.status === 200) {\n\t\t\tmessage.success(`${selectedRowKeys.length} users activated`);\n\t\t\tfetchUsers();\n\t\t} else {\n\t\t\tsetLoading(false);\n\t\t\tconsole.error(\"failed activating users, \", result);\n\t\t}\n\t}\n\n\tconst columns = [\n\t\t{\n\t\t\ttitle: \"Username\",\n\t\t\tdataIndex: \"username\",\n\t\t\tkey: \"username\",\n\t\t},\n\n\t\t{\n\t\t\ttitle: \"Status\",\n\t\t\tdataIndex: \"enabled\",\n\t\t\tkey: \"enabled\",\n\t\t\trender: (text) => {\n\t\t\t\treturn text ? (\n\t\t\t\t\t<Badge status=\"success\" text=\"Active\" />\n\t\t\t\t) : (\n\t\t\t\t\t<Badge status=\"error\" text=\"Disabled\" />\n\t\t\t\t);\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\ttitle: \"Created at\",\n\t\t\tdataIndex: \"createdTimestamp\",\n\t\t\tkey: \"createdTimestamp\",\n\t\t\tsorter: (a, b) => a.createdTimestamp - b.createdTimestamp,\n\t\t\trender: (text) => {\n\t\t\t\treturn moment(text).format('YYYY-MM-DD HH:mm:ss');\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\ttitle: \"Email\",\n\t\t\tdataIndex: \"email\",\n\t\t\tkey: \"email\",\n\t\t},\n\t\t{\n\t\t\ttitle: \"First Name\",\n\t\t\tdataIndex: \"firstname\",\n\t\t\tkey: \"firstName\",\n\t\t},\n\t\t{\n\t\t\ttitle: \"Last Name\",\n\t\t\tdataIndex: \"lastname\",\n\t\t\tkey: \"lastName\",\n\t\t},\n\t\t{\n\t\t\ttitle: \"Actions\",\n\t\t\tkey: \"action\",\n\t\t\trender: (text, record) => {\n\t\t\t\tconst menu = (user) => (\n\t\t\t\t\t<Menu id=\"teams_role_dropdown\">\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trecord.role && record.role.includes(\"patient\") && (\n\t\t\t\t\t\t\t\t<Menu.Item\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tsetSidePanel(true);\n\t\t\t\t\t\t\t\t\t\tsetCurrentRecord(record);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tView\n\t\t\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcookies.username !== record.username && !record.enabled && (\n\t\t\t\t\t\t\t\t<Menu.Item\n\t\t\t\t\t\t\t\t\tonClick={() => activateUser([record.username])}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tActivate\n\t\t\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcookies.username !== record.username && record.enabled && (\n\t\t\t\t\t\t\t\t<Menu.Item\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tsuspendUsers([record.username])\n\t\t\t\t\t\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\t\t\t\t\t\tmessage.success(`The user ${record.username} is suspended`);\n\t\t\t\t\t\t\t\t\t\t\tfetchUsers();\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t.then((error) => console.log(error));\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tstyle={{ color: 'red' }}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tSuspend\n\t\t\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t</Menu>\n\t\t\t\t);\n\n\t\t\t\treturn (\n\t\t\t\t\t<Dropdown overlay={menu(record)} placement=\"bottomRight\">\n\t\t\t\t\t  <Button shape=\"circle\">\n\t\t\t\t\t\t<MoreOutlined />\n\t\t\t\t\t  </Button>\n\t\t\t\t\t</Dropdown>\n\t\t\t\t)\n\t\t\t\t// return (\n\t\t\t\t// \t<Space size=\"middle\">\n\t\t\t\t// \t\t{\n\t\t\t\t// \t\t\trecord.role && record.role.includes(\"patient\")\t&& (<Button\n\t\t\t\t// \t\t\t\ttype=\"link\"\n\t\t\t\t// \t\t\t\tonClick={() => {\n\t\t\t\t// \t\t\t\t\tsetSidePanel(true);\n\t\t\t\t// \t\t\t\t\tsetCurrentRecord(record);\n\t\t\t\t// \t\t\t\t}}\n\t\t\t\t// \t\t\t\tstyle={{ paddingLeft: 0 }}\n\t\t\t\t// \t\t\t>\n\t\t\t\t// \t\t\t\tView\n\t\t\t\t// \t\t\t</Button>)\n\t\t\t\t// \t\t}\n\t\t\t\t// \t\t{cookies.username !== record.username && !record.enabled && (\n\t\t\t\t// \t\t\t<Button\n\t\t\t\t// \t\t\t\ttype=\"link\"\n\t\t\t\t// \t\t\t\tonClick={() => activateUser([record.username])}\n\t\t\t\t// \t\t\t\tstyle={{ paddingLeft: 0 }}\n\t\t\t\t// \t\t\t>\n\t\t\t\t// \t\t\t\tActivate\n\t\t\t\t// \t\t\t</Button>\n\t\t\t\t// \t\t)}\n\t\t\t\t// \t\t{cookies.username !== record.username && (\n\t\t\t\t// \t\t\t<PopConfirmDropdown\n\t\t\t\t// \t\t\t\trecord={record}\n\t\t\t\t// \t\t\t\tfetchUsers={fetchUsers}\n\t\t\t\t// \t\t\t/>\n\t\t\t\t// \t\t)}\n\t\t\t\t// \t</Space>\n\t\t\t\t// )\n\t\t\t},\n\t\t},\n\t];\n\n\tconst menu = (\n\t\t<Menu>\n\t\t\t<Menu.Item\n\t\t\t\tkey=\"1\"\n\t\t\t\ticon={<UserOutlined />}\n\t\t\t\tonClick={() => setInviteUser(true)}\n\t\t\t>\n\t\t\t\tAdd One User\n\t\t\t</Menu.Item>\n\t\t\t<Menu.Item key=\"2\" icon={<UserOutlined />} onClick={openBulkModal}>\n\t\t\t\tBulk Add Users\n\t\t\t</Menu.Item>\n\t\t</Menu>\n\t);\n\n\tconst bulkMenu = (\n\t\t<Menu>\n\t\t\t<Menu.Item\n\t\t\t\tkey=\"1\"\n\t\t\t\tonClick={() =>\n\t\t\t\t\tshowConfirm(\n\t\t\t\t\t\tbulkActivateUser,\n\t\t\t\t\t\t\"Activate selected users?\",\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<Text type=\"link\">Activate</Text>\n\t\t\t</Menu.Item>\n\t\t\t<Menu.Item\n\t\t\t\tkey=\"2\"\n\t\t\t\tonClick={() =>\n\t\t\t\t\tshowConfirm(\n\t\t\t\t\t\tbulkSuspend,\n\t\t\t\t\t\t\"Suspend selected users?\",\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<Text type=\"danger\">Suspend</Text>\n\t\t\t</Menu.Item>\n\t\t</Menu>\n\t);\n\n\tfunction showConfirm(onOk, title) {\n\t\tconfirm({\n\t\t\ttitle: title,\n\t\t\ticon: <ExclamationCircleOutlined />,\n\t\t\tcontent: (\n\t\t\t\t<ul>\n\t\t\t\t\t{selectedUsers.map((user) => {\n\t\t\t\t\t\treturn <li key={user.id}>{user.username}</li>;\n\t\t\t\t\t})}\n\t\t\t\t</ul>\n\t\t\t),\n\t\t\tonOk() {\n\t\t\t\tonOk();\n\t\t\t},\n\t\t\tonCancel() {\n\t\t\t\tconsole.log(\"Cancel\");\n\t\t\t},\n\t\t});\n\t}\n\n\tfunction bulkSuspend() {\n\t\tsetLoading(true);\n\t\tconsole.log(\"bulk suspend\", selectedRowKeys, selectedUsers);\n\t\tsuspendUsers(selectedRowKeys)\n\t\t\t.then((res) => {\n\t\t\t\tsetLoading(false);\n\t\t\t\tmessage.success(`${selectedRowKeys.length} users suspend`);\n\t\t\t\tfetchUsers();\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tsetLoading(false);\n\t\t\t\tconsole.log(err);\n\t\t\t});\n\t}\n\n\tfunction openBulkModal() {\n\t\tsetBulkModal(true);\n\t}\n\tfunction closeBulkModal() {\n\t\tsetBulkModal(false);\n\t}\n\n\tfunction onInviteUserCancel() {\n\t\tsetInviteUser(false);\n\t}\n\n\tfunction downloadCSV() {\n\t\tvar result = csv.unparse({\n\t\t\tfields: [\n\t\t\t\t\"id\",\n\t\t\t\t\"username\",\n\t\t\t\t\"email\",\n\t\t\t\t\"firstName\",\n\t\t\t\t\"lastName\",\n\t\t\t\t\"createdTimestamp\",\n\t\t\t\t\"role\",\n\t\t\t],\n\t\t\tdata: users,\n\t\t});\n\t\tconsole.log(\"downloadCSV -> result\", result);\n\n\t\tconst currentTime = moment().format();\n\t\tconst exportedFilename = `canarie-users-${currentTime}.csv`;\n\t\tconst blob = new Blob([result], { type: \"text/csv;charset=utf-8;\" });\n\t\tif (navigator.msSaveBlob) {\n\t\t\t// IE 10+\n\t\t\tnavigator.msSaveBlob(blob, exportedFilename);\n\t\t} else {\n\t\t\tconst link = document.createElement(\"a\");\n\t\t\tif (link.download !== undefined) {\n\t\t\t\t// feature detection\n\t\t\t\t// Browsers that support HTML5 download attribute\n\t\t\t\tconst url = URL.createObjectURL(blob);\n\t\t\t\tlink.setAttribute(\"href\", url);\n\t\t\t\tlink.setAttribute(\"download\", exportedFilename);\n\t\t\t\tlink.style.visibility = \"hidden\";\n\t\t\t\tdocument.body.appendChild(link);\n\t\t\t\tlink.click();\n\t\t\t\tdocument.body.removeChild(link);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction onSelectChange(selectedRowKeys, selectedRows) {\n\t\tconsole.log(\"selectedRowKeys changed: \", selectedRowKeys);\n\t\tsetSelectedRowKeys(selectedRowKeys);\n\t\tsetSelectedUsers(selectedRows);\n\t}\n\n\tconst rowSelection = {\n\t\tselectedRowKeys,\n\t\tonChange: onSelectChange,\n\t\tgetCheckboxProps: (record) => {\n\t\t\treturn {\n\t\t\t\tdisabled: record.username === cookies.username, // Column configuration not to be checked\n\t\t\t};\n\t\t},\n\t};\n\n\tfunction onBulkEdit() {\n\t\tsetBulkEdit(!bulkEdit);\n\t}\n\n\tfunction callback(key) {\n\t\tconsole.log(key);\n\t}\n\n\tconst toggleSidePanel = () => {\n\t\tsetSidePanel(!sidePanel);\n\t};\n\n\tconst mouseMove = (e) => {\n\t\tconst mouseX = e.clientX;\n\t\tconst parentX = myRef.current.getClientRects()[0].x;\n\t\tconst parentWidth = myRef.current.getClientRects()[0].width;\n\t\tconst delta = mouseX - parentX; //delta is the current table width\n\t\tconst maxPanelwidth = 600;\n\t\tconst panelWidth =\n\t\t  parentWidth - delta > maxPanelwidth ? maxPanelwidth : parentWidth - delta;\n\t\tconst tableWidth = parentWidth - panelWidth;\n\t\n\t\tsetTableWidth(tableWidth);\n\t\tsetPanelWidth(panelWidth);\n\t  };\n\t\n\tconst stopMove = () => {\n\t\tdocument.removeEventListener('mousemove', mouseMove, true);\n\t\tdocument.removeEventListener('mouseup', stopMove, true);\n\t};\n\n\tconst mouseDown = (e) => {\n\t\tdocument.addEventListener('mousemove', mouseMove, true);\n\t\tdocument.addEventListener('mouseup', stopMove, true);\n\t};\n\n\treturn (\n\t\t<StandardLayout>\n\t\t\t<div className={styles.wrapper}>\n\t\t\t\t<Title level={2} className={\"mt-3\"}>\n\t\t\t\t\tManage Users\n\t\t\t\t</Title>\n\t\t\t\t<Spin spinning={loading}>\n\t\t\t\t\t<Card style={{ boxShadow: \"0px 1px 9px #00000020\" }}>\n\t\t\t\t\t\t<Tabs defaultActiveKey=\"1\" onChange={callback}>\n\t\t\t\t\t\t\t<TabPane tab=\"Researchers\" key=\"1\">\n\t\t\t\t\t\t\t\t{/* <div className={styles.toolbar}>\n\t\t\t\t\t\t\t\t\t<Space>\n\t\t\t\t\t\t\t\t\t\t<Button onClick={downloadCSV}>\n\t\t\t\t\t\t\t\t\t\t\tDownload CSV\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t<Dropdown overlay={menu}>\n\t\t\t\t\t\t\t\t\t\t\t<Button>\n\t\t\t\t\t\t\t\t\t\t\t\tAdd <DownOutlined />\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t</Dropdown>\n\t\t\t\t\t\t\t\t\t\t{selectedRowKeys.length > 0 &&\n\t\t\t\t\t\t\t\t\t\t\tselectedRowKeys.length +\n\t\t\t\t\t\t\t\t\t\t\t\t\" users selected\"}\n\t\t\t\t\t\t\t\t\t</Space>\n\t\t\t\t\t\t\t\t\t<Space>\n\t\t\t\t\t\t\t\t\t\t{bulkEdit && (\n\t\t\t\t\t\t\t\t\t\t\t<Dropdown\n\t\t\t\t\t\t\t\t\t\t\t\toverlay={bulkMenu}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t\t\t!(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedRowKeys.length >\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\tBulk Actions{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<DownOutlined />\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t</Dropdown>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tonClick={onBulkEdit}\n\t\t\t\t\t\t\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\tghost\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{bulkEdit ? \"Cancel\" : \"Bulk Edit\"}\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</Space>\n\t\t\t\t\t\t\t\t</div> */}\n\t\t\t\t\t\t\t\t<Table\n\t\t\t\t\t\t\t\t\tdataSource={researchers}\n\t\t\t\t\t\t\t\t\tcolumns={columns}\n\t\t\t\t\t\t\t\t\trowKey={(record) => record.username}\n\t\t\t\t\t\t\t\t\trowSelection={\n\t\t\t\t\t\t\t\t\t\tbulkEdit ? rowSelection : false\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</TabPane>\n\t\t\t\t\t\t\t<TabPane tab=\"Patients\" key=\"2\">\n\t\t\t\t\t\t\t\t<Tabs>\n\t\t\t\t\t\t\t\t\t<TabPane tab=\"Enrolled\" key=\"enrolled\">\n\t\t\t\t\t\t\t\t\t\t<div ref={myRef} style={{ display: sidePanel ? 'flex' : '' }}>\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\tborderRight:\n\t\t\t\t\t\t\t\t\t\t\t\t\t  sidePanel && '1px solid rgb(240, 240, 240)',\n\t\t\t\t\t\t\t\t\t\t\t\t\tmarginRight: sidePanel && '16px',\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth: sidePanel && tableWidth,\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Table\n\t\t\t\t\t\t\t\t\t\t\t\t\tdataSource={patients}\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolumns={columns}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{sidePanel && (\n\t\t\t\t\t\t\t\t\t\t\t\t<ScalableDetails\n\t\t\t\t\t\t\t\t\t\t\t\t\tclose={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttoggleSidePanel();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetCurrentRecord(null);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth={panelWidth}\n\t\t\t\t\t\t\t\t\t\t\t\t\trecord={currentRecord}\n\t\t\t\t\t\t\t\t\t\t\t\t\tmouseDown={mouseDown}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t</TabPane>\n\t\t\t\t\t\t\t\t\t<TabPane tab=\"Invited\" key=\"invited\">\n\t\t\t\t\t\t\t\t\t\t<InvitationTable \n\t\t\t\t\t\t\t\t\t\t/>\t\n\t\t\t\t\t\t\t\t\t</TabPane>\n\t\t\t\t\t\t\t\t</Tabs>\n\t\t\t\t\t\t\t</TabPane>\n\t\t\t\t\t\t</Tabs>\n\t\t\t\t\t</Card>\n\t\t\t\t</Spin>\n\t\t\t\t<BulkInviteUsers\n\t\t\t\t\tcloseBulkModal={closeBulkModal}\n\t\t\t\t\tvisible={bulkModal}\n\t\t\t\t/>\n\t\t\t\t<InviteUser\n\t\t\t\t\tinviteUser={inviteUser}\n\t\t\t\t\tonInviteUserCancel={onInviteUserCancel}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</StandardLayout>\n\t);\n}\nexport default AdminUsers;\n","import React from \"react\";\nimport { Modal, Typography } from \"antd\";\n\nconst { Title } = Typography;\n\nfunction TermsOfUseModal(props) {\n\treturn (\n\t\t<Modal\n\t\t\ttitle=\"Platform Terms of Use Agreement\"\n\t\t\tvisible={props.visible}\n\t\t\tonOk={props.handleCancel}\n\t\t\tonCancel={props.handleCancel}\n\t\t\twidth={\"70%\"}\n\t\t\tfooter={props.footer}\n\t\t\tmaskClosable={false}\n\t\t\tzIndex=\"1020\"\n\t\t>\n\t\t\t<div style={{ overflowY: \"scroll\", height: \"60vh\" }}>\n\t\t\t\t<h1>Terms of use</h1>\n\t\t\t\t<p>\n\t\t\t\t\tLorem ipsum dolor sit amet, consectetur adipiscing elit. Ut\n\t\t\t\t\ttincidunt lacus enim, a feugiat massa congue ut. Ut aliquet\n\t\t\t\t\tet tellus sed tristique. Nullam gravida orci ut leo\n\t\t\t\t\tvenenatis finibus. Donec vel elit eget elit molestie\n\t\t\t\t\tsollicitudin. Suspendisse faucibus iaculis eros vitae\n\t\t\t\t\tinterdum. Nunc malesuada vehicula felis, eu finibus magna\n\t\t\t\t\tmalesuada vel. Vestibulum ante ipsum primis in faucibus orci\n\t\t\t\t\tluctus et ultrices posuere cubilia curae; Donec scelerisque\n\t\t\t\t\tante eu lacus facilisis hendrerit. Maecenas dapibus leo\n\t\t\t\t\tturpis, nec ultrices est malesuada quis. Cras placerat nisi\n\t\t\t\t\tnec ornare lobortis. Mauris convallis neque sed auctor\n\t\t\t\t\trhoncus. Fusce malesuada vel turpis quis commodo. Duis eget\n\t\t\t\t\tlectus in lorem mollis rutrum. Mauris eu malesuada est, a\n\t\t\t\t\tmattis augue. Ut eu felis ultrices, porttitor quam sit amet,\n\t\t\t\t\ttempus tortor.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\tDonec laoreet nulla eu volutpat ullamcorper. Phasellus\n\t\t\t\t\tlacinia eget quam vitae euismod. Aliquam a sapien erat. Sed\n\t\t\t\t\tid turpis magna. Fusce at lectus eget lacus pellentesque\n\t\t\t\t\tvulputate. Aenean at efficitur lacus, eget ultrices orci.\n\t\t\t\t\tPraesent id sagittis nisi. Interdum et malesuada fames ac\n\t\t\t\t\tante ipsum primis in faucibus. Etiam lobortis vel dui vel\n\t\t\t\t\tgravida. Nulla ut arcu et tellus faucibus rhoncus. Curabitur\n\t\t\t\t\ttempor enim quis augue pretium semper. Nam nisi lacus,\n\t\t\t\t\tpretium vitae dictum non, fringilla sit amet lacus. Nullam\n\t\t\t\t\ttristique turpis quis elit tempor, id gravida ligula varius.\n\t\t\t\t\tMauris id enim at magna imperdiet posuere tempor vel arcu.\n\t\t\t\t\tAliquam erat volutpat. Nunc ullamcorper id mauris quis\n\t\t\t\t\tmollis. Curabitur vulputate fermentum lorem a egestas.\n\t\t\t\t\tPraesent id mauris quis turpis vulputate auctor eu lacinia\n\t\t\t\t\tmauris. Mauris quis volutpat nulla. Etiam pretium arcu in\n\t\t\t\t\tinterdum interdum. Nulla hendrerit, leo et tempor venenatis,\n\t\t\t\t\ttellus risus rhoncus nunc, laoreet faucibus eros elit quis\n\t\t\t\t\tmi. Quisque tincidunt mi erat, sed ornare mi consequat quis.\n\t\t\t\t\tMauris lacus lacus, sollicitudin nec laoreet id, euismod\n\t\t\t\t\tquis purus.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\tDonec laoreet nulla eu volutpat ullamcorper. Phasellus\n\t\t\t\t\tlacinia eget quam vitae euismod. Aliquam a sapien erat. Sed\n\t\t\t\t\tid turpis magna. Fusce at lectus eget lacus pellentesque\n\t\t\t\t\tvulputate. Aenean at efficitur lacus, eget ultrices orci.\n\t\t\t\t\tPraesent id sagittis nisi. Interdum et malesuada fames ac\n\t\t\t\t\tante ipsum primis in faucibus. Etiam lobortis vel dui vel\n\t\t\t\t\tgravida. Nulla ut arcu et tellus faucibus rhoncus. Curabitur\n\t\t\t\t\ttempor enim quis augue pretium semper. Nam nisi lacus,\n\t\t\t\t\tpretium vitae dictum non, fringilla sit amet lacus. Nullam\n\t\t\t\t\ttristique turpis quis elit tempor, id gravida ligula varius.\n\t\t\t\t\tMauris id enim at magna imperdiet posuere tempor vel arcu.\n\t\t\t\t\tAliquam erat volutpat. Nunc ullamcorper id mauris quis\n\t\t\t\t\tmollis. Curabitur vulputate fermentum lorem a egestas.\n\t\t\t\t\tPraesent id mauris quis turpis vulputate auctor eu lacinia\n\t\t\t\t\tmauris. Mauris quis volutpat nulla. Etiam pretium arcu in\n\t\t\t\t\tinterdum interdum. Nulla hendrerit, leo et tempor venenatis,\n\t\t\t\t\ttellus risus rhoncus nunc, laoreet faucibus eros elit quis\n\t\t\t\t\tmi. Quisque tincidunt mi erat, sed ornare mi consequat quis.\n\t\t\t\t\tMauris lacus lacus, sollicitudin nec laoreet id, euismod\n\t\t\t\t\tquis purus.\n\t\t\t\t</p>\n\t\t\t\t<br />\n\t\t\t\t<br />\n\t\t\t</div>\n\t\t</Modal>\n\t);\n}\n\nexport default TermsOfUseModal;\n","import React, { useState } from \"react\";\nimport { withRouter, Link } from \"react-router-dom\";\nimport {\n\tCard,\n\tForm,\n\tInput,\n\tButton,\n\tTypography,\n\tTabs,\n\tRow,\n\tCol,\n\tCheckbox,\n\tmessage,\n} from \"antd\";\nimport { UserOutlined, LockOutlined } from \"@ant-design/icons\";\nimport { register } from \"../../APIs\";\nimport { useMobile } from \"../../Hooks\";\nimport TermsOfUseModal from \"../Modals/TermsOfUseModal\";\nimport { useTranslation } from 'react-i18next';\n\nconst { Title } = Typography;\nconst { TabPane } = Tabs;\n\nconst layout = {\n\tlabelCol: {\n\t\tspan: 6,\n\t},\n\twrapperCol: {\n\t\tspan: 18,\n\t},\n};\nconst tailLayout = {\n\twrapperCol: {\n\t\tspan: 24,\n\t},\n};\n\nfunction CreateAccount(props) {\n\tconst [role, setRole] = useState(\"patient\");\n\tconst [visible, setVisible] = useState(false);\n\tconst isMobile = useMobile();\n\tconst { t, i18n } = useTranslation(['message']);\n\n\tconst {\n\t\tmatch: { path, params },\n\t} = props;\n\tconst config = {\n\t\tobservationVars: [],\n\t\tinitFunc: () => {},\n\t};\n\tconst onFinish = (values) => {\n\t\tconsole.log(\"Success:\", values);\n\t\tprops.onSubmit(values);\n\t};\n\n\tconst onFinishFailed = (errorInfo) => {\n\t\tconsole.log(\"Failed:\", errorInfo);\n\t};\n\n\tfunction onTabChange(value) {\n\t\tsetRole(value);\n\t}\n\n\tconst onCancel = () => {\n\t\tsetVisible(false);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<Card>\n\t\t\t\t<Row style={{ marginBottom: \"24px\" }}>\n\t\t\t\t\t<Col xs={{ span: 0 }} sm={{ span: 6 }}></Col>\n\t\t\t\t\t<Col xs={{ span: 24 }} sm={{ span: 18 }}>\n\t\t\t\t\t\t<Title level={3}>Create an Account</Title>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\tAfter reigstration, you can use the full functions\n\t\t\t\t\t\t\ton this platform.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Form\n\t\t\t\t\t{...layout}\n\t\t\t\t\tname=\"basic\"\n\t\t\t\t\tinitialValues={{\n\t\t\t\t\t\tremember: true,\n\t\t\t\t\t}}\n\t\t\t\t\tonFinish={onFinish}\n\t\t\t\t\tonFinishFailed={onFinishFailed}\n\t\t\t\t>\n\t\t\t\t\t<Form.Item\n\t\t\t\t\t\tlabel=\"Username\"\n\t\t\t\t\t\tname=\"username\"\n\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\tmessage: t('message:register.username.required'),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Input prefix={<UserOutlined />} />\n\t\t\t\t\t</Form.Item>\n\t\t\t\t\t<Form.Item\n\t\t\t\t\t\tlabel=\"First Name\"\n\t\t\t\t\t\tname=\"firstname\"\n\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\tmessage: t('message:register.firstName.required'),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Input />\n\t\t\t\t\t</Form.Item>\n\t\t\t\t\t<Form.Item\n\t\t\t\t\t\tlabel=\"Last Name\"\n\t\t\t\t\t\tname=\"lastname\"\n\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\tmessage: t('message:register.lastName.required'),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Input />\n\t\t\t\t\t</Form.Item>\n\t\t\t\t\t<Form.Item\n\t\t\t\t\t\tlabel=\"Email\"\n\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\tinitialValue={props.email}\n\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\tmessage: t('message:register.email.required'),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: \"email\",\n\t\t\t\t\t\t\t\tmessage: t('message:register.email.valid'),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Input disabled={props.email} />\n\t\t\t\t\t</Form.Item>\n\n\t\t\t\t\t<Form.Item\n\t\t\t\t\t\tlabel=\"Password\"\n\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\tmessage: t('message:register.password.required'),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpattern: new RegExp(\n\t\t\t\t\t\t\t\t\t/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[-_!%&/()=?*+#,.;])[A-Za-z\\d-_!%&/()=?*+#,.;]{11,30}$/g,\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tmessage: t('message:register.password.valid'),\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Input.Password prefix={<LockOutlined />} />\n\t\t\t\t\t</Form.Item>\n\n\t\t\t\t\t<Form.Item\n\t\t\t\t\t\tlabel=\"Confirm Password\"\n\t\t\t\t\t\tname=\"password_confirm\"\n\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\tmessage: t('message:register.confirmPassword.required'),\n\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t({ getFieldValue }) => ({\n\t\t\t\t\t\t\t\tvalidator(rule, value) {\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t!value ||\n\t\t\t\t\t\t\t\t\t\tgetFieldValue(\"password\") === value\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\treturn Promise.resolve();\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn Promise.reject(\n\t\t\t\t\t\t\t\t\t\tt('message:register.confirmPassword.valid'),\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t]}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Input.Password\n\t\t\t\t\t\t\tonCopy={(e) => e.preventDefault()}\n\t\t\t\t\t\t\tonPaste={(e) => e.preventDefault()}\n\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\tprefix={<LockOutlined />}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Form.Item>\n\n\t\t\t\t\t<Row style={{ marginBottom: \"24px\" }}>\n\t\t\t\t\t\t<Col xs={{ span: 0 }} sm={{ span: 6 }}></Col>\n\t\t\t\t\t\t<Col xs={{ span: 24 }} sm={{ span: 18 }}>\n\t\t\t\t\t\t\t<Form.Item\n\t\t\t\t\t\t\t\t{...tailLayout}\n\t\t\t\t\t\t\t\tname=\"tou\"\n\t\t\t\t\t\t\t\tvaluePropName=\"checked\"\n\t\t\t\t\t\t\t\tstyle={{ marginBottom: \"8px\" }}\n\t\t\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tvalidator: (_, value) =>\n\t\t\t\t\t\t\t\t\t\t\tvalue\n\t\t\t\t\t\t\t\t\t\t\t\t? Promise.resolve()\n\t\t\t\t\t\t\t\t\t\t\t\t: Promise.reject(\n\t\t\t\t\t\t\t\t\t\t\t\t\tt('message:register.ToU.required'),\n\t\t\t\t\t\t\t\t\t\t\t\t  ),\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Checkbox>\n\t\t\t\t\t\t\t\t\tI have read and agree to the{\" \"}\n\t\t\t\t\t\t\t\t\t<Button onClick={() => setVisible(true)}>\n\t\t\t\t\t\t\t\t\t\tTerms of Use\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t.\n\t\t\t\t\t\t\t\t</Checkbox>\n\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col xs={{ span: 0 }} sm={{ span: 6 }}></Col>\n\t\t\t\t\t\t<Col xs={{ span: 24 }} sm={{ span: 18 }}>\n\t\t\t\t\t\t\t<Form.Item {...tailLayout}>\n\t\t\t\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\">\n\t\t\t\t\t\t\t\t\tSign Up\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t\t<TermsOfUseModal\n\t\t\t\t\t\tvisible={visible}\n\t\t\t\t\t\thandleCancel={onCancel}\n\t\t\t\t\t/>\n\t\t\t\t</Form>\n\t\t\t</Card>\n\t\t</>\n\t);\n}\n\nexport default withRouter(CreateAccount);\n","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Layout, Typography, Row, Col, message } from \"antd\";\n\nimport styles from \"./index.module.scss\";\nimport CreateAccount from \"../../../Components/Form/CreateAccount\";\n\nconst { Content } = Layout;\nconst { Title } = Typography;\n\nclass StudiesContent extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {};\n\t}\n\n\tcomponentDidMount() {}\n\n\tonSumit() {\n\t\tmessage.success(\"Registered!\");\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Content className={\"content\"}>\n\t\t\t\t\t<div className={styles.container}>\n\t\t\t\t\t\t<Row gutter={32}>\n\t\t\t\t\t\t\t<Col\n\t\t\t\t\t\t\t\txs={{ span: 24 }}\n\t\t\t\t\t\t\t\tmd={{ span: 11 }}\n\t\t\t\t\t\t\t\tstyle={{ marginBottom: \"40px\" }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Title level={2} style={{ marginTop: \"40px\" }}>\n\t\t\t\t\t\t\t\t\tBeing involved in your health care improves the safety of your care and your medical outcomes. Join Patient Portal and get involved.\n\t\t\t\t\t\t\t\t</Title>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\tPlease register on Patient Portal.\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\tHave and account?{\" \"}\n\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\tto={{\n\t\t\t\t\t\t\t\t\t\t\tpathname: \"/login\",\n\t\t\t\t\t\t\t\t\t\t\tstate: {\n\t\t\t\t\t\t\t\t\t\t\t\tprevPath:\n\t\t\t\t\t\t\t\t\t\t\t\t\twindow.location.pathname,\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tLog in\n\t\t\t\t\t\t\t\t\t</Link>{\" \"}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tclassName={styles.imgContent}\n\t\t\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\t\t\tsrc={require(\"../../../Images/canarie-cover.jpeg\")}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col xs={{ span: 24 }} md={{ span: 13 }}>\n\t\t\t\t\t\t\t\t<CreateAccount />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</div>\n\t\t\t\t</Content>\n\t\t\t</>\n\t\t);\n\t}\n}\nexport default StudiesContent;\n","import React, { useEffect, useState } from \"react\";\nimport { Layout, Typography } from \"antd\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport StudiesTile from \"../../../Components/Cards/StudiesTile\";\nimport styles from \"./index.module.scss\";\n\nimport { getContainers } from \"../../../APIs\";\nimport { setAllStudies } from \"../../../Redux/actions\";\n\nconst { Content } = Layout;\nconst { Title } = Typography;\n\nfunction StudiesContent(props) {\n\tconst dispatch = useDispatch();\n\tconst [studies, setStudies] = useState(null);\n\tuseEffect(() => {\n\t\tgetContainers().then((res) => {\n\t\t\tconst containers = res?.data?.result?.node;\n\t\t\tconst studiesArr = containers.filter((item) => {\n\t\t\t\tif (item.labels[0] === \"study\") return { item };\n\t\t\t});\n\t\t\tdispatch(setAllStudies(studiesArr));\n\t\t\tsetStudies(studiesArr);\n\t\t});\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t<Content className={\"content\"}>\n\t\t\t\t<div className={styles.container}>\n\t\t\t\t\t<Title level={2}>My Studies</Title>\n\n\t\t\t\t\t<StudiesTile data={studies} />\n\t\t\t\t</div>\n\t\t\t</Content>\n\t\t</>\n\t);\n}\nexport default StudiesContent;\n","import React from \"react\";\nimport { StandardLayout } from \"../../Components/Layout\";\nimport { withRouter } from \"react-router-dom\";\nimport { useCookies } from \"react-cookie\";\n\nimport MyStudiesContentPublic from \"./MyStudiesContent/MyStudiesContentPublic\";\nimport MyStudiesContent from \"./MyStudiesContent/MyStudiesContent\";\nfunction Studies(props) {\n\t// const {\n\t// \tmatch: { path, params },\n\t// } = props;\n\tconst config = {\n\t\tobservationVars: [],\n\t\tinitFunc: () => {},\n\t};\n\tconst [cookies] = useCookies();\n\tconst { isLogin } = cookies;\n\treturn (\n\t\t<StandardLayout {...config}>\n\t\t\t{isLogin ? <MyStudiesContent /> : <MyStudiesContentPublic />}\n\t\t</StandardLayout>\n\t);\n}\n\nexport default withRouter(Studies);\n","import React from \"react\";\nimport { StandardLayout } from \"../../Components/Layout\";\nimport { errorPageRoutes as routes } from \"../../Routes/index\";\nimport { withRouter, Switch, Route } from \"react-router-dom\";\n\nfunction ErrorPage(props) {\n\tconst {\n\t\tmatch: { path },\n\t} = props;\n\tconst config = {\n\t\tobservationVars: [],\n\t\tinitFunc: () => {},\n\t};\n\treturn (\n\t\t<StandardLayout {...config}>\n\t\t\t<Switch>\n\t\t\t\t{routes.map((item) => (\n\t\t\t\t\t<Route\n\t\t\t\t\t\texact={item.exact || false}\n\t\t\t\t\t\tpath={path + item.path}\n\t\t\t\t\t\tkey={item.path}\n\t\t\t\t\t\trender={() => <item.component />}\n\t\t\t\t\t></Route>\n\t\t\t\t))}\n\t\t\t</Switch>\n\t\t</StandardLayout>\n\t);\n}\n\nexport default withRouter(ErrorPage);\n","import React from \"react\";\nimport { Switch, Route, useRouteMatch } from \"react-router-dom\";\nimport { Layout } from \"antd\";\nimport { invitationsRoutes as routes } from \"../../Routes\";\nfunction Invite() {\n\tconst match = useRouteMatch();\n\n\treturn (\n\t\t<Layout style={{ minHeight: \"100vh\" }}>\n\t\t\t<Switch>\n\t\t\t\t{routes.map((item) => (\n\t\t\t\t\t<Route\n\t\t\t\t\t\texact={item.exact || false}\n\t\t\t\t\t\tpath={match.url + item.path}\n\t\t\t\t\t\tkey={item.path}\n\t\t\t\t\t\trender={(props) => <item.component />}\n\t\t\t\t\t></Route>\n\t\t\t\t))}\n\t\t\t</Switch>\n\t\t</Layout>\n\t);\n}\n\nexport default Invite;\n","import React, { useState, useEffect } from \"react\";\nimport { withRouter, Link } from \"react-router-dom\";\nimport {\n\tCard,\n\tForm,\n\tInput,\n\tButton,\n\tTypography,\n\tTabs,\n\tRow,\n\tCol,\n\tmessage,\n} from \"antd\";\nimport { UserOutlined, LockOutlined } from \"@ant-design/icons\";\nimport { decodeResetLink, resetPassword } from \"../../APIs\";\nimport { useTranslation } from 'react-i18next';\n\nconst { Title } = Typography;\n\nconst layout = {\n\tlabelCol: {\n\t\tspan: 6,\n\t},\n\twrapperCol: {\n\t\tspan: 18,\n\t},\n};\nconst tailLayout = {\n\twrapperCol: {\n\t\tspan: 24,\n\t},\n};\n\nfunction ForgetPassword(props) {\n\tconst { t, i18n } = useTranslation(['message']);\n\tconst [user, setUser] = useState({})\n\tconst [isExpired, setExpired] = useState(false);\n\tconst [form] = Form.useForm();\n\n\tconst {\n\t\tmatch: { path, params },\n\t} = props;\n\tconst config = {\n\t\tobservationVars: [],\n\t\tinitFunc: () => {},\n\t};\n\tconst onFinish = (values) => {\n\t\tconsole.log(\"Success:\", values);\n\t\tresetPassword(props.hashCode, values.password)\n\t\t\t.then((res) => {\n\t\t\t\tmessage.success(t('message:users.resetPassword.success'));\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\twindow.location.href = '/';\n\t\t\t\t}, 1500);\n\t\t\t})\n\t};\n\n\tconst onFinishFailed = (errorInfo) => {\n\t\tconsole.log(\"Failed:\", errorInfo);\n\t};\n\n\tuseEffect(() => {\n\t\tdecodeResetLink(props.hashCode)\n\t\t\t.then((res) => {\n\t\t\t\tconst { user_info } = res.data;\n\t\t\t\tsetUser(user_info);\n\t\t\t\tform.setFieldsValue(user_info);\n\t\t\t})\n\t\t\t.catch((e) => {\n\t\t\t\tsetExpired(true);\n\t\t\t});\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t<Card>\n\t\t\t\t<Row style={{ marginBottom: \"24px\" }}>\n\t\t\t\t\t<Col xs={{ span: 0 }} sm={{ span: 6 }}></Col>\n\t\t\t\t\t<Col xs={{ span: 24 }} sm={{ span: 18 }}>\n\t\t\t\t\t\t<Title level={3}>Reset Password</Title>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Form\n\t\t\t\t\t{...layout}\n\t\t\t\t\tname=\"basic\"\n\t\t\t\t\tinitialValues={{\n\t\t\t\t\t\tremember: true,\n\t\t\t\t\t}}\n\t\t\t\t\tform={form}\n\t\t\t\t\tonFinish={onFinish}\n\t\t\t\t\tonFinishFailed={onFinishFailed}\n\t\t\t\t>\n\t\t\t\t\t<Form.Item\n\t\t\t\t\t\tlabel=\"Username\"\n\t\t\t\t\t\tname=\"username\"\n                        value={user.username}\n\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\tmessage: t('message:register.username.required'),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Input prefix={<UserOutlined />} disabled />\n\t\t\t\t\t</Form.Item>\n\t\t\t\t\t<Form.Item\n\t\t\t\t\t\tlabel=\"Email\"\n\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\tvalue={user.email}\n\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\tmessage: t('message:register.email.required'),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: \"email\",\n\t\t\t\t\t\t\t\tmessage: t('message:register.email.valid'),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Input disabled />\n\t\t\t\t\t</Form.Item>\n\n\t\t\t\t\t<Form.Item\n\t\t\t\t\t\tlabel=\"New Password\"\n\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\tmessage: t('message:register.password.required'),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpattern: new RegExp(\n\t\t\t\t\t\t\t\t\t/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[-_!%&/()=?*+#,.;])[A-Za-z\\d-_!%&/()=?*+#,.;]{11,30}$/g,\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tmessage: t('message:register.password.valid'),\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Input.Password prefix={<LockOutlined />} />\n\t\t\t\t\t</Form.Item>\n\n\t\t\t\t\t<Form.Item\n\t\t\t\t\t\tlabel=\"Confirm Password\"\n\t\t\t\t\t\tname=\"password_confirm\"\n\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\tmessage: t('message:register.confirmPassword.required'),\n\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t({ getFieldValue }) => ({\n\t\t\t\t\t\t\t\tvalidator(rule, value) {\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t!value ||\n\t\t\t\t\t\t\t\t\t\tgetFieldValue(\"password\") === value\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\treturn Promise.resolve();\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn Promise.reject(\n\t\t\t\t\t\t\t\t\t\tt('message:register.confirmPassword.valid'),\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t]}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Input.Password\n\t\t\t\t\t\t\tonCopy={(e) => e.preventDefault()}\n\t\t\t\t\t\t\tonPaste={(e) => e.preventDefault()}\n\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\tprefix={<LockOutlined />}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Form.Item>\n\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col xs={{ span: 0 }} sm={{ span: 6 }}></Col>\n\t\t\t\t\t\t<Col xs={{ span: 24 }} sm={{ span: 18 }}>\n\t\t\t\t\t\t\t<Form.Item {...tailLayout}>\n\t\t\t\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\">\n\t\t\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</Form>\n\t\t\t</Card>\n\t\t</>\n\t);\n}\n\nexport default withRouter(ForgetPassword);\n","import React, { useState, useEffect } from \"react\";\nimport { Layout } from \"antd\";\nimport { useRouteMatch } from \"react-router-dom\";\n\nimport StandardLayout from \"../../Components/Layout/StandardLayout\";\nimport { forgetPasswordRoutes as routes } from \"../../Routes\";\nimport ForgetPasswordForm from \"../../Components/Form/ForgetPassword\"\nimport { decodeResetLink } from '../../APIs';\nimport { set } from \"lodash\";\n\nconst { Content } = Layout;\n\nfunction ForgetPassword(props) {\n\tconst {\n\t\tmatch: { path, params },\n\t\tlocation: { pathname }\n\t} = props;\n\tconst config = {\n\t\tobservationVars: [],\n\t\tinitFunc: () => {},\n\t};\n\tconst pathArray = pathname.split('/');\n\tconst hashCode = pathArray[pathArray.length - 1];\n\n\treturn (\n\t\t<StandardLayout {...config}>\n\t\t\t<Content className={\"content\"}>\n                <div style={{ maxWidth: \"600px\", margin: \"30px auto\"}}>\n                    <ForgetPasswordForm \n                        hashCode={hashCode}\n                    />\n                </div>\n\t\t\t</Content>\n\t\t</StandardLayout>\n\t);\n}\n\nexport default ForgetPassword;\n","import Home from \"../Views/Home/Home\";\nimport Login from \"../Views/Login/Login\";\nimport Registration from \"../Views/Registration/Registration\";\nimport Studies from \"../Views/Studies/Studies\";\nimport Study from \"../Views/Study/Study\";\nimport AdminUsers from \"../Views/AdminUsers/AdminUsers\";\nimport MyStudies from \"../Views/MyStudies/MyStudies\";\nimport ErrorPage from \"../Views/ErrorPage/ErrorPage\";\nimport Invitations from \"../Views/Invitations/Invite\";\nimport ForgetPassword from \"../Views/ForgetPassword\";\n\nconst routes = [\n\t{\n\t\tpath: \"/\",\n\t\tcomponent: Home,\n\t\texact: true,\n\t},\n\t{\n\t\tpath: \"/login\",\n\t\tcomponent: Login,\n\t\texact: true,\n\t},\n\t{\n\t\tpath: \"/registration\",\n\t\tcomponent: Registration,\n\t},\n\t{\n\t\tpath: \"/pwdreset\",\n\t\tcomponent: ForgetPassword,\n\t},\n\t{\n\t\tpath: \"/studies\",\n\t\tcomponent: Studies,\n\t},\n\t{\n\t\tpath: \"/my-studies\",\n\t\tcomponent: MyStudies,\n\t\tprotected: true,\n\t},\n\t{\n\t\tpath: \"/study/:studyId\",\n\t\tcomponent: Study,\n\t\tprotected: true,\n\t},\n\t{\n\t\tpath: \"/admin/users\",\n\t\tcomponent: AdminUsers,\n\t\tprotected: true,\n\t},\n\t{ \tpath: \"/error\", \n\t\tcomponent: ErrorPage \n\t},\n\t{\n\t\tpath: \"/invite\",\n\t\tcomponent: Invitations,\n\t},\n];\n\nexport default routes;\n","import React, { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport {\n\tLayout,\n\tTypography,\n\tRow,\n\tCol,\n\tCard,\n\tSpace,\n\tButton,\n\tCollapse,\n\tmessage,\n\tTag,\n\tModal,\n\tAvatar\n} from \"antd\";\nimport { StarOutlined, FormOutlined, } from \"@ant-design/icons\";\nimport { useCookies } from \"react-cookie\";\nimport { useTranslation } from 'react-i18next';\nimport { lineBreaker } from '../../../Utility'; \nimport AppFooter from \"../../../Components/Layout/Footer\";\nimport styles from \"./index.module.scss\";\nimport IframeResizer from 'iframe-resizer-react'\n\nconst { Content } = Layout;\nconst { Title, Paragraph } = Typography;\nconst { Panel } = Collapse;\n\nfunction Landing(props) {\n\tfunction callback(key) {\n\t\tconsole.log(key);\n\t}\n\tconst [cookies] = useCookies();\n\tconst { isLogin } = cookies;\n\tconst { t, i18n } = useTranslation(['message']);\n\tconst user = useSelector((state) => state.user);\n\tconst surveyQueueLink = useSelector((state) => state.redCapLinks && state.redCapLinks.surveyQueueLink);\n\tconst [surveyModalVisible, setSurveyModalVisible] = useState(false);\n\n\tconsole.log(props);\n\tconst currentStudy = props.currentStudy;\n\n\tconst panels = [];\n\tpanels.push((\n\t\t<Panel\n\t\t\theader=\"Contact Information\"\n\t\t\tkey=\"location\"\n\t\t>\n\t\t\t<p>{currentStudy && currentStudy.contact && lineBreaker(currentStudy.contact)}</p>\n\t\t</Panel>\n\t));\n\tpanels.push((\n\t\t<Panel\n\t\t\theader=\"Project Investigator\"\n\t\t\tkey=\"investigator\"\n\t\t>\n\t\t\t<p>{currentStudy && currentStudy.investigator}</p>\n\t\t</Panel>\n\t));\n\tpanels.push((\n\t\t<Panel\n\t\t\theader=\"Sponsors and Collaborators\"\n\t\t\tkey=\"sponsor\"\n\t\t>\n\t\t\t<p>{currentStudy && currentStudy.sponsor}</p>\n\t\t</Panel>\n\t));\n\t\n\n\tconst onCancel = () => {\n\t\tsetSurveyModalVisible(false);\n\t}\n\n\tconst surveyCard = (\n\t\t<Card>\n\t\t\t<Title level={3}>Your Survey Progress</Title>\n\t\t\t{\n\t\t\t\tcurrentStudy && currentStudy.useEconsent && (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Button \n\t\t\t\t\t\t\tshape=\"round\" \n\t\t\t\t\t\t\ticon={<FormOutlined />} \n\t\t\t\t\t\t\tsize='large' \n\t\t\t\t\t\t\tstyle={{ marginTop: 10, width: 254 }}\n\t\t\t\t\t\t\tdisabled={props.isSurveyStarted}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\tto={{\n\t\t\t\t\t\t\t\t\tpathname: `/study/${currentStudy && currentStudy.id}/survey?isSurveyLink=True`,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\tstyle={{ marginLeft: '5px', color: props.isSurveyStarted ? 'grey' : ''}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tTake eConsent Survey\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t<Button \n\t\t\t\t\t\t\tshape=\"round\" \n\t\t\t\t\t\t\ticon={<FormOutlined />} \n\t\t\t\t\t\t\tsize='large' \n\t\t\t\t\t\t\tstyle={{ marginTop: 10, width: 254 }}\n\t\t\t\t\t\t\tdisabled={!props.isSurveyStarted}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\tto={{\n\t\t\t\t\t\t\t\t\tpathname: `/study/${currentStudy && currentStudy.id}/survey?isSurveyLink=False`,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\tstyle={{ marginLeft: '5px', color: !props.isSurveyStarted ? 'grey' : ''}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tComplete Study Surveys\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t<Button \n\t\t\t\t\t\t\tshape=\"round\" \n\t\t\t\t\t\t\ticon={<FormOutlined />} \n\t\t\t\t\t\t\tsize='large' \n\t\t\t\t\t\t\tstyle={{ marginTop: 10, width: 254 }}\n\t\t\t\t\t\t\tonClick={() => setSurveyModalVisible(true)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\tstyle={{ marginLeft: '5px'}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tOpen Study Survey Modal\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t}\n\t\t\t\n\t\t</Card>\n\t)\n\n\tif (currentStudy) {\n\t\tconst keys = currentStudy.attrs_order;\n\n\t\tfor (const key of keys) {\n\t\t\tif (key.startsWith('attr')) {\n\t\t\t\tconst value = currentStudy[key];\n\n\t\t\t\tlet displayValue = value;\n\t\t\t\tif (typeof (value) !== 'string') {\n\t\t\t\t\tdisplayValue = value.map((el) => (<Tag>{el}</Tag>));\n\t\t\t\t}\n\n\t\t\t\tpanels.push((\n\t\t\t\t\t<Panel\n\t\t\t\t\t\theader={key.slice(5).replace('_', ' ')}\n\t\t\t\t\t\tkey={key.slice(5)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<p>{displayValue}</p>\n\t\t\t\t\t</Panel>\n\t\t\t\t));\n\t\t\t}\n\t\t}\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<Content className={\"content\"}>\n\t\t\t\t<div className={styles.container}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{isLogin ? null : (\n\t\t\t\t\t\t\t<Button type=\"primary\" style={{ float: \"right\" }}>\n\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\tto={{\n\t\t\t\t\t\t\t\t\t\tpathname: \"/registration\",\n\t\t\t\t\t\t\t\t\t\tstate: {\n\t\t\t\t\t\t\t\t\t\t\tprevPath: window.location.pathname,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tRequest to Participate\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<Title level={2}>\n\t\t\t\t\t\t\t{currentStudy ? currentStudy.name : \"\"}{\" \"}\n\t\t\t\t\t\t\t{isLogin && (\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\ttype=\"link\"\n\t\t\t\t\t\t\t\t\tstyle={{ paddingLeft: \"0\" }}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<StarOutlined\n\t\t\t\t\t\t\t\t\t\tkey=\"star\"\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\tmessage.success(\n\t\t\t\t\t\t\t\t\t\t\t\tt('message:study.landing.star'),\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t\t\t\t\t\t\t\tverticalAlign: \"baseline\",\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<Tag\n\t\t\t\t\t\t\t\tcolor=\"green\"\n\t\t\t\t\t\t\t\tstyle={{ verticalAlign: \"middle\" }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tRecruiting\n\t\t\t\t\t\t\t</Tag>\n\t\t\t\t\t\t</Title>{\" \"}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<Row gutter={16}>\n\t\t\t\t\t\t<Col\n\t\t\t\t\t\t\txs={{ span: 24 }}\n\t\t\t\t\t\t\tmd={{ span: 7 }}\n\t\t\t\t\t\t\tstyle={{ marginBottom: \"8px\" }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Space direction=\"vertical\">\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tcurrentStudy && currentStudy.project_icon ? (\n\t\t\t\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\t\t\t\tshape=\"square\"\n\t\t\t\t\t\t\t\t\t\t\tsize={270}\n\t\t\t\t\t\t\t\t\t\t\tsrc={currentStudy.project_icon}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\tclassName={styles.imgContent}\n\t\t\t\t\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\t\t\t\t\tsrc={require(\"../../../Images/study_cover.jpg\")}\n\t\t\t\t\t\t\t\t\t\t></img>\n\t\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tuser && Object.keys(user).length && user.role === 'patient' && props.isSurveyConnected ? surveyCard : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t\t\t<Title level={3}>Contact Information</Title>\n\t\t\t\t\t\t\t\t\t<Space direction=\"vertical\">\n\t\t\t\t\t\t\t\t\t\t<Button>\n\t\t\t\t\t\t\t\t\t\t\t<a href={currentStudy ? `mailto:${currentStudy.primaryEmail}` : '#'}>\n\t\t\t\t\t\t\t\t\t\t\t\tEmail Primary Study Contact\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t{isLogin ? (\n\t\t\t\t\t\t\t\t\t\t\t<Button>\n\t\t\t\t\t\t\t\t\t\t\t\t<a href={currentStudy ? `mailto:${currentStudy.investigatorEmail}` : '#'}>\n\t\t\t\t\t\t\t\t\t\t\t\t\tContact Principal Investigator\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<Button>\n\t\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\t\tto={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpathname: \"/login\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tprevPath:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twindow.location\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.pathname,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\tContact Study Coordinator\n\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</Space>\n\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t</Space>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col xs={{ span: 24 }} md={{ span: 17 }}>\n\t\t\t\t\t\t\t<Space direction=\"vertical\">\n\t\t\t\t\t\t\t\t<Card style={{ minWidth: 800 }}>\n\t\t\t\t\t\t\t\t\t<Title level={3}>Study Description</Title>\n\t\t\t\t\t\t\t\t\t<Paragraph>\n\t\t\t\t\t\t\t\t\t\t{currentStudy && currentStudy.description && lineBreaker(currentStudy.description)}\n\t\t\t\t\t\t\t\t\t</Paragraph>\n\t\t\t\t\t\t\t\t\t<Collapse\n\t\t\t\t\t\t\t\t\t\tclassName={styles.study_description_collapse}\n\t\t\t\t\t\t\t\t\t\tdefaultActiveKey={[\"1\"]}\n\t\t\t\t\t\t\t\t\t\tonChange={callback}\n\t\t\t\t\t\t\t\t\t>\n\n\t\t\t\t\t\t\t\t\t\t{panels}\n\t\t\t\t\t\t\t\t\t</Collapse>\n\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t\t<Card style={{ minWidth: 800 }}>\n\t\t\t\t\t\t\t\t\t<Title level={3}>\n\t\t\t\t\t\t\t\t\t\tEligibility Criteria\n\t\t\t\t\t\t\t\t\t</Title>\n\t\t\t\t\t\t\t\t\t<Paragraph>\n\t\t\t\t\t\t\t\t\t\t{currentStudy && currentStudy.criteria && lineBreaker(currentStudy.criteria)}\n\t\t\t\t\t\t\t\t\t</Paragraph>\n\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t</Space>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</div>\n\t\t\t\t<Modal \n\t\t\t\t\tvisible={surveyModalVisible}\n\t\t\t\t\tonCancel={onCancel}\n\t\t\t\t\tfooter={null}\n\t\t\t\t\ttitle=\"REDCap Surveys\"\n\t\t\t\t>\n\t\t\t\t\t<IframeResizer \n\t\t\t\t\t\tsrc={surveyQueueLink}\n\t\t\t\t\t\tstyle={{ minWidth: '100%', }}\n\t\t\t\t\t\tframeborder=\"0\"\n\t\t\t\t\t\theight=\"370px\"\n\t\t\t\t\t\tinPageLinks\n\t\t\t\t\t\tscrolling=\"auto\"\n\t\t\t\t\t\tseamless\n\t\t\t\t\t/>\n\t\t\t\t</Modal>\n\t\t\t\t<AppFooter />\n\t\t\t</Content>\n\t\t</>\n\t);\n}\n\nexport default Landing;\n","import React from \"react\";\nimport { Modal, Button, Form, Input, message } from \"antd\";\nimport { inviteUser } from \"../../APIs\";\nimport { useParams } from \"react-router-dom\";\nimport { useTranslation } from 'react-i18next';\n\nfunction InvitePatientModal() {\n\tconst [visible, setVisible] = React.useState(false);\n\tconst [form] = Form.useForm();\n\tconst { t, i18n } = useTranslation(['message']);\n\tlet { studyId } = useParams();\n\n\treturn (\n\t\t<>\n\t\t\t<Button type=\"primary\" onClick={() => setVisible(true)}>\n\t\t\t\tInvite Patient\n\t\t\t</Button>\n\t\t\t<Modal\n\t\t\t\ttitle=\"Invite Patient\"\n\t\t\t\tvisible={visible}\n\t\t\t\tokText=\"Invite\"\n\t\t\t\tonOk={() => {\n\t\t\t\t\tform.validateFields()\n\t\t\t\t\t\t.then((values) => {\n\t\t\t\t\t\t\tconst data = {\n\t\t\t\t\t\t\t\t...values,\n\t\t\t\t\t\t\t\trole: \"patient\",\n\t\t\t\t\t\t\t\tprojectId: studyId,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tinviteUser(data).then((res) => {\n\t\t\t\t\t\t\t\tif (res.status === 200) {\n\t\t\t\t\t\t\t\t\tmessage.success(t(\"message:invitation.patient.success\"));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tform.resetFields();\n\t\t\t\t\t\t\tsetVisible(false);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((info) => {\n\t\t\t\t\t\t\tconsole.log(\"Validate Failed:\", info);\n\t\t\t\t\t\t\tmessage.error(t(\"message:invitation.patient.failed\"));\n\t\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t\tonCancel={() => setVisible(false)}\n\t\t\t>\n\t\t\t\t<Form form={form} layout=\"vertical\" name=\"invite_patient\">\n\t\t\t\t\t<Form.Item\n\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\tlabel=\"E-mail\"\n\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: \"email\",\n\t\t\t\t\t\t\t\tmessage: t(\"message:invitation.patient.email.valid\"),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\tmessage: t(\"message:invitation.patient.email.required\"),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Input />\n\t\t\t\t\t</Form.Item>\n\t\t\t\t\t<Form.Item\n\t\t\t\t\t\tname=\"question\"\n\t\t\t\t\t\tlabel=\"Question\"\n\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\tmessage: t(\"message:invitation.patient.question.required\"),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]}\n\t\t\t\t\t\thasFeedback\n\t\t\t\t\t>\n\t\t\t\t\t\t<Input />\n\t\t\t\t\t</Form.Item>\n\t\t\t\t\t<Form.Item\n\t\t\t\t\t\tname=\"answer\"\n\t\t\t\t\t\tlabel=\"Answer\"\n\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\tmessage: t(\"message:invitation.patient.answer.required\"),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]}\n\t\t\t\t\t\thasFeedback\n\t\t\t\t\t>\n\t\t\t\t\t\t<Input />\n\t\t\t\t\t</Form.Item>\n\t\t\t\t\t<Form.Item\n\t\t\t\t\t\tname=\"confirmAnswer\"\n\t\t\t\t\t\tlabel=\"Confirm Answer\"\n\t\t\t\t\t\tdependencies={[\"answer\"]}\n\t\t\t\t\t\thasFeedback\n\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\tmessage: t(\"message:invitation.patient.confirmAnswer.required\"),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t({ getFieldValue }) => ({\n\t\t\t\t\t\t\t\tvalidator(rule, value) {\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t!value ||\n\t\t\t\t\t\t\t\t\t\tgetFieldValue(\"answer\") === value\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\treturn Promise.resolve();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn Promise.reject(\n\t\t\t\t\t\t\t\t\t\tt(\"message:invitation.patient.confirmAnswer.valid\"),\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t]}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Input />\n\t\t\t\t\t</Form.Item>\n\t\t\t\t</Form>\n\t\t\t</Modal>\n\t\t</>\n\t);\n}\n\nexport { InvitePatientModal };\n","import React, { useRef, useState, useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { Typography, Card, Table, Tabs, Space, Button, Menu, Dropdown, message, Spin, } from \"antd\";\nimport { MoreOutlined } from '@ant-design/icons';\nimport moment from \"moment-timezone\";\nimport { InvitePatientModal } from \"../../../Components/Modals/InvitePatientModal\";\nimport InvitationTable from \"../../../Components/Table/InvitationTable\";\nimport { withRouter } from \"react-router-dom\";\nimport AppFooter from \"../../../Components/Layout/Footer\";\nimport styles from \"./index.module.scss\";\nimport { getPatients, getSurveysCompeleteStatus, } from \"../../../APIs\";\nimport { useParams } from \"react-router-dom\";\nimport ScalableDetails from \"../../../Components/ScalableDetail/ScalableDetails\";\nconst { Title } = Typography;\nconst { TabPane } = Tabs;\n\nfunction Landing(props) {\n\tlet { studyId } = useParams();\n\tconst [users, setUsers] = React.useState([]);\n\tconst [sidePanel, setSidePanel] = useState(false);\n\tconst [currentRecord, setCurrentRecord] = useState(null);\n\tconst [panelWidth, setPanelWidth] = useState(350);\n\tconst [tableWidth, setTableWidth] = useState('70%');\n\tconst [surveyCompleteStatus, setSurveyCompleteStatus] = useState([]);\n\tconst [loading, setLoading] = useState(true);\n\tconst studies = useSelector((state) => state.studies.allStudies);\n\n\tconst myRef = useRef(null);\n\n\tuseEffect(() => {\n\t\tif (props.currentStudy) getUsers();\n\t}, [props.currentStudy]);\n\n\tconst getUsers = async () => {\n\t\ttry {\n\t\t\tlet surveyStatus = [];\n\t\t\tif (props.currentStudy && props.currentStudy.redap_token) {\n\t\t\t\tconst surveyRes = await getSurveysCompeleteStatus(studyId);\n\t\t\t\tif (surveyRes.status === 200) {\n\t\t\t\t\tsurveyStatus = surveyRes.data.result;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst userRes = await getPatients(studyId)\n\t\t\tif (userRes.status === 200) {\n\t\t\t\tconst data = userRes.data.result.map((item) => {\n\t\t\t\t\tif (item.container_guid_container) {\n\t\t\t\t\t\tconst guidIndex = item.container_guid_container.indexOf(`${studyId}`);\n\t\t\t\t\t\tconst currentContainerGuid = item.container_guid_guid[guidIndex];\n\n\t\t\t\t\t\tconst surveyInfo = surveyStatus.find(survey => survey.record_id === currentContainerGuid);\n\n\t\t\t\t\t\tif (surveyInfo && surveyInfo.uncompleted_surveys) {\n\t\t\t\t\t\t\treturn { \n\t\t\t\t\t\t\t\t...item, key: item.id, \n\t\t\t\t\t\t\t\tisSurveyComplete: false, \n\t\t\t\t\t\t\t\tisSurveyStarted: surveyInfo['is_survey_started'], \n\t\t\t\t\t\t\t\tuncompletedSurveys: surveyInfo.uncompleted_surveys \n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t} \n\t\t\t\t\t}\n\n\t\t\t\t\treturn { ...item, key: item.id, isSurveyComplete: false, isSurveyStarted: false };\n\t\t\t\t});\n\t\t\t\tsetUsers(data);\n\t\t\t\tsetLoading(false);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tif (error.response && error.response.config.url === '/v1/user-survey/status') { \n\t\t\t\tmessage.error(`${error.response.data.result}, please update the REDCap token in config page.`);\n\t\t\t}\n\t\t\tsetLoading(false);\n\t\t}\n\t};\n\n\tconst columns = [\n\t\t{\n\t\t\ttitle: \"Username\",\n\t\t\tdataIndex: \"username\",\n\t\t\tkey: \"username\",\n\t\t\tsorter: (a, b) => a.username.localeCompare(b.username),\n\t\t},\n\t\t{\n\t\t\ttitle: \"container GUID\",\n\t\t\tdataIndex: \"guid\",\n\t\t\trender: (text, record) => {\n\t\t\t\tconst guidContainers = record.container_guid_container;\n\t\t\t\tconst guidArray = record.container_guid_guid;\n\n\t\t\t\tif (guidContainers && guidArray) {\n\t\t\t\t\tconst index = guidContainers.indexOf(String(studyId));\n\n\t\t\t\t\treturn guidArray[index];\n\t\t\t\t}\n\n\t\t\t\treturn '8SDFJH';\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\ttitle: \"First Name\",\n\t\t\tdataIndex: \"firstname\",\n\t\t\tkey: \"firstName\",\n\t\t\tsorter: (a, b) => a.firstname.localeCompare(b.firstname),\n\t\t},\n\t\t{\n\t\t\ttitle: \"Last Name\",\n\t\t\tdataIndex: \"lastname\",\n\t\t\tkey: \"lastName\",\n\t\t\tsorter: (a, b) => a.lastname.localeCompare(b.lastname),\n\t\t},\n\t\t{\n\t\t\ttitle: \"Email\",\n\t\t\tdataIndex: \"email\",\n\t\t\tkey: \"email\",\n\t\t},\n\t\t{\n\t\t\ttitle: \"Join Date\",\n\t\t\tdataIndex: \"time_created\",\n\t\t\tkey: \"createdTimestamp\",\n\t\t\tsorter: (a, b) => {\n\t\t\t\treturn new Date(a.created_time) - new Date(b.created_time);\n\t\t\t},\n\t\t\trender: (text) => {\n\t\t\t\treturn moment(text).format('YYYY-MM-DD HH:mm:ss');\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\ttitle: \"Enrolled\",\n\t\t\tdataIndex: \"isSurveyStarted\",\n\t\t\trender: (text) => {\n\t\t\t\tif (text) return 'Yes';\n\t\t\t\treturn 'No';\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\ttitle: \"Actions\",\n\t\t\tkey: \"action\",\n\t\t\trender: (text, record) => {\n\t\t\t\tconst menu = (\n\t\t\t\t\t<Menu>\n\t\t\t\t\t\t<Menu.Item\n\t\t\t\t\t\t\tonClick={() =>{\n\t\t\t\t\t\t\t\tsetSidePanel(true);\n\t\t\t\t\t\t\t\tsetCurrentRecord(record);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tView\n\t\t\t\t\t\t</Menu.Item>\n\n\t\t\t\t\t\t<Menu.Item\n\t\t\t\t\t\t\tstyle={{ color: 'red' }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tRemove\n\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t</Menu>\n\t\t\t\t);\n\n\t\t\t\treturn (\n\t\t\t\t\t<Dropdown overlay={menu} placement=\"bottomRight\">\n\t\t\t\t\t  <Button shape=\"circle\">\n\t\t\t\t\t\t<MoreOutlined />\n\t\t\t\t\t  </Button>\n\t\t\t\t\t</Dropdown>\n\t\t\t\t  );\n\t\t\t}\n\t\t},\n\t];\n\n\tfunction callback(key) {\n\t\tconsole.log(key);\n\t}\n\n\tconst toggleSidePanel = () => {\n\t\tsetSidePanel(!sidePanel);\n\t};\n\n\tconst mouseMove = (e) => {\n\t\tconst mouseX = e.clientX;\n\t\tconst parentX = myRef.current.getClientRects()[0].x;\n\t\tconst parentWidth = myRef.current.getClientRects()[0].width;\n\t\tconst delta = mouseX - parentX; //delta is the current table width\n\t\tconst maxPanelwidth = 600;\n\t\tconst panelWidth =\n\t\t  parentWidth - delta > maxPanelwidth ? maxPanelwidth : parentWidth - delta;\n\t\tconst tableWidth = parentWidth - panelWidth;\n\t\n\t\tsetTableWidth(tableWidth);\n\t\tsetPanelWidth(panelWidth);\n\t  };\n\t\n\tconst stopMove = () => {\n\t\tdocument.removeEventListener('mousemove', mouseMove, true);\n\t\tdocument.removeEventListener('mouseup', stopMove, true);\n\t};\n\n\tconst mouseDown = (e) => {\n\t\tdocument.addEventListener('mousemove', mouseMove, true);\n\t\tdocument.addEventListener('mouseup', stopMove, true);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<div className={styles.container}>\n\t\t\t\t{/* <Breadcrumb itemRender={itemRender} routes={routes} /> */}\n\t\t\t\t<div>\n\t\t\t\t\t<Title level={2}>Patients</Title>{\" \"}\n\t\t\t\t</div>\n\t\t\t\t<Card style={{ boxShadow: \"0px 1px 9px #00000020\" }}>\n\t\t\t\t\t<InvitePatientModal />\n\t\t\t\t\t<Spin spinning={loading}>\n\t\t\t\t\t\t<Tabs>\n\t\t\t\t\t\t\t<TabPane tab=\"Enrolled\" key=\"enrolled\">\n\t\t\t\t\t\t\t\t<div ref={myRef} style={{ display: sidePanel ? 'flex' : '' }}>\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\tborderRight:\n\t\t\t\t\t\t\t\t\t\t\t\tsidePanel && '1px solid rgb(240, 240, 240)',\n\t\t\t\t\t\t\t\t\t\t\tmarginRight: sidePanel && '16px',\n\t\t\t\t\t\t\t\t\t\t\twidth: sidePanel && tableWidth,\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Table \n\t\t\t\t\t\t\t\t\t\t\tdataSource={users} \n\t\t\t\t\t\t\t\t\t\t\tcolumns={columns} \n\t\t\t\t\t\t\t\t\t\t\tstyle={{ marginTop: 20 }}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{sidePanel && (\n\t\t\t\t\t\t\t\t\t\t<ScalableDetails\n\t\t\t\t\t\t\t\t\t\t\tclose={() => {\n\t\t\t\t\t\t\t\t\t\t\t\ttoggleSidePanel();\n\t\t\t\t\t\t\t\t\t\t\t\tsetCurrentRecord(null);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\twidth={panelWidth}\n\t\t\t\t\t\t\t\t\t\t\trecord={currentRecord}\n\t\t\t\t\t\t\t\t\t\t\tmouseDown={mouseDown}\n\t\t\t\t\t\t\t\t\t\t\tlocation=\"CONTAINER PATIENT\"\n\t\t\t\t\t\t\t\t\t\t\tstudyId={studyId}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</TabPane>\n\n\t\t\t\t\t\t\t<TabPane tab=\"Invited\" key=\"invited\">\n\t\t\t\t\t\t\t\t<InvitationTable\n\t\t\t\t\t\t\t\t\tprojectId={studyId}\n\t\t\t\t\t\t\t\t/>\t\n\t\t\t\t\t\t\t</TabPane>\n\t\t\t\t\t\t</Tabs>\n\t\t\t\t\t</Spin>\n\t\t\t\t</Card>\n\t\t\t</div>\n\t\t\t<AppFooter />\n\t\t</>\n\t);\n}\n\nexport default withRouter(Landing);\n","import React, { useEffect } from 'react';\nimport _ from 'lodash';\nimport {\n  Form,\n  Input,\n  Switch,\n  Tag,\n  Select,\n  Avatar,\n  Upload,\n  Typography,\n  Button,\n} from 'antd';\nimport { lineBreaker } from '../../../../Utility'; \nimport styles from '../index.module.scss';\nimport { withRouter } from 'react-router-dom';\nimport ImgCrop from 'antd-img-crop';\nimport moment from 'moment';\n\nconst { TextArea } = Input;\nconst { Paragraph } = Typography;\nfunction GeneralInfo(props) {\n  const {\n    match: {\n      params: { datasetId },\n    },\n    editMode,\n    userListOnDataset,\n    updateDatasetInfo,\n    datasetUpdate,\n    datasetInfo,\n    setDatasetInfo,\n    emailValid,\n  } = props;\n  function getBase64(img, callback) {\n    const reader = new FileReader();\n    reader.addEventListener('load', () => callback(reader.result));\n    reader.readAsDataURL(img);\n  }\n  async function beforeIconChange(file) {\n    getBase64(file, async (imageUrl) => {\n      const compressedIcon = await resizeImage(imageUrl);\n      updateDatasetInfo('project_icon',compressedIcon)\n    });\n  }\n  function imageToDataUri(img, width, height) {\n    var canvas = document.createElement('canvas'),\n      ctx = canvas.getContext('2d');\n    canvas.width = width;\n    canvas.height = height;\n    ctx.drawImage(img, 0, 0, width, height);\n    return canvas.toDataURL();\n  }\n  function resizeImage(originalDataUri) {\n    return new Promise((resolve, reject) => {\n      var img = new Image();\n      img.onload = () => {\n        var newDataUri = imageToDataUri(img, 200, 200);\n        resolve(newDataUri);\n      };\n      img.src = originalDataUri;\n    });\n  }\n  \n\n  return datasetInfo ? (\n    <div style={{ padding: 20 }}>\n      <div\n        id=\"setting-left\"\n        style={{ float: 'left', width: '349px', marginLeft: 6 }}\n      >\n        <div\n          style={{\n            display: 'inline-block',\n          }}\n        >\n          {datasetUpdate.project_icon ? (\n            <Avatar src={datasetUpdate.project_icon} size={65}></Avatar>\n          ) : (\n            <Avatar\n              style={{ backgroundColor: '#13c2c2', verticalAlign: 'middle' }}\n              size={65}\n            >\n              <span\n                style={{\n                  fontSize: 50,\n                  fontWeight: 'bold',\n                  textTransform: 'uppercase',\n                }}\n              >\n                {datasetUpdate.name ? datasetUpdate.name.charAt(0) : ''}\n              </span>\n            </Avatar>\n          )}\n        </div>\n\n        <div\n          style={{\n            display: 'inline-block',\n            marginLeft: 26,\n            verticalAlign: 'middle',\n          }}\n        >\n          <h4 className={styles.iconTitle}>Upload your project icon</h4>\n          <p className={styles.iconP}>Recommended size is 200 x 200px</p>\n          <ImgCrop shape=\"round\">\n            <Upload showUploadList={false} beforeUpload={beforeIconChange}>\n              <Button className={styles.button} type=\"primary\" disabled={!editMode}>\n                Upload Icon\n              </Button>\n            </Upload>\n          </ImgCrop>\n        </div>\n        <div style={{ width: 320, paddingRight: 10, marginTop: 38 }}>\n        </div>\n      </div>\n      <div id=\"setting-right\" style={{ marginLeft: '349px' }}>\n        <Form\n          layout=\"vertical\"\n          style={{\n            maxWidth: 700,\n            marginLeft: 40,\n            marginRight: 40,\n          }}\n          className={styles.custom_general_info_form}\n        >\n          <div style={{ display: 'inline-block' }}>\n            <Form.Item label=\"Project Name\">\n              {editMode ? (\n                <Input\n                  style={{ width: 500 }}\n                  defaultValue={datasetInfo.name}\n                  onChange={(e) =>\n                    updateDatasetInfo('name', _.trimStart(e.target.value))\n                  }\n                />\n              ) : (\n                <p style={{ wordBreak: 'break-all', width: '100%' }}>\n                  {datasetInfo.name}\n                </p>\n              )}\n            </Form.Item>\n          </div>\n\n          <Form.Item label=\"Project Investigator\">\n            <Paragraph\n              style={{\n                color: 'rgba(0,0,0,0.8)',\n              }}\n              ellipsis={{\n                rows: 2,\n                expandable: true,\n              }}\n            >\n              {editMode ? (\n                <Input\n                  style={{ width: 500 }}\n                  defaultValue={datasetInfo.investigator}\n                  onChange={(e) =>\n                    updateDatasetInfo('investigator', _.trimStart(e.target.value))\n                  }\n                />\n              ) : (\n                <p style={{ wordBreak: 'break-all', width: '100%' }}>\n                  {datasetInfo.investigator}\n                </p>\n              )}\n            </Paragraph>\n          </Form.Item>\n\n          <Form.Item label=\"Sponsors and Collaborators\">\n              {editMode ? (\n                <Input\n                  style={{ width: 500 }}\n                  defaultValue={datasetInfo.sponsor}\n                  onChange={(e) =>\n                    updateDatasetInfo('sponsor', _.trimStart(e.target.value))\n                  }\n                />\n              ) : (\n                <p style={{ wordBreak: 'break-all', width: '100%' }}>\n                  {datasetInfo.sponsor}\n                </p>\n              )}\n            </Form.Item>\n\n          <Form.Item label=\"Create Time\">\n            {datasetInfo.time_created ? moment(datasetInfo.time_created).format('YYYY-MM-DD HH:mm') : null}\n          </Form.Item>\n\n          <Form.Item label=\"Eligibility Criteria\">\n            {editMode ? (\n              <div>\n                <TextArea\n                  autoSize\n                  style={{ minHeight: 60 }}\n                  maxLength={150}\n                  defaultValue={datasetInfo.criteria}\n                  onChange={(e) =>\n                    updateDatasetInfo('criteria', _.trimStart(e.target.value))\n                  }\n                />\n                <span style={{ float: 'right' }}>{`${datasetUpdate.criteria\n                  ? datasetUpdate.criteria.length\n                  : 0\n                  }/150`}</span>\n              </div>\n            ) : (\n              <p style={{ wordBreak: 'break-all', width: '100%' }}>\n                {datasetInfo.criteria && lineBreaker(datasetInfo.criteria)}\n              </p>\n            )}\n          </Form.Item>\n\n          <Form.Item label=\"Contact Information\">\n            {editMode ? (\n              <div>\n                <TextArea\n                  autoSize\n                  style={{ minHeight: 60 }}\n                  maxLength={100}\n                  defaultValue={datasetInfo.contact}\n                  onChange={(e) =>\n                    updateDatasetInfo('contact', _.trimStart(e.target.value))\n                  }\n                />\n                <span style={{ float: 'right' }}>{`${datasetUpdate.contact\n                  ? datasetUpdate.contact.length\n                  : 0\n                  }/100`}</span>\n              </div>\n            ) : (\n              <p style={{ wordBreak: 'break-all', width: '100%' }}>\n                {datasetInfo.contact && lineBreaker(datasetInfo.contact)}\n              </p>\n            )}\n          </Form.Item>\n\n          <Form.Item label=\"Primary Study Email\">\n            {editMode ? (\n              <div>\n                <Input\n                  style={emailValid.primaryEmail ? { width: 500 } : { width: 500, borderColor: 'red' } }\n                  className={!emailValid.primaryEmail && styles.antInput}\n                  defaultValue={datasetInfo.primaryEmail}\n                  onChange={(e) =>\n                    updateDatasetInfo('primaryEmail', _.trimStart(e.target.value))\n                  }\n                />\n                { !emailValid.primaryEmail && <p style={{ color: 'red', marginLeft: 5, marginTop: 5 }}>Email format is not correct</p> }\n              </div>\n            ) : (\n              <a\n                href={`mailto:${datasetInfo.primaryEmail}`}\n                rel=\"noreferrer noopener\"\n                style={{\n                  paddingRight: '5px',\n                  wordBreak: 'break-all',\n                }}\n              >\n                {datasetInfo.primaryEmail}\n              </a>\n            )}\n          </Form.Item>\n\n\n          <Form.Item label=\"Principle Investigator Email Address\">\n            {editMode ? (\n              <div>\n                <Input\n                  style={emailValid.investigatorEmail ? { width: 500 } : { width: 500, borderColor: 'red' } }\n                  className={!emailValid.investigatorEmail && styles.antInput}\n                  defaultValue={datasetInfo.investigatorEmail}\n                  onChange={(e) =>\n                    updateDatasetInfo('investigatorEmail', _.trimStart(e.target.value))\n                  }\n                />\n                { !emailValid.investigatorEmail && <p style={{ color: 'red', marginLeft: 5, marginTop: 5 }}>Email format is not correct</p> }\n              </div>\n            ) : (\n              <a\n                href={`mailto:${datasetInfo.investigatorEmail}`}\n                rel=\"noreferrer noopener\"\n                style={{\n                  paddingRight: '5px',\n                  // color: '#595959',\n                  wordBreak: 'break-all',\n                }}\n              >\n                {datasetInfo.investigatorEmail}\n              </a>\n            )}\n          </Form.Item>\n\n          <Form.Item label=\"Description\">\n            {editMode ? (\n              <div>\n                <TextArea\n                  autoSize\n                  defaultValue={datasetInfo.description}\n                  onChange={(e) =>\n                    updateDatasetInfo('description', e.target.value)\n                  }\n                  style={{ minHeight: 100 }}\n                  maxLength={250}\n                />\n                <span style={{ float: 'right' }}>{`${datasetUpdate.description\n                  ? datasetUpdate.description.length\n                  : 0\n                  }/250`}</span>\n              </div>\n            ) : (\n              <p style={{ wordBreak: 'break-all' }}>\n                {datasetInfo.description && lineBreaker(datasetInfo.description)}\n              </p>\n            )}\n          </Form.Item>\n        </Form>\n      </div>\n    </div>\n  ) : null;\n}\nexport default withRouter(GeneralInfo);\n","import React, { useState, useEffect, } from 'react';\nimport _ from 'lodash';\nimport { useSelector } from 'react-redux';\nimport {\n    Radio,\n    Modal,\n    Button,\n    Space,\n    Select,\n    Switch,\n    Input,\n    Form,\n    message,\n    Checkbox,\n} from 'antd';\nimport styles from '../index.module.scss';\nimport { withRouter } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { getRedCapToken, updateRedCapToken } from '../../../../APIs';\n\nconst { Option } = Select;\nconst layout = {\n    labelCol: { span: 8 },\n    wrapperCol: { span: 16 },\n};\n\nfunction StudyConfig(props) {\n    const [form] = Form.useForm();\n\n    const [consentNameEditable, setConsentNameEditable] = useState(false);\n    const [emailNameEditable, setEmailNameEditable] = useState(false);\n    const [modelVisible, setModalVisible] = useState(false);\n    const [redCapToken, setRedCapToken] = useState(null);\n    const user = useSelector(state => state.user);\n    const datasetUpdate = props.datasetUpdate;\n    const { t } = useTranslation(['message']);\n\n    useEffect(() => {\n        getRedCapToken(props.currentStudy.id)\n            .then((res) => {\n                const { result } = res.data;\n                setRedCapToken(result.redap_token);\n            })\n    }, [props.currentStudy.id])\n\n    const onCancel = () => {\n        setModalVisible(false);\n        form.resetFields();\n    }\n\n    const onSubmit = () => {\n        const token = form.getFieldValue('token');\n        if (!token) message.error(t('message:config.settings.apiToken.required'));\n\n        updateRedCapToken(props.currentStudy.id, token)\n            .then((res) => {\n                if (res.status === 200) {\n                    setRedCapToken(token);\n                    setModalVisible(false);\n                    form.resetFields();\n                    message.success(t('message:config.settings.redCap.success'));\n                }\n            })\n    }\n\n    const onThirdPartyChange = (checkedValues) => {\n        props.updateDatasetInfo('thirdParty', checkedValues)\n    }\n\n    const thirdPartyOptions = [\n        { label: 'FitBit', value: 'FitBit' }, \n        { label: 'Withings', value: 'Withings' }, \n        { label: 'iHealth', value: 'iHealth' }, \n    ]\n\n    return (\n        <div style={{ padding: 20 }}>\n            <div\n                style={{ float: 'left', width: '749px', marginLeft: 6 }}\n            >\n                <div\n                    style={{\n                        display: 'inline-block',\n                    }}\n                >\n                    <b style={{ fontSize: 15 }}>Status</b>\n                    <p style={{ marginLeft: 20, marginTop: 10, fontSize: 15 }}>\n                        <Radio.Group\n                            onChange={(e) => {\n                                props.updateDatasetInfo('status', e.target.value)\n                            }}\n                            value={datasetUpdate.status}\n                            disabled={!props.editMode}\n                        >\n                            <Space direction=\"vertical\">\n                                <Radio value=\"dev\"><b>Development</b></Radio>\n                                <p style={{ marginLeft: 30, fontSize: 12 }}>All Patient Data Gateway containers are created in Development mode where Container Admin are able to setup the study and test features with mock data.</p>\n                                <Radio value=\"prod\"><b>Production</b></Radio>\n                                <p style={{ marginLeft: 30, fontSize: 12 }}>Move the container into Production when you have chosen an Enrollment Workflow and are ready to begin data collection.</p>\n                                <Radio value=\"closed\"><b>Closed</b></Radio>\n                                <p style={{ marginLeft: 30, fontSize: 12 }}>When you are finished with the container, change the status to Closed. All access by Researcher Members and Patients will be suspended and Container Admin access will be read-only.</p>\n                            </Space>\n                        </Radio.Group>\n                    </p>\n\n                    <b style={{ fontSize: 15, marginTop: 15 }}>Enrollment Workflow</b>\n                    <p style={{ marginLeft: 30, marginTop: 10 }}>\n                        <Select defaultValue=\"1\" className={styles.menu} disabled={!props.editMode}>\n                            <Option value=\"1\">\n                                Public Enrollment\n                            </Option>\n                            <Option value=\"2\">\n                                Invitation-based Enrollment\n                            </Option>\n                        </Select>\n                    </p>\n                    <p style={{ marginLeft: 30, marginTop: 10 }}>\n                        <Switch\n                            defaultChecked={props.datasetInfo && props.datasetInfo.recruitment}\n                            disabled={!props.editMode}\n                            checkedChildren=\"on\"\n                            unCheckedChildren=\"off\"\n                            onChange={(checked, e) =>\n                                props.updateDatasetInfo('recruitment', checked)\n                            }\n                        />\n                        <b style={{ fontSize: 14, marginLeft: 10 }}>\n                            Recruitment:\n                            {\n                                datasetUpdate.recruitment ? 'ON' : 'OFF'\n                            }\n                        </b>\n                        <p style={{ marginLeft: 54 }}>\n                            {\n                                datasetUpdate.recruitment ? 'Enrollment button is functional and visible on the Study Splash Page.'\n                                    : 'Enrollment button is not visible on the Study Splash Page.'\n                            }\n                        </p>\n                    </p>\n\n                    <b style={{ fontSize: 15, marginTop: 15 }}>Study Splash Page</b>\n                    <p style={{ marginLeft: 30, marginTop: 10 }}>\n                        <Switch\n                            defaultChecked={props.datasetInfo && props.datasetInfo.discoverable}\n                            disabled={!props.editMode}\n                            checkedChildren=\"on\"\n                            unCheckedChildren=\"off\"\n                            onChange={(checked, e) =>\n                                props.updateDatasetInfo('discoverable', checked)\n                            }\n                        />\n                        <b style={{ fontSize: 14, marginLeft: 10 }}>\n                            Public Visibility:\n                            {\n                                datasetUpdate.discoverable ? 'ON' : 'OFF'\n                            }\n                        </b>\n                        <p style={{ marginLeft: 54 }}>\n                            {datasetUpdate.discoverable ?\n                                'All site visitors are able to access the page and view the contents.' :\n                                'Site visitors are unable to access the page and view the contents. Only study members and participants will be able to view the page.'\n                            }\n                        </p>\n                    </p>\n\n                    <b style={{ fontSize: 15, marginTop: 15 }}>REDCap Project Setup</b>\n                    <p style={{ marginLeft: 30, marginTop: 10 }}>\n                        <b style={{ fontSize: 14, marginLeft: 10 }}>API Token</b>\n                        <p>\n                            <Input\n                                className={styles.input}\n                                disabled\n                                type=\"password\"\n                                value={redCapToken}\n                            />\n                            <Button\n                                style={{ marginLeft: 10, borderRadius: 15, border: '1px solid' }}\n                                onClick={() => setModalVisible(true)}\n                                disabled={!props.editMode}\n                            >\n                                Replace Token\n                            </Button>\n                        </p>\n\n                        <p style={{ fontSize: 14, marginTop: 25 }}>\n                            <Switch\n                                defaultChecked={props.datasetInfo && props.datasetInfo.useEconsent}\n                                disabled={!props.editMode}\n                                checkedChildren=\"on\"\n                                unCheckedChildren=\"off\"\n                                onChange={(checked, e) =>\n                                    props.updateDatasetInfo('useEconsent', checked)\n                                }\n                            />\n                            <b style={{ fontSize: 14, marginLeft: 10 }}>\n                                Study uses eConsent:\n                                {\n                                    datasetUpdate.useEconsent ? 'ON' : 'OFF'\n                                }\n                            </b>\n                            <p style={{ marginLeft: 54 }}>\n                                {datasetUpdate.useEconsent ?\n                                    'The study is connected with REDCap eConsent survey.' :\n                                    'The study is not connected with REDCap eConsent survey.'\n                                }\n                            </p>\n                            {\n                                datasetUpdate.useEconsent ? (\n                                    <div>\n                                        <b style={{ fontSize: 14, marginLeft: 10, marginTop: 20 }}>Econsent Survey Indentifier</b>\n                                        <p>\n                                            <Input\n                                                className={styles.input}\n                                                disabled={!props.editMode}\n                                                defaultValue={datasetUpdate.eConsentIdentifier}\n                                                onChange={(e) => {\n                                                    props.updateDatasetInfo('eConsentIdentifier', e.target.value)\n                                                }}\n                                            />\n                                        </p>\n                                    </div>\n                                ) : null\n                            }\n                        </p>\n\n\n                        <b style={{ fontSize: 14, marginLeft: 10, marginTop: 20 }}>Consent Form Name</b>\n                        <p>\n                            <Input\n                                className={styles.input}\n                                // disabled={!consentNameEditable}\n                                disabled={!props.editMode}\n                                defaultValue={datasetUpdate.eConsentFormName}\n                                onChange={(e) => {\n                                    props.updateDatasetInfo('eConsentFormName', e.target.value)\n                                }}\n                            />\n                        </p>\n                        <b style={{ fontSize: 14, marginLeft: 10, marginTop: 20 }}>Survey Email Field Name</b>\n                        <p>\n                            <Input\n                                className={styles.input}\n                                // disabled={!emailNameEditable}\n                                disabled={!props.editMode}\n                                defaultValue={datasetUpdate.eConsentEmailFieldName}\n                                onChange={(e) => {\n                                    props.updateDatasetInfo('eConsentEmailFieldName', e.target.value)\n                                }}\n                            />\n                        </p>\n                    </p>\n                    \n                    {\n                        user.role === 'instance-admin' && (\n                            <div>\n                                <b style={{ fontSize: 15, marginTop: 15 }}>Third-party Integrations</b>\n                                <p>\n                                    <p style={{ marginLeft: 30, fontSize: 12 }}>\n                                        select a third-party application to enable authorization through Patient External Identity Management\n                                    </p>\n\n                                    <Checkbox.Group \n                                        className={styles.custom_checkbox} \n                                        options={thirdPartyOptions} \n                                        onChange={onThirdPartyChange} \n                                        style={{ marginLeft: 40, }}\n                                        disabled={!props.editMode}\n                                        defaultValue={datasetUpdate.thirdParty}\n                                    />\n                                </p>\n                            </div>\n                        )\n                    }\n                </div>\n            </div>\n            <Modal\n                visible={modelVisible}\n                title=\"REDCap Project Setup\"\n                onCancel={onCancel}\n                footer={[\n                    <Button key=\"back\" onClick={onCancel} type=\"danger\">Cancel</Button>,\n                    <Button key=\"submit\" type=\"primary\" onClick={onSubmit}>Submit</Button>\n                ]}\n                width={550}\n            >\n                <Form\n                    form={form}\n                    {...layout}\n                    initialValues={{ oldToken: redCapToken }}\n                >\n                    <Form.Item\n                        label=\"Old API Token\"\n                        name=\"oldToken\"\n                    >\n                        <Input disabled />\n                    </Form.Item>\n\n                    <Form.Item\n                        label=\"API Token\"\n                        name=\"token\"\n                        rules={[{ required: true, message: 'Please input API Token!' }]}\n                    >\n                        <Input />\n                    </Form.Item>\n                </Form>\n            </Modal>\n        </div>\n    )\n}\n\nexport default withRouter(StudyConfig);","export const MANIFEST_ATTR_TYPE = {\n  MULTIPLE_CHOICE: 'multiple_choice',\n  TEXT: 'text',\n};\n","const trimString = (str) => {\n  return str.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n};\n\nexport function validateManifestName(manifestName, manifestList) {\n  if (!manifestName) {\n    return {\n      valid: false,\n      err: `Please input attribute template name`,\n    };\n  }\n  let manifestNameTrim = trimString(manifestName);\n  const specialChars = ['\\\\', '/', ':', '?', '*', '<', '>', '|', '\"', \"'\"];\n  if (manifestNameTrim.length === 0 || manifestNameTrim.length > 32) {\n    return {\n      valid: false,\n      err: 'Attribute template name must be between 1 and 32 characters',\n    };\n  }\n  for (let char of specialChars) {\n    if (manifestNameTrim.indexOf(char) !== -1) {\n      return {\n        valid: false,\n        err: \"Attribute template name can not contain any of the following characters \\\\ / : ? * < > | \\\" '\"\n      };\n    }\n  }\n  const duplicate = manifestList.find((v) => v.name === manifestNameTrim);\n  if (duplicate) {\n    return {\n      valid: false,\n      err: 'An attribute template with this name already exists in this project'\n    };\n  }\n  return {\n    valid: true,\n    err: null,\n  };\n}\n\nexport function validateAttributeName(attributeName, otherAttrs) {\n  if (!attributeName) {\n    return {\n      valid: false,\n      err: 'Please input attribute name'\n    };\n  }\n\n  let attributeNameTrim = trimString(attributeName);\n  if (!attributeNameTrim) {\n    return {\n      valid: false,\n      err: 'Please input attribute name'\n    };\n  }\n\n  if (attributeNameTrim.length === 0 || attributeNameTrim.length > 32) {\n    return {\n      valid: false,\n      err: 'Attribute name must be between 1 and 32 characters'\n    };\n  }\n\n  if (!/^[A-Za-z0-9 ]+$/i.test(attributeNameTrim)) {\n    return {\n      valid: false,\n      err: 'Only letters, numbers and space is allowed for attribute name',\n    };\n  }\n\n  const existentAttr = otherAttrs.find((x) => x.name === attributeNameTrim);\n  if (existentAttr) {\n    return {\n      valid: false,\n      err: 'This name has already been defined in attribute template',\n    };\n  }\n\n  return {\n    valid: true,\n    err: null,\n  };\n}\n\nexport function validateAttrValue(attributeVal) {\n  if (!attributeVal) {\n    return {\n      valid: false,\n      err: 'Value must be between 1 and 32 characters',\n    };\n  }\n  let attributeValTrim = trimString(attributeVal);\n  if (attributeValTrim.length === 0 || attributeValTrim.length > 250) {\n    return {\n      valid: false,\n      err: 'Value must be between 1 and 250 characters',\n    };\n  }\n  // if (!/^[A-Za-z0-9_!%&/()=?*+#.;-]+$/i.test(attributeValTrim)) {\n  //   return {\n  //     valid: false,\n  //     err: \"Value may only contain letters, numbers, and/or special characters in ( -_!%&/()=?*+#.;)\",\n  //   };\n  // }\n  return {\n    valid: true,\n    err: null,\n  };\n}\n","import React, { useState } from \"react\";\nimport { CheckOutlined, CloseOutlined } from \"@ant-design/icons\";\nimport { useTranslation } from \"react-i18next\";\nimport { Button, Tag, Input, Select, message, Checkbox, Form } from \"antd\";\nimport { MANIFEST_ATTR_TYPE } from \"../manifest.values\";\nimport { setAttributes, getContainers } from \"../../../../../APIs\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { updateAttrOrder, setAllStudies } from \"../../../../../Redux/actions\";\nimport {\n\tvalidateAttributeName,\n\tvalidateAttrValue,\n} from \"../../Utils/FormatValidators\";\nimport styles from \"../../index.module.scss\";\nfunction attrType(type) {\n\tswitch (type) {\n\t\tcase MANIFEST_ATTR_TYPE.MULTIPLE_CHOICE:\n\t\t\treturn \"Multiple Choice\";\n\t\tcase MANIFEST_ATTR_TYPE.TEXT:\n\t\t\treturn \"Text\";\n\t\tdefault: {\n\t\t}\n\t}\n\treturn \"\";\n}\nconst { Option } = Select;\nfunction AttrAddBar(props) {\n\tconst [attrName, setAttrName] = useState(null);\n\tconst [type, setType] = useState(MANIFEST_ATTR_TYPE.MULTIPLE_CHOICE);\n\tconst [value, setValue] = useState(null);\n\tconst [loading, setLoading] = useState(false);\n\tconst [errorMsg4Val, setErrorMsg4Val] = useState(null);\n\tconst [errorMsg4Name, setErrorMsg4Name] = useState(null);\n\tconst { t } = useTranslation([\"message\"]);\n\tconst { attrsOrder } = useSelector(state => state.studyAttributes);\n\tconst dispatch = useDispatch();\n\n\treturn (\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<Form.Item\n\t\t\t\t\t{...(errorMsg4Name && {\n\t\t\t\t\t\tvalidateStatus: \"error\",\n\t\t\t\t\t\thelp: errorMsg4Name,\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t<Input\n\t\t\t\t\t\tvalue={attrName}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tsetAttrName(e.target.value);\n\t\t\t\t\t\t\tconst { valid, err } = validateAttributeName(\n\t\t\t\t\t\t\t\te.target.value,\n\t\t\t\t\t\t\t\tprops.attributes,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (!valid) {\n\t\t\t\t\t\t\t\tsetErrorMsg4Name(err);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsetErrorMsg4Name(null);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</Form.Item>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<Select\n\t\t\t\t\tdefaultValue=\"Multiple Choice\"\n\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\tsetType(e);\n\t\t\t\t\t}}\n\t\t\t\t\tstyle={{ width: \"100%\" }}\n\t\t\t\t>\n\t\t\t\t\t{Object.keys(MANIFEST_ATTR_TYPE).map((mkey) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Option key={mkey} value={MANIFEST_ATTR_TYPE[mkey]}>\n\t\t\t\t\t\t\t\t{attrType(MANIFEST_ATTR_TYPE[mkey])}\n\t\t\t\t\t\t\t</Option>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</Select>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t{type === MANIFEST_ATTR_TYPE.MULTIPLE_CHOICE ? (\n\t\t\t\t\t<Form.Item\n\t\t\t\t\t\t{...(errorMsg4Val && {\n\t\t\t\t\t\t\tvalidateStatus: \"error\",\n\t\t\t\t\t\t\thelp: errorMsg4Val,\n\t\t\t\t\t\t})}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tmode=\"tags\"\n\t\t\t\t\t\t\tdefaultValue={[]}\n\t\t\t\t\t\t\tonChange={(value) => {\n\t\t\t\t\t\t\t\tsetValue(value);\n\t\t\t\t\t\t\t\tfor (let vitem of value) {\n\t\t\t\t\t\t\t\t\tlet { valid, err } =\n\t\t\t\t\t\t\t\t\t\tvalidateAttrValue(vitem);\n\t\t\t\t\t\t\t\t\tif (!valid) {\n\t\t\t\t\t\t\t\t\t\tsetErrorMsg4Val(err);\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tsetErrorMsg4Val(null);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName={styles.custom_select_tag}\n\t\t\t\t\t\t\ttagRender={(props) => {\n\t\t\t\t\t\t\t\tconst { label } = props;\n\t\t\t\t\t\t\t\tconst { valid } = validateAttrValue(label);\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Tag\n\t\t\t\t\t\t\t\t\t\t{...props}\n\t\t\t\t\t\t\t\t\t\tcolor={valid ? \"default\" : \"error\"}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t\t\t\t</Tag>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t></Select>\n\t\t\t\t\t</Form.Item>\n\t\t\t\t) : null}\n\t\t\t\t{type === MANIFEST_ATTR_TYPE.TEXT ? (\n\t\t\t\t\t<Form.Item\n\t\t\t\t\t\t{...(errorMsg4Val && {\n\t\t\t\t\t\t\tvalidateStatus: \"error\",\n\t\t\t\t\t\t\thelp: errorMsg4Val,\n\t\t\t\t\t\t})}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\tsetValue(e.target.value);\n\t\t\t\t\t\t\t\tconst { valid, err } = validateAttrValue(\n\t\t\t\t\t\t\t\t\te.target.value,\n\t\t\t\t\t\t\t\t\tprops.attributes,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tif (!valid) {\n\t\t\t\t\t\t\t\t\tsetErrorMsg4Name(err);\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tsetErrorMsg4Name(null);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Form.Item>\n\t\t\t\t) : null}\n\t\t\t</td>\n\t\t\t<td></td>\n\t\t\t<td>\n\t\t\t\t<Button\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tborder: 0,\n\t\t\t\t\t\toutline: 0,\n\t\t\t\t\t\tcolor: \"#5B8C00\",\n\t\t\t\t\t\tboxShadow: \"none\",\n\t\t\t\t\t\tbackground: \"none\",\n\t\t\t\t\t}}\n\t\t\t\t\ticon={<CheckOutlined />}\n\t\t\t\t\tloading={loading}\n\t\t\t\t\tonClick={async (e) => {\n\t\t\t\t\t\tconst { valid, err } = validateAttributeName(\n\t\t\t\t\t\t\tattrName,\n\t\t\t\t\t\t\tprops.attributes,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (!valid) {\n\t\t\t\t\t\t\tmessage.error(err);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (errorMsg4Val) {\n\t\t\t\t\t\t\tmessage.error(\n\t\t\t\t\t\t\t\t`${t(\"message:config.attribute.error\")}`,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\ttype === MANIFEST_ATTR_TYPE.MULTIPLE_CHOICE &&\n\t\t\t\t\t\t\t(!value || value.length === 0)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tmessage.error(\n\t\t\t\t\t\t\t\tt(\n\t\t\t\t\t\t\t\t\t\"message:config.attribute.multipleChoice.empty\",\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetLoading(true);\n\t\t\t\t\t\tlet valueNew = value;\n\n\t\t\t\t\t\tconst currentStudy = props.currentStudy;\n\t\t\t\t\t\tconst attrName2 = attrName.replaceAll(\" \", \"_\");\n\t\t\t\t\t\tcurrentStudy[`attr_${attrName2}`] = valueNew;\n\t\t\t\t\t\tdispatch(updateAttrOrder(`attr_${attrName2}`));\n\t\t\t\t\t\tcurrentStudy.attrs_order = [\n\t\t\t\t\t\t\t...attrsOrder,\n\t\t\t\t\t\t\t`attr_${attrName2}`,\n\t\t\t\t\t\t];\n\t\t\t\t\t\tdelete currentStudy.time_lastmodified;\n\t\t\t\t\t\tawait setAttributes(currentStudy.id, currentStudy);\n\n\t\t\t\t\t\tawait props.loadManifest();\n\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t\tprops.setEditMode(\"default\");\n\n\t\t\t\t\t\t/* const res2 = await getPublicStudies();\n\t\t\t\t\t\tdispatch(setPublicStudies(res2.data.result)); */\n\n\t\t\t\t\t\tconst containersResult = await getContainers();\n\t\t\t\t\t\tconst containers = containersResult?.data?.result?.node;\n\t\t\t\t\t\tconst studiesArr = containers.filter((item) => {\n\t\t\t\t\t\t\tif (item.labels[0] === \"study\") return { item };\n\t\t\t\t\t\t});\n\t\t\t\t\t\tdispatch(setAllStudies(studiesArr));\n\t\t\t\t\t}}\n\t\t\t\t></Button>\n\t\t\t\t<Button\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tborder: 0,\n\t\t\t\t\t\toutline: 0,\n\t\t\t\t\t\tcolor: \"#FF6D72\",\n\t\t\t\t\t\tboxShadow: \"none\",\n\t\t\t\t\t\tbackground: \"none\",\n\t\t\t\t\t}}\n\t\t\t\t\ticon={<CloseOutlined />}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tsetAttrName(null);\n\t\t\t\t\t\tsetValue(null);\n\t\t\t\t\t\tsetType(MANIFEST_ATTR_TYPE.MULTIPLE_CHOICE);\n\t\t\t\t\t\tsetErrorMsg4Val(null);\n\t\t\t\t\t\tprops.setEditMode(\"default\");\n\t\t\t\t\t}}\n\t\t\t\t></Button>\n\t\t\t</td>\n\t\t</tr>\n\t);\n}\n\nexport default AttrAddBar;\n","import React, { useState } from \"react\";\nimport {\n\tCheckOutlined,\n\tCloseOutlined,\n\tArrowDownOutlined,\n\tArrowUpOutlined,\n} from \"@ant-design/icons\";\nimport { useTranslation } from \"react-i18next\";\nimport { Button, Tag, Input, Select, message, Checkbox, Form } from \"antd\";\nimport { MANIFEST_ATTR_TYPE } from \"../manifest.values\";\nimport { setAttributes } from \"../../../../../APIs\";\nimport {\n\tvalidateAttributeName,\n\tvalidateAttrValue,\n} from \"../../Utils/FormatValidators\";\nimport styles from \"../../index.module.scss\";\nfunction attrType(type) {\n\tswitch (type) {\n\t\tcase MANIFEST_ATTR_TYPE.MULTIPLE_CHOICE:\n\t\t\treturn \"Multiple Choice\";\n\t\tcase MANIFEST_ATTR_TYPE.TEXT:\n\t\t\treturn \"Text\";\n\t\tdefault: {\n\t\t}\n\t}\n\treturn \"\";\n}\nconst { Option } = Select;\nfunction AttrEditBar(props) {\n\tconst [attrName, setAttrName] = useState(props.currentAttribute.name);\n\tconst [type, setType] = useState(props.currentAttribute.type);\n\tconst [value, setValue] = useState(props.currentAttribute.value);\n\tconst [loading, setLoading] = useState(false);\n\tconst [errorMsg4Val, setErrorMsg4Val] = useState(null);\n\tconst [errorMsg4Name, setErrorMsg4Name] = useState(null);\n\tconst { t } = useTranslation([\"message\"]);\n\n\treturn (\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<Form.Item\n\t\t\t\t\t{...(errorMsg4Name && {\n\t\t\t\t\t\tvalidateStatus: \"error\",\n\t\t\t\t\t\thelp: errorMsg4Name,\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t<Input\n\t\t\t\t\t\tvalue={attrName}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tsetAttrName(e.target.value);\n\t\t\t\t\t\t\tconst { valid, err } = validateAttributeName(\n\t\t\t\t\t\t\t\te.target.value,\n\t\t\t\t\t\t\t\tprops.attributes,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (!valid) {\n\t\t\t\t\t\t\t\tsetErrorMsg4Name(err);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsetErrorMsg4Name(null);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</Form.Item>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<Select\n\t\t\t\t\tdefaultValue={attrType(type)}\n\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\tsetType(e);\n\t\t\t\t\t}}\n\t\t\t\t\tstyle={{ width: \"100%\" }}\n\t\t\t\t>\n\t\t\t\t\t{Object.keys(MANIFEST_ATTR_TYPE).map((mkey) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Option key={mkey} value={MANIFEST_ATTR_TYPE[mkey]}>\n\t\t\t\t\t\t\t\t{attrType(MANIFEST_ATTR_TYPE[mkey])}\n\t\t\t\t\t\t\t</Option>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</Select>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t{type === MANIFEST_ATTR_TYPE.MULTIPLE_CHOICE ? (\n\t\t\t\t\t<Form.Item\n\t\t\t\t\t\t{...(errorMsg4Val && {\n\t\t\t\t\t\t\tvalidateStatus: \"error\",\n\t\t\t\t\t\t\thelp: errorMsg4Val,\n\t\t\t\t\t\t})}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tmode=\"tags\"\n\t\t\t\t\t\t\tdefaultValue={[]}\n\t\t\t\t\t\t\tonChange={(value) => {\n\t\t\t\t\t\t\t\tsetValue(value);\n\t\t\t\t\t\t\t\tfor (let vitem of value) {\n\t\t\t\t\t\t\t\t\tlet { valid, err } =\n\t\t\t\t\t\t\t\t\t\tvalidateAttrValue(vitem);\n\t\t\t\t\t\t\t\t\tif (!valid) {\n\t\t\t\t\t\t\t\t\t\tsetErrorMsg4Val(err);\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tsetErrorMsg4Val(null);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName={styles.custom_select_tag}\n\t\t\t\t\t\t\ttagRender={(props) => {\n\t\t\t\t\t\t\t\tconst { label } = props;\n\t\t\t\t\t\t\t\tconst { valid } = validateAttrValue(label);\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Tag\n\t\t\t\t\t\t\t\t\t\t{...props}\n\t\t\t\t\t\t\t\t\t\tcolor={valid ? \"default\" : \"error\"}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t\t\t\t</Tag>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t></Select>\n\t\t\t\t\t</Form.Item>\n\t\t\t\t) : null}\n\t\t\t\t{type === MANIFEST_ATTR_TYPE.TEXT ? (\n\t\t\t\t\t<Form.Item\n\t\t\t\t\t\t{...(errorMsg4Val && {\n\t\t\t\t\t\t\tvalidateStatus: \"error\",\n\t\t\t\t\t\t\thelp: errorMsg4Val,\n\t\t\t\t\t\t})}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tdefaultValue={value}\n\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\tsetValue(e.target.value);\n\t\t\t\t\t\t\t\tconst { valid, err } = validateAttrValue(\n\t\t\t\t\t\t\t\t\te.target.value,\n\t\t\t\t\t\t\t\t\tprops.attributes,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tif (!valid) {\n\t\t\t\t\t\t\t\t\tsetErrorMsg4Name(err);\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tsetErrorMsg4Name(null);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Form.Item>\n\t\t\t\t) : null}\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<ArrowUpOutlined\n\t\t\t\t\tstyle={{ marginRight: 10 }}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tprops.moveUp(props.currentAttribute);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\n\t\t\t\t<ArrowDownOutlined\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tprops.moveDown(props.currentAttribute);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t{/* <Button\n          style={{ border: 0, outline: 0, color: \"#5B8C00\", boxShadow: \"none\", background: \"none\" }}\n          icon={<CheckOutlined />}\n          loading={loading}\n          onClick={async (e) => {\n            const { valid, err } = validateAttributeName(\n              attrName,\n              props.attributes,\n            );\n            if (!valid) {\n              message.error(err);\n              return;\n            }\n            if (errorMsg4Val) {\n              message.error(\n                `${t(\n                  'message:config.attribute.error',\n                )}`,\n              );\n              return;\n            }\n            if (\n              type === MANIFEST_ATTR_TYPE.MULTIPLE_CHOICE &&\n              (!value || value.length === 0)\n            ) {\n              message.error(\n                t(\n                  'message:config.attribute.multipleChoice.empty',\n                )\n              );\n              return;\n            }\n            setLoading(true);\n            let valueNew = value;\n\n            const currentStudy = props.currentStudy;\n            const attrName2 = attrName.replaceAll(' ', '_')\n            currentStudy[`attr_${attrName2}`] = valueNew;\n\n            delete currentStudy.time_lastmodified;\n            await setAttributes(currentStudy.id, currentStudy);\n\n            await props.loadManifest();\n            setLoading(false);\n            props.setEditMode('default');\n          }}\n        >\n        </Button>*/}\n\t\t\t</td>\n\t\t</tr>\n\t);\n}\n\nexport default AttrEditBar;\n","import React, { useState, useEffect } from \"react\";\nimport {\n\tPlusOutlined,\n\tExclamationCircleOutlined,\n\tArrowUpOutlined,\n\tArrowDownOutlined,\n} from \"@ant-design/icons\";\nimport { Button, Tag, Checkbox, Modal, Select } from \"antd\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setAttrOrder } from \"../../../../../Redux/actions\";\nimport styles from \"../../index.module.scss\";\nimport { MANIFEST_ATTR_TYPE } from \"../manifest.values\";\nimport AttrAddBar from \"./AttrAddBar\";\nimport AttrEditBar from \"./AttrEditBar\";\nimport { deleteAttribute } from \"../../../../../APIs\";\nimport { lineBreaker } from \"../../../../../Utility\";\nimport { v4 as uuidv4 } from \"uuid\";\nconst { confirm } = Modal;\n\nfunction FileManifestExistentTable(props) {\n\tconst mItem = props.mItem;\n\tconst configEditMode = props.configEditMode;\n\tconst tableColumns = [\"Attribute Name\", \"Type\", \"Value\", \"Optional\"];\n\tconst [editMode, setEditMode] = useState(\"default\");\n\tconst { attrsOrder: attributesOrder} = useSelector((state) => state.studyAttributes);\n\tconst [tableKey, setTableKey] = useState(uuidv4());\n\tconst attrsOrderOrigin = props.currentStudy?.attrs_order\n\t\t? props.currentStudy?.attrs_order\n\t\t: props.mItem.attributes.map((attrItem) => \"attr_\" + attrItem.key);\n\tconst dispatch = useDispatch();\n\n\tuseEffect(() => {\n\t\tdispatch(setAttrOrder(attrsOrderOrigin)); \n\t}, [])\n\t\n\tfunction attrType(type) {\n\t\tswitch (type) {\n\t\t\tcase MANIFEST_ATTR_TYPE.MULTIPLE_CHOICE:\n\t\t\t\treturn \"Multiple Choice\";\n\t\t\tcase MANIFEST_ATTR_TYPE.TEXT:\n\t\t\t\treturn \"Text\";\n\t\t\tdefault: {\n\t\t\t}\n\t\t}\n\t\treturn \"\";\n\t}\n\n\tconst onConfirm = async (item) => {\n\t\tconst res = await deleteAttribute(item.studyId, `attr_${item.key}`);\n\t\tawait props.loadManifest();\n\t};\n\n\tfunction showDeleteConfirm(item) {\n\t\tconfirm({\n\t\t\ttitle: \"Confirm deletion\",\n\t\t\ticon: <ExclamationCircleOutlined />,\n\t\t\tcontent: `Are you sure delete attribute \"${item.name}\"?`,\n\t\t\tokText: \"Yes\",\n\t\t\tokType: \"danger\",\n\t\t\tcancelText: \"No\",\n\t\t\tonOk() {\n\t\t\t\tonConfirm(item);\n\t\t\t},\n\t\t\tonCancel() {\n\t\t\t\tconsole.log(\"Cancel\");\n\t\t\t},\n\t\t});\n\t}\n\n\tfunction moveUp(item) {\n\t\tconst curPos = attributesOrder.indexOf(\"attr_\" + item.key);\n\t\tif (curPos === 0) return;\n\t\tconst orderCopy = [\n\t\t\t...attributesOrder.filter((attr) => attr !== \"attr_\" + item.key),\n\t\t];\n\t\torderCopy.splice(curPos - 1, 0, \"attr_\" + item.key);\n\t\t//setAttrsOrder(orderCopy);\n\t\tdispatch(setAttrOrder(orderCopy));\n\t\tsetTableKey(uuidv4());\n\t}\n\tfunction moveDown(item) {\n\t\tconst curPos = attributesOrder.indexOf(\"attr_\" + item.key);\n\t\tif (curPos === attributesOrder.length - 1) return;\n\t\tconst orderCopy = [\n\t\t\t...attributesOrder.filter((attr) => attr !== \"attr_\" + item.key),\n\t\t];\n\t\torderCopy.splice(curPos + 1, 0, \"attr_\" + item.key);\n\t\t//setAttrsOrder(orderCopy);\n\t\tdispatch(setAttrOrder(orderCopy));\n\t\tsetTableKey(uuidv4());\n\t}\n\n\tlet tableContent = [];\n\tlet attrsList = mItem.attributes;\n\tif (attributesOrder) {\n\t\tattrsList = attrsList.sort((a, b) => {\n\t\t\treturn (\n\t\t\t\tattributesOrder.indexOf(\"attr_\" + a.key) -\n\t\t\t\tattributesOrder.indexOf(\"attr_\" + b.key)\n\t\t\t);\n\t\t});\n\t}\n\t//console.log(attrsList);\n\tif (!configEditMode) {\n\t\ttableContent = attrsList.map((item) => {\n\t\t\treturn (\n\t\t\t\t<tr key={mItem.id + \"-\" + item.id}>\n\t\t\t\t\t<td>{item.name}</td>\n\t\t\t\t\t<td>{attrType(item.type)}</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t{item.value &&\n\t\t\t\t\t\titem.type === MANIFEST_ATTR_TYPE.MULTIPLE_CHOICE\n\t\t\t\t\t\t\t? item.value.split(\",\").map((v, vInd) => {\n\t\t\t\t\t\t\t\t\treturn <Tag key={vInd}>{v}</Tag>;\n\t\t\t\t\t\t\t  })\n\t\t\t\t\t\t\t: item.value && lineBreaker(item.value)}\n\t\t\t\t\t</td>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<a onClick={() => showDeleteConfirm(item)}>Delete</a>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t);\n\t\t});\n\t} else {\n\t\ttableContent = attrsList.map((item, i) => (\n\t\t\t<AttrEditBar\n\t\t\t\tkey={`add-bar-end-step2-${i}`}\n\t\t\t\tmanifestID={mItem.id}\n\t\t\t\tattributes={attrsList}\n\t\t\t\tsetEditMode={setEditMode}\n\t\t\t\tloadManifest={props.loadManifest}\n\t\t\t\ttableColumns={tableColumns}\n\t\t\t\tcurrentStudy={props.currentStudy}\n\t\t\t\tcurrentAttribute={item}\n\t\t\t\tmoveDown={moveDown}\n\t\t\t\tmoveUp={moveUp}\n\t\t\t/>\n\t\t));\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<table className={styles.manifest_table} key={tableKey}>\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th style={{ width: 180 }}>Attribute Name</th>\n\t\t\t\t\t\t<th style={{ width: 180 }}>Type</th>\n\t\t\t\t\t\t<th>Value</th>\n\t\t\t\t\t\t<th style={{ width: 120 }}></th>\n\t\t\t\t\t\t<th style={{ width: 120 }}>Actions</th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t{tableContent}\n\n\t\t\t\t\t{editMode === \"add\" ? (\n\t\t\t\t\t\t<AttrAddBar\n\t\t\t\t\t\t\tkey=\"add-bar-end-step2\"\n\t\t\t\t\t\t\tmanifestID={mItem.id}\n\t\t\t\t\t\t\tattributes={mItem.attributes}\n\t\t\t\t\t\t\tsetEditMode={setEditMode}\n\t\t\t\t\t\t\tloadManifest={props.loadManifest}\n\t\t\t\t\t\t\ttableColumns={tableColumns}\n\t\t\t\t\t\t\tcurrentStudy={props.currentStudy}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<tr key=\"add-bar-end-step1\">\n\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\ttextAlign: \"center\",\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tcolSpan={5}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tclassName={styles.button}\n\t\t\t\t\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\t\t\t\t\ticon={<PlusOutlined />}\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\t\tsetEditMode(\"add\");\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tdisabled={configEditMode}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tAdd Attribute\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t)}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</>\n\t);\n}\nexport default FileManifestExistentTable;\n","import React, { useState } from 'react';\nimport {\n  EditOutlined,\n  DeleteOutlined,\n  DownloadOutlined,\n  SaveOutlined,\n  RedoOutlined,\n  ExportOutlined,\n} from '@ant-design/icons';\nimport { Button, Input, Modal, message } from 'antd';\n// import { deleteManifest, updateManifest } from '../../../../../../../APIs';\nimport FileManifestExistentTable from './FileManifestExistentTable';\nimport { validateManifestName } from '../../Utils/FormatValidators';\nimport styles from '../../index.module.scss';\nfunction FileManifestItem(props) {\n  const [deleteModalVisible, setDeleteModalVisible] = useState(false);\n\n  let mItem = props.manifestList.find((v) => v.id === props.manifestID);\n\n  const deleteConfirm = (\n    <Modal\n      title=\"Delete Attribute Template\"\n      visible={deleteModalVisible}\n      onOk={async () => {\n        setDeleteModalVisible(false);\n      }}\n      onCancel={() => setDeleteModalVisible(false)}\n    >\n      <p>\n        Deleting attribute template is unrecoverable, are you sure you want to\n        proceed?\n      </p>\n    </Modal>\n  );\n\n  return (\n    <div key={mItem.id} className={styles.manifestList}>\n      <>\n        <b style={{ marginLeft: 24 }}>Study Attributes</b>\n      </>\n\n      <FileManifestExistentTable\n        mItem={mItem}\n        loadManifest={props.loadManifest}\n        currentStudy={props.currentStudy}\n        configEditMode={props.configEditMode}\n      ></FileManifestExistentTable>\n      {deleteConfirm}\n    </div>\n  );\n}\nexport default FileManifestItem;\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport {\n\tUploadOutlined,\n\tPlusOutlined,\n\tDownloadOutlined,\n} from \"@ant-design/icons\";\nimport { Button, Input, Modal, message, Upload, Form } from \"antd\";\nimport FileManifestItem from \"../Components/ManifestEdit/FileManifestItem\";\n\nimport { setAttributes, checkAttributes } from \"../../../../APIs\";\nimport _ from \"lodash\";\nimport { useTranslation } from \"react-i18next\";\n\nfunction StudyAttributes(props) {\n\tconst { t } = useTranslation([\"errormessages\", \"success\"]);\n\tconst [importModalVisible, setImportModalVisible] = useState(false);\n\tconst [manifestList, setManifestList] = useState([]);\n\tconst [btnLoading, setBtnLoading] = useState(false);\n\tconst [studyAttributes, setStudyAttributes] = useState([]);\n\tconst [currentStudy, setCurrentStudy] = useState({});\n\tconst [form] = Form.useForm();\n\tconst loadManifest = useCallback(async () => {\n\t\t// expected attributes in neo4j would be like \"attr_key1: value1(string | array)\"\n\t\tconst projectInfo = await checkAttributes(\n\t\t\tprops.currentStudy && props.currentStudy.id,\n\t\t);\n\t\tconst attrsOrder = props.currentStudy?.attrs_order;\n\t\tconst result = projectInfo.data.result;\n\n\t\tsetCurrentStudy(result);\n\n\t\tlet attributes = [];\n\t\tconst keys = Object.keys(result);\n\n\t\tfor (const key of keys) {\n\t\t\tconst value = result[key];\n\t\t\tif (key.startsWith(\"attr_\") && value) {\n\t\t\t\tattributes.push({\n\t\t\t\t\tname: key.slice(5).replaceAll(\"_\", \" \"),\n\t\t\t\t\ttype:\n\t\t\t\t\t\ttypeof value === \"string\" ? \"text\" : \"multiple_choice\",\n\t\t\t\t\tvalue: typeof value === \"string\" ? value : value.join(\",\"),\n\t\t\t\t\tstudyId: props.currentStudy.id,\n\t\t\t\t\tid: keys.indexOf(key),\n\t\t\t\t\tkey: key.slice(5),\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tif (attrsOrder) {\n\t\t\tattributes.sort((a, b) => {\n\t\t\t\treturn (\n\t\t\t\t\tattrsOrder.indexOf(\"attr_\" + a.key) -\n\t\t\t\t\tattrsOrder.indexOf(\"attr_\" + b.key)\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t\tconst fakeAttribute = [\n\t\t\t{\n\t\t\t\tid: props.currentStudy.id,\n\t\t\t\tname: \"File Attributes\",\n\t\t\t\tattributes,\n\t\t\t},\n\t\t];\n\t\tsetStudyAttributes(fakeAttribute);\n\t\tsetManifestList(fakeAttribute);\n\t}, [props.currentStudy && props.currentStudy.id]);\n\n\tuseEffect(() => {\n\t\tloadManifest();\n\t}, [loadManifest]);\n\n\treturn (\n\t\t<>\n\t\t\t{manifestList.length\n\t\t\t\t? manifestList.map((mItem) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<FileManifestItem\n\t\t\t\t\t\t\t\tkey={mItem.id}\n\t\t\t\t\t\t\t\tmanifestID={mItem.id}\n\t\t\t\t\t\t\t\tmanifestList={manifestList}\n\t\t\t\t\t\t\t\tloadManifest={loadManifest}\n\t\t\t\t\t\t\t\tcurrentStudy={currentStudy}\n\t\t\t\t\t\t\t\tconfigEditMode={props.configEditMode}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t  })\n\t\t\t\t: null}\n\t\t</>\n\t);\n}\n\nexport default StudyAttributes;\n","import React, { useState, useEffect } from \"react\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Typography, Card, Tabs, Layout, Button, message } from \"antd\";\nimport { EditOutlined, SaveOutlined } from \"@ant-design/icons\";\nimport { useTranslation } from 'react-i18next';\nimport { Prompt } from 'react-router'\n\nimport styles from \"./index.module.scss\";\nimport GeneralInfo from './Tabs/GeneralInfo';\nimport StudyConfig from './Tabs/StudyConfig';\nimport StudyAttributes from './Tabs/StudyAttributes';\n\nimport { setAttributes, getPublicStudies, getContainers } from '../../../APIs';\nimport {\n\tsetPublicStudies,\n\tsetAllStudies,\n\tsetAttrOrder,\n} from \"../../../Redux/actions\";\n\nconst { Title } = Typography;\nconst { TabPane } = Tabs;\nconst { Content } = Layout;\n\nfunction Config(props) {\n\tconst [editMode, setEditMode] = useState(false);\n\tconst [isSaving, setIsSaving] = useState(false);\n\tconst { studyAttributes } = useSelector((state) => state);\n\tconst { t } = useTranslation(['message']);\n\tconst [datasetInfo, setDatasetInfo] = useState(props.currentStudy);\n\tconst [userListOnDataset, setUserListOnDataset] = useState(null);\n\tconst [activateKey, setActivateKey] = useState('general_info');\n\tconst [datasetUpdate, setDatasetUpdate] = useState(props.currentStudy);\n\tconst [emailValid, setEmailValid] = useState({ 'primaryEmail': true, 'investigatorEmail': true })\n\n\tconst dispatch = useDispatch();\n\n\tuseEffect(() => {\n\t\tsetDatasetInfo(props.currentStudy);\n\t\tsetDatasetUpdate(props.currentStudy);\n\t}, [props.currentStudy]);\n\n\tconst saveDatasetInfo = async () => {\n\t\tif (!emailValid.primaryEmail) {\n\t\t\tmessage.error(t('message:config.general.primaryEmail.valid'));\n\t\t\treturn;\n\t\t}\n\n\t\tif (!emailValid.investigatorEmail) {\n\t\t\tmessage.error(t('message:config.general.investigatorEmail.valid'));\n\t\t\treturn;\n\t\t}\n\n\t\tsetIsSaving(true);\n\t\tlet project = { ...props.currentStudy, ...datasetUpdate };\n\t\tproject.attrs_order = studyAttributes.attrsOrder;\n\t\tdelete project.time_lastmodified;\n\t\tconst res = await setAttributes(project.id, project);\n\n\t\tif (res.status === 200) {\n\t\t\tsetDatasetInfo(project);\n\t\t}\n\n\t\tsetIsSaving(false);\n\t\tsetEditMode(false);\n\n\t\tconst res2 = await getPublicStudies();\n\t\tdispatch(setPublicStudies(res2.data.result));\n\n\t\tconst res3 = await getContainers();\n\t\tconst containers = res3?.data?.result?.node;\n\t\tconst studiesArr = containers.filter((item) => {\n\t\t\tif (item.labels[0] === \"study\") return { item };\n\t\t});\n\t\tdispatch(setAllStudies(studiesArr));\n\n\t\treturn;\n\t};\n\n\tfunction validateEmail(email) {\n\t\tconst re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\t\treturn re.test(String(email).toLowerCase());\n\t}\n\n\tconst updateDatasetInfo = (field, value) => {\n\t\tif (field === 'name') {\n\t\t\tlet isNameInvalid = value.length > 100;\n\t\t\tif (isNameInvalid) {\n\t\t\t\tmessage.error(t('message:config.general.name.valid'));\n\t\t\t\treturn\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (field === 'primaryEmail') {\n\t\t\tconst isValid = validateEmail(value);\n\t\t\tif (!isValid) {\n\t\t\t\tsetEmailValid({ ...emailValid, primaryEmail: false });\n\t\t\t\treturn\n\t\t\t}\n\t\t\telse {\n\t\t\t\tsetEmailValid({ ...emailValid, primaryEmail: true });\n\t\t\t}\n\t\t}\n\n\t\tif (field === 'investigatorEmail') {\n\t\t\tconst isValid = validateEmail(value);\n\t\t\tif (!isValid) {\n\t\t\t\tsetEmailValid({ ...emailValid, investigatorEmail: false });\n\t\t\t\treturn\n\t\t\t} else {\n\t\t\t\tsetEmailValid({ ...emailValid, investigatorEmail: true });\n\t\t\t}\n\t\t}\n\n\t\tsetDatasetUpdate({ ...datasetUpdate, [field]: value });\n\t};\n\n\tconst handleBtnCancel = () => {\n\t\tconst attrsOrderOrigin = props.currentStudy?.attrs_order\n\t\t\t? props.currentStudy?.attrs_order\n\t\t\t: props.mItem.attributes.map((attrItem) => \"attr_\" + attrItem.key);\n\t\tdispatch(setAttrOrder(attrsOrderOrigin));\n\t\tsetEditMode(false);\n\t}\n\n\tconst tabBarExtraContent = editMode ? (\n\t\t<>\n\t\t\t<Button\n\t\t\t\tloading={isSaving}\n\t\t\t\tonClick={saveDatasetInfo}\n\t\t\t\tstyle={{ marginRight: 10 }}\n\t\t\t\tclassName={styles.button}\n\t\t\t\ttype=\"primary\"\n\t\t\t\ticon={<SaveOutlined />}\n\t\t\t>\n\t\t\t\tSave\n\t\t\t</Button>\n\t\t\t<Button onClick={handleBtnCancel} type=\"link\">\n\t\t\t\tCancel\n\t\t\t</Button>\n\t\t</>\n\t) : (\n\t\t<Button\n\t\t\tstyle={{ color: \"#595959\" }}\n\t\t\tonClick={() => {\n\t\t\t\tsetEditMode(true);\n\t\t\t}}\n\t\t\ttype=\"link\"\n\t\t\ticon={<EditOutlined />}\n\t\t>\n\t\t\tEdit\n\t\t</Button>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<Content className={'content'}>\n\t\t\t\t<Prompt\n\t\t\t\t\twhen={editMode}\n\t\t\t\t\tmessage='You have unsaved changes, are you sure you want to leave?'\n\t\t\t\t/>\n\t\t\t\t<Card className={styles.card_wrapper} style={{ marginTop: 30 }}>\n\t\t\t\t\t<Tabs\n\t\t\t\t\t\tclassName={styles.custom_tabs}\n\t\t\t\t\t\ttabBarExtraContent={\n\t\t\t\t\t\t\tactivateKey === 'general_info' && tabBarExtraContent\n\t\t\t\t\t\t}\n\t\t\t\t\t\trenderTabBar={(props, DefaultTabBar) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<DefaultTabBar\n\t\t\t\t\t\t\t\t\tclassName={styles.tabHeader}\n\t\t\t\t\t\t\t\t\t{...props}\n\t\t\t\t\t\t\t\t\tstyle={{ paddingLeft: 16 }}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<TabPane tab=\"General Information\" key=\"general_info\">\n\t\t\t\t\t\t\t<div style={{ backgroundColor: 'white' }}>\n\t\t\t\t\t\t\t\t<GeneralInfo\n\t\t\t\t\t\t\t\t\tuserListOnDataset={userListOnDataset}\n\t\t\t\t\t\t\t\t\tupdateDatasetInfo={updateDatasetInfo}\n\t\t\t\t\t\t\t\t\tsaveDatasetInfo={saveDatasetInfo}\n\t\t\t\t\t\t\t\t\teditMode={editMode}\n\t\t\t\t\t\t\t\t\tdatasetInfo={datasetInfo}\n\t\t\t\t\t\t\t\t\tsetEditMode={setEditMode}\n\t\t\t\t\t\t\t\t\tdatasetUpdate={datasetUpdate}\n\t\t\t\t\t\t\t\t\tsetDatasetInfo={setDatasetInfo}\n\t\t\t\t\t\t\t\t\temailValid={emailValid}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</TabPane>\n\n\t\t\t\t\t\t<TabPane tab=\"Study Configuration\" key=\"study_config\">\n\t\t\t\t\t\t\t<div style={{ backgroundColor: 'white' }}>\n\t\t\t\t\t\t\t\t<StudyConfig\n\t\t\t\t\t\t\t\t\t{...props}\n\t\t\t\t\t\t\t\t\teditMode={editMode}\n\t\t\t\t\t\t\t\t\tsetEditMode={setEditMode}\n\t\t\t\t\t\t\t\t\tdatasetInfo={datasetInfo}\n\t\t\t\t\t\t\t\t\tupdateDatasetInfo={updateDatasetInfo}\n\t\t\t\t\t\t\t\t\tsaveDatasetInfo={saveDatasetInfo}\n\t\t\t\t\t\t\t\t\tdatasetUpdate={datasetUpdate}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</TabPane>\n\n\t\t\t\t\t\t<TabPane tab=\"Study Attributes\" key=\"study_attributes\">\n\t\t\t\t\t\t\t<div style={{ backgroundColor: 'white' }}>\n\t\t\t\t\t\t\t\t<StudyAttributes \n\t\t\t\t\t\t\t\t\tcurrentStudy={props.currentStudy}\n\t\t\t\t\t\t\t\t\tconfigEditMode={editMode}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</TabPane>\n\t\t\t\t\t</Tabs>\n\t\t\t\t</Card>\n\t\t\t</Content>\n\t\t</>\n\t);\n}\n\nexport default Config;\n","import React from \"react\";\nimport { Modal, Button, Form, Radio, message, Select, Empty } from \"antd\";\nimport { getUserlistInContainer, addResearcherApplicable, getSisterContainerResearch } from \"../../APIs\";\nimport { useParams } from \"react-router-dom\";\nimport { useTranslation } from 'react-i18next';\n\nconst { Option } = Select;\nfunction AddApplicableUserModal({ existedUsers, getUsers }) {\n\tconst [visible, setVisible] = React.useState(false);\n\tconst [form] = Form.useForm();\n\tconst [applicableUsers, setApplicableUsers] = React.useState();\n\tconst { t, i18n } = useTranslation(['message']);\n\t\n\tlet { studyId } = useParams();\n\n\tReact.useEffect(() => {\n\t\tfetchApplicable();\n\t}, [existedUsers]);\n\n\tfunction fetchApplicable() {\n\t\tgetUserlistInContainer(studyId, {})\n\t\t\t.then((response) => {\n\t\t\t\tconst users  = response.data.result;\n\t\t\t\tlet researchers = users.filter(user => user.role !== 'patient');\n\n\t\t\t\tgetSisterContainerResearch(studyId)\n\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\tconst sisterContainersUsers = res.data.result;\n\n\t\t\t\t\t\tfor (const user of sisterContainersUsers) {\n\t\t\t\t\t\t\tconst isExist = researchers.find(researcher => researcher.id === user.id);\n\n\t\t\t\t\t\t\tif (!isExist) researchers.push(user);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst usersElement = researchers.map((user) => {\n\t\t\t\t\t\t\tconst isExist = existedUsers && existedUsers.find((el) => el.id === user.id)\n\t\t\t\t\t\t\tif (!isExist) return <Option key={user.username}>{user.username}</Option>;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tsetApplicableUsers(usersElement);\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\tif (error.response && (error.response.status === 400 || error.response.status === 406)) {\n\t\t\t\t\t\t\tconsole.log('project have no sisiter project')\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst usersElement = researchers.map((user) => {\n\t\t\t\t\t\t\tconst isExist = existedUsers && existedUsers.find((el) => el.username === user.username)\n\t\t\t\t\t\t\tif (!isExist) return <Option key={user.username}>{user.username}</Option>;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tsetApplicableUsers(usersElement);\n\t\t\t\t\t});\n\t\t\t});\n\t}\n\n\tfunction handleChange(value) {\n\t\tconsole.log(`selected ${value}`);\n\t}\n\n\tconst notFoundContent = (\n\t\t<Empty\n\t\t\timage={Empty.PRESENTED_IMAGE_SIMPLE}\n\t\t\tdescription={\n\t\t\t\t<span>\n\t\t\t\t\tAll users from the associated Researcher Portal container have been added. \n\t\t\t\t\tIf attempting to add a new user, please add them on the associated Researcher Portal container first.\n\t\t\t\t</span>\n\t\t\t} \n\t\t/>\n\t)\n\n\treturn (\n\t\t<>\n\t\t\t<Button type=\"primary\" onClick={() => setVisible(true)}>\n\t\t\t\tAdd Researcher\n\t\t\t</Button>\n\t\t\t<Modal\n\t\t\t\ttitle=\"Add User as Researcher\"\n\t\t\t\tvisible={visible}\n\t\t\t\tokText=\"Add Researcher\"\n\t\t\t\tonOk={() => {\n\t\t\t\t\tform.validateFields()\n\t\t\t\t\t\t.then(async (values) => {\n\t\t\t\t\t\t\tconst users = values.users;\n\t\t\t\t\t\t\tconst role = values.role;\n\n\t\t\t\t\t\t\tfor (const user of users) {\n\t\t\t\t\t\t\t\tawait addResearcherApplicable(\n\t\t\t\t\t\t\t\t\tstudyId,\n\t\t\t\t\t\t\t\t\tuser,\n\t\t\t\t\t\t\t\t\trole\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tform.resetFields();\n\n\t\t\t\t\t\t\tgetUsers();\n\t\t\t\t\t\t\tsetVisible(false);\n\t\t\t\t\t\t\tmessage.success(t('message:invitation.researcher.success'));\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((info) => {\n\t\t\t\t\t\t\tconsole.log(\"Validate Failed:\", info);\n\t\t\t\t\t\t\tmessage.error(t('message:invitation.researcher.failed'));\n\t\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t\tonCancel={() => {\n\t\t\t\t\tsetVisible(false);\n\t\t\t\t\tform.resetFields();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Form form={form} layout=\"vertical\" name=\"add_appliable_user\">\n\t\t\t\t\t<Form.Item\n\t\t\t\t\t\tlabel=\"Username\"\n\t\t\t\t\t\tname=\"users\"\n\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\tmessage: \"Please input researcher's username.\",\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tmode=\"multiple\"\n\t\t\t\t\t\t\tshowSearch\n\t\t\t\t\t\t\tallowClear\n\t\t\t\t\t\t\tstyle={{ width: \"100%\" }}\n\t\t\t\t\t\t\tplaceholder=\"Please select\"\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\tnotFoundContent={notFoundContent}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{applicableUsers}\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t</Form.Item>\n\n\t\t\t\t\t<Form.Item\n\t\t\t\t\t\tlabel=\"Role\"\n\t\t\t\t\t\tname=\"role\"\n\t\t\t\t\t\tinitialValue=\"admin\"\n\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\tmessage: \"Please select researcher's role.\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Radio.Group defaultValue=\"admin\">\n\t\t\t\t\t\t\t<Radio value=\"admin\">Admin</Radio>\n\t\t\t\t\t\t\t<Radio value=\"member\">Member</Radio>\n\t\t\t\t\t\t</Radio.Group>\n\t\t\t\t\t</Form.Item>\n\t\t\t\t</Form>\n\t\t\t</Modal>\n\t\t</>\n\t);\n}\n\nexport { AddApplicableUserModal };\n","import React from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport { Typography, Card, Table, Dropdown, Button, Divider, Select, Menu, Modal } from \"antd\";\nimport { MoreOutlined } from '@ant-design/icons';\nimport AppFooter from \"../../../Components/Layout/Footer\";\nimport moment from \"moment-timezone\";\nimport styles from \"./index.module.scss\";\nimport { useParams } from \"react-router-dom\";\nimport { getResearchers, changeRole, RemoveResearcher, } from \"../../../APIs\";\nimport { AddApplicableUserModal } from \"../../../Components/Modals/AddApplicableUserModal\";\nimport { DownOutlined, ExclamationCircleOutlined } from '@ant-design/icons';\n\nconst { Option } = Select;\nconst { SubMenu } = Menu;\n\nconst { Title } = Typography;\n\nfunction Researchers(props) {\n\tlet { studyId } = useParams();\n\tconst [users, setUsers] = React.useState([]);\n\n\tReact.useEffect(() => {\t\n\t\tgetUsers();\n\t}, []);\n\n\tconst getUsers = () => {\n\t\tgetResearchers(studyId).then((res) => {\n\t\t\tif (res.status === 200) {\n\t\t\t\tconst data = res.data.result.map((item) => {\n\t\t\t\t\treturn { ...item, key: item.id };\n\t\t\t\t});\n\t\t\t\tsetUsers(data);\n\t\t\t}\n\t\t});\n\t};\n\n\tconst confirmModal = (user, permission, action) => {\n\t\tconst _this = this;\n\t\tlet content = '';\n\t\n\t\tif (action === 'delete') {\n\t\t  content = `Are you sure you wish to remove user ${user.username} from this project?`;\n\t\t} else {\n\t\t  content = `Are you sure you wish to change the role for user ${user.username} to ${permission}?`;\n\t\t}\n\t\tModal.confirm({\n\t\t  title: 'Confirm',\n\t\t  icon: <ExclamationCircleOutlined />,\n\t\t  content,\n\t\t  okText: 'OK',\n\t\t  cancelText: 'Cancel',\n\t\t  onOk() {\n\t\t\tif (action === 'delete') {\n\t\t\t\thandleRemoveUser(user.id, permission);\n\t\t\t} else {\n\t\t\t\thandleChangeRole(user.id, permission);\n\t\t\t}\n\t\t  },\n\t\t});\n\t  }\n\n\tasync function handleChangeRole(userId, relation) {\n\t\tconst res = await changeRole(studyId, userId, relation)\n\t\t\n\t\tif (res.status === 200) {\n\t\t\tconst updatedUsers = users.map((user) => {\n\t\t\t\tif (user.id === userId) {\n\t\t\t\t\tuser.permission = relation\n\t\t\t\t}\n\n\t\t\t\treturn user;\n\t\t\t});\n\n\t\t\tsetUsers(updatedUsers);\n\t\t}\n\t}\n\n\tasync function handleRemoveUser(userId, permission) {\n\t\tconst res = await RemoveResearcher(studyId, userId, permission);\n\n\t\tif (res.status === 200) {\n\t\t\tgetUsers();\n\t\t}\n\t}\n\n\tconst menu = (user) => (\n\t\t<Menu id=\"teams_role_dropdown\">\n\t\t\t<SubMenu title=\"Change Role\">\n\t\t\t\t<Menu.Item\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tconsole.log(user)\n\t\t\t\t\t\tconfirmModal(user, 'member', 'changeRole')\n\t\t\t\t\t}}\n\t\t\t\t\tkey=\"member\"\n\t\t\t\t\t>\n\t\t\t\t\tmember\n\t\t\t\t</Menu.Item>\n\n\t\t\t\t<Menu.Item\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tconfirmModal(user, 'admin', 'changeRole')\n\t\t\t\t\t}}\n\t\t\t\t\tkey=\"admin\"\n\t\t\t\t\t>\n\t\t\t\t\tadmin\n\t\t\t\t</Menu.Item>\n\t\t\t</SubMenu>\n\t\t\n\t\t\t<Menu.Item\n\t\t\t\tonClick={() => {\n\t\t\t\t\tconfirmModal(user, null, 'delete')\n\t\t\t\t}}\n\t\t\t\tstyle={{ color: 'red' }}\n\t\t\t\t>\n\t\t\t\tRemove\n\t\t\t</Menu.Item>\n\t\t</Menu>\n\t)\n\n\tconst columns = [\n\t\t{\n\t\t\ttitle: \"Username\",\n\t\t\tdataIndex: \"username\",\n\t\t\tkey: \"username\",\n\t\t\tsorter: (a, b) => a.username.localeCompare(b.username),\n\t\t},\n\n\t\t{\n\t\t\ttitle: \"First Name\",\n\t\t\tdataIndex: \"firstname\",\n\t\t\tkey: \"firstName\",\n\t\t\tsorter: (a, b) => a.firstname.localeCompare(b.firstname),\n\t\t},\n\t\t{\n\t\t\ttitle: \"Last Name\",\n\t\t\tdataIndex: \"lastname\",\n\t\t\tkey: \"lastName\",\n\t\t\tsorter: (a, b) => a.lastname.localeCompare(b.lastname),\n\t\t},\n\t\t{\n\t\t\ttitle: \"Email\",\n\t\t\tdataIndex: \"email\",\n\t\t\tkey: \"email\",\n\t\t},\n\t\t{\n\t\t\ttitle: \"Join Date\",\n\t\t\tdataIndex: \"time_created\",\n\t\t\tkey: \"createdTimestamp\",\n\t\t\tsorter: (a, b) => {\n\t\t\t\treturn new Date(a.created_time) - new Date(b.created_time);\n\t\t\t},\n\t\t\trender: (text) => {\n\t\t\t\treturn moment(text).format('YYYY-MM-DD HH:mm:ss');\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\ttitle: \"Role\",\n\t\t\tdataIndex: \"permission\",\n\t\t\tkey: \"Role\",\n\t\t},\n\t\t{\n\t\t\ttitle: \"Actions\",\n\t\t\tkey: \"action\",\n\t\t\trender: (text, record) => {\n\t\t\t\treturn (\n\t\t\t\t\t<Dropdown overlay={menu(record)} placement=\"bottomRight\">\n\t\t\t\t\t  <Button shape=\"circle\">\n\t\t\t\t\t\t<MoreOutlined />\n\t\t\t\t\t  </Button>\n\t\t\t\t\t</Dropdown>\n\t\t\t\t)\n\t\t\t},\n\t\t},\n\t];\n\treturn (\n\t\t<>\n\t\t\t<div className={styles.container}>\n\t\t\t\t<div>\n\t\t\t\t\t<Title level={2}>Researchers </Title>{\" \"}\n\t\t\t\t</div>\n\n\t\t\t\t<Card style={{ boxShadow: \"0px 1px 9px #00000020\" }}>\n\t\t\t\t\t<AddApplicableUserModal existedUsers={users} getUsers={getUsers} />\n\t\t\t\t\t<Table \n\t\t\t\t\t\tdataSource={users} \n\t\t\t\t\t\tcolumns={columns} \n\t\t\t\t\t\tstyle={{ marginTop: 20 }}\n\t\t\t\t\t/>\n\t\t\t\t</Card>\n\t\t\t</div>\n\t\t\t<AppFooter />\n\t\t</>\n\t);\n}\n\nexport default withRouter(Researchers);\n","import React, { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport IframeResizer from 'iframe-resizer-react'\nimport { Typography, Layout, Card } from 'antd';\nimport {useLocation} from \"react-router-dom\";\n\nimport queryString from 'query-string';\n\nconst { Title, Paragraph } = Typography;\nconst { Content } = Layout;\n\nfunction Survey(props) {\n    const surveyLink = useSelector((state) => state.redCapLinks && state.redCapLinks.surveyLink);\n    const surveyQueueLink = useSelector((state) => state.redCapLinks && state.redCapLinks.surveyQueueLink);\n    const surveyStatus = useSelector((state) => state.redCapLinks && state.redCapLinks.isSurveyStarted);\n\n    let location = useLocation();\n    let params = queryString.parse(location.search)\n    let isSurveyLink = params[\"isSurveyLink\"] === \"True\";\n\n    let link = surveyQueueLink;\n    if (!surveyStatus || isSurveyLink) link = surveyLink;\n\n    return (\n        <Content className={\"content\"}>\n            <div>\n                <Title level={2}>eConsent Survey</Title>\n\n                {/* <Card\n                >\n                    {\n                        isSurveyLink || !props.isSurveyStarted ? (\n                            <iframe \n                                src={surveyLink}\n                                width=\"100%\"\n                                height=\"1000px\"\n                                frameborder=\"0\"\n                                scrolling=\"auto\"\n                            />\n                        ) : (\n                            <div>\n                                <iframe \n                                    src={surveyQueueLink}\n                                    width=\"100%\"\n                                    height=\"1000px\"\n                                    frameborder=\"0\"\n                                    scrolling=\"auto\"\n                                    style={{ marginTop: 20 }}\n                                />\n                            </div>\n                            \n                        )\n                    }\n                </Card> */}\n                <IframeResizer \n                    src={link}\n                    style={{ width: '1px', minWidth: '100%' }}\n                    frameborder=\"0\"\n                    height=\"1000px\"\n                    inPageLinks\n                />\n            </div>\n        </Content>\n    )\n}\n\nexport default Survey;","import Landing from \"../Views/Study/Landing/Landing\";\nimport Members from \"../Views/Study/Patients/Patients\";\nimport Config from \"../Views/Study/Config/Config\";\nimport Researchers from \"../Views/Study/Researchers/Researchers\";\nimport Survey from \"../Views/Study/Survey/Survey\";\n\nconst routes = [\n\t{\n\t\tpath: \"/landing\",\n\t\tcomponent: Landing,\n\t},\n\t{\n\t\tpath: \"/patients\",\n\t\tcomponent: Members,\n\t\tprotected: true,\n\t},\n\t{\n\t\tpath: \"/config\",\n\t\tcomponent: Config,\n\t},\n\t{\n\t\tpath: \"/survey\",\n\t\tcomponent: Survey,\n\t},\n\t{\n\t\tpath: \"/researchers\",\n\t\tcomponent: Researchers,\n\t\tprotected: true,\n\t},\n];\n\nexport default routes;\n","import React from \"react\";\nimport { Result, Button, Layout } from \"antd\";\nimport {withRouter} from 'react-router-dom'\nconst {Content} = Layout;\nfunction Error404(props) {\n  return (\n    <Content>\n      <Result\n        status=\"404\"\n        title=\"404\"\n        subTitle=\"Sorry, the page you visited does not exist.\"\n        extra={<Button onClick={()=>{props.history.push('/uploader')}} type=\"primary\">Back Home</Button>}\n      />\n    </Content>\n  );\n}\n\nexport default withRouter(Error404) ;\n","import React from \"react\";\nimport { Result, Button, Layout } from \"antd\";\nimport { withRouter, Link } from \"react-router-dom\";\nconst { Content } = Layout;\nfunction Error404(props) {\n\treturn (\n\t\t<Content>\n\t\t\t<Result\n\t\t\t\tstatus=\"403\"\n\t\t\t\ttitle=\"403\"\n\t\t\t\tsubTitle=\"Sorry, you are not authorized to access this page.\"\n\t\t\t\textra={\n\t\t\t\t\t<Button type=\"primary\">\n\t\t\t\t\t\t<Link to=\"/\">Back Home</Link>\n\t\t\t\t\t</Button>\n\t\t\t\t}\n\t\t\t/>\n\t\t</Content>\n\t);\n}\n\nexport default withRouter(Error404);\n","import Error404 from \"../Views/ErrorPage/404/Error404\";\nimport Error403 from \"../Views/ErrorPage/403/Error403\";\n\nconst routes = [\n\t{\n\t\tpath: \"/404\",\n\t\tcomponent: Error404,\n\t},\n\t{\n\t\tpath: \"/403\",\n\t\tcomponent: Error403,\n\t},\n];\n\nexport default routes;\n","import React from \"react\";\n\nimport CreateAccount from \"../../Components/Form/CreateAccount\";\nimport { message } from \"antd\";\nimport { register } from \"../../APIs\";\nimport styles from \"./index.module.scss\";\nimport { withRouter } from \"react-router-dom\";\n\nfunction RegistrationContent(props) {\n\tconst onSumbit = (values) => {\n\t\tregister(values)\n\t\t\t.then((res) => {\n\t\t\t\tif (res.status === 200) {\n\t\t\t\t\tprops.history.push(\"/registration/confirmation\");\n\t\t\t\t} else {\n\t\t\t\t\tmessage.error(\"Something went wrong during registration. Please try again.\");\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tif (err.response) {\n\t\t\t\t\tconst { result } = err.response.data;\n\t\t\t\t\tmessage.error(result);\n\t\t\t\t}\n\t\t\t});\n\t};\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<CreateAccount onSubmit={onSumbit} />\n\t\t</div>\n\t);\n}\n\nexport default withRouter(RegistrationContent);\n","import RegistrationConfirmation from \"../Views/Registration/RegistrationConfirmation\";\nimport Registration from \"../Views/Registration/RegistrationContent\";\n\nconst routes = [\n\t{\n\t\tpath: \"/confirmation\",\n\t\tcomponent: RegistrationConfirmation,\n\t},\n\t{\n\t\tpath: \"/\",\n\t\tcomponent: Registration,\n\t},\n];\n\nexport default routes;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Card, Button, Result } from \"antd\";\nimport styles from \"./index.module.scss\";\n\nfunction CreateAccountConfirmation() {\n\treturn (\n\t\t<div className={styles.confirmationWrapper}>\n\t\t\t<Card style={{ marginBottom: \"10px\" }}>\n\t\t\t\t<Result\n\t\t\t\t\tstatus=\"success\"\n\t\t\t\t\ttitle=\"Registration: Successful\"\n\t\t\t\t\tsubTitle={\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<br />A confirmation email will be sent to your\n\t\t\t\t\t\t\t\temail address soon.\n\t\t\t\t\t\t\t\t<br /> Please login with your new credentials.\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</>\n\t\t\t\t\t}\n\t\t\t\t\textra={[\n\t\t\t\t\t\t<Button type=\"primary\" key=\"console\">\n\t\t\t\t\t\t\t<Link to=\"/login\">Back to log-in Page</Link>\n\t\t\t\t\t\t</Button>,\n\t\t\t\t\t]}\n\t\t\t\t/>\n\t\t\t</Card>\n\t\t</div>\n\t);\n}\n\nexport default CreateAccountConfirmation;\n","import React, { useState, useEffect } from \"react\";\nimport { Form, Input, Button } from \"antd\";\nimport { UserOutlined, LockOutlined } from \"@ant-design/icons\";\nimport { login } from \"../../APIs\";\n\nfunction Login(props) {\n\tconst [role, setRole] = useState(\"patient\");\n\tconst [form] = Form.useForm();\n\n\tconst onFinish = (values) => {\n\t\t// login({ ...values, user_role: role }).then((res) => {\n\t\t// \tconst { access_token, refresh_token } = res.data.result;\n\n\t\t// \tconsole.log(\"Logged in\", res.data.result);\n\t\t// });\n\t\tprops.onSubmit(values);\n\t};\n\tconsole.log(props.username)\n\tform.setFieldsValue({ username: props.username });\n\treturn (\n\t\t<Form\n\t\t\tname=\"basic\"\n\t\t\tinitialValues={{\n\t\t\t\tremember: true,\n\t\t\t}}\n\t\t\tonFinish={onFinish}\n\t\t\tform={form}\n\t\t>\n\t\t\t<Form.Item\n\t\t\t\tlabel=\"Username\"\n\t\t\t\tname=\"username\"\n\t\t\t\tinitialValue={props.username}\n\t\t\t\trules={[\n\t\t\t\t\t{\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tmessage: \"Enter your username.\",\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t>\n\t\t\t\t<Input prefix={<UserOutlined />} disabled={props.username} />\n\t\t\t</Form.Item>\n\n\t\t\t<Form.Item\n\t\t\t\tlabel=\"Password\"\n\t\t\t\tname=\"password\"\n\t\t\t\trules={[\n\t\t\t\t\t{\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tmessage: \"Enter your password.\",\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t>\n\t\t\t\t<Input.Password prefix={<LockOutlined />} />\n\t\t\t</Form.Item>\n\t\t\t<Form.Item>\n\t\t\t\t<Button type=\"primary\" htmlType=\"submit\">\n\t\t\t\t\tLog In\n\t\t\t\t</Button>\n\t\t\t</Form.Item>\n\t\t</Form>\n\t);\n}\n\nexport { Login };\n","import React from \"react\";\nimport { Form, Input, Button, message } from \"antd\";\nimport { Login } from \"./Login\";\nimport { connect } from \"react-redux\";\nimport {\n\tlogin as loginApi,\n\tanswerQuestion as answerQuestionAPI,\n} from \"../../APIs\";\nimport { withRouter } from \"react-router-dom\";\nimport { parseJwt } from '../../Utility';\nimport { tokenManager } from '../../Service/tokenManager';\nimport { setIsLoginCreator } from \"../../Redux/actions\";\nimport { userAuthManager } from \"../../Service/userAuthManager\";\nimport { useTranslation } from 'react-i18next';\n\nfunction Question(props) {\n\tconst [form] = Form.useForm();\n\tconst [isLogged, setIsLogin] = React.useState(false);\n\tconst { t, i18n } = useTranslation(['message']);\n\n\tconst onFinish = (values) => {\n\t\tconsole.log(\"Success:\", values);\n\t\tconst { invitationHash } = props.match.params;\n\t\tanswerQuestionAPI(invitationHash, values.answer)\n\t\t\t.then((res) => {\n\t\t\t\tif (res.data.result) {\n\t\t\t\t\tconst { success } = res.data.result;\n\n\t\t\t\t\tif (!success) {\n\t\t\t\t\t\tmessage.error(t('message:invitation.patient.answer.valid'));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tprops.history.push(\"/my-studies\");\t\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.log(err);\n\t\t\t\tmessage.error('Something wrong');\n\t\t\t});\n\t};\n\n\tconst onFinishFailed = (errorInfo) => {\n\t\tconsole.log(\"Failed:\", errorInfo);\n\t};\n\n\tconst login = (values) => {\n\t\tloginApi({ ...values, user_role: \"patient\" })\n\t\t\t.then((res) => {\n\t\t\t\tconst { access_token, refresh_token } = res.data.result;\n\n\t\t\t\tif (res.status == 200) {\n\t\t\t\t\tsetIsLogin(true);\n\n\t\t\t\t\tconst parsedJwt = parseJwt(access_token);\n\n\t\t\t\t\ttokenManager.setCookies({\n\t\t\t\t\t\tisLogin: true,\n\t\t\t\t\t\tusername: values.username,\n\t\t\t\t\t\trole: parsedJwt.user_role,\n\t\t\t\t\t\taccess_token: access_token,\n\t\t\t\t\t\trefresh_token: refresh_token,\n\t\t\t\t\t});\n\n\t\t\t\t\tprops.setIsLoginCreator(true);\n\n\t\t\t\t\tuserAuthManager.initRefreshModal();\n\t\t\t\t\tuserAuthManager.initExpirationLogout();\n\t\t\t\t\ttokenManager.refreshToken(access_token)\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tif (err.response && err.response.status === 409) {\n\t\t\t\t\tmessage.error(t('message:login.patient_tab.role'));\n\t\t\t\t\t\n\t\t\t\t} else if (err.response && err.response.status === 403) {\n\t\t\t\t\tmessage.error(t('message:login.password_error'));\n\t\t\t\t}\n\t\t\t});;\n\t};\n\n\treturn isLogged === false ? (\n\t\t<Login onSubmit={login} username={props.username} />\n\t) : (\n\t\t<Form\n\t\t\tname=\"invite_question\"\n\t\t\tonFinish={onFinish}\n\t\t\tonFinishFailed={onFinishFailed}\n\t\t>\n\t\t\t<Form.Item label=\"Security Question\">\n\t\t\t\t<span className=\"ant-form-text\">{props.question}</span>\n\t\t\t</Form.Item>\n\t\t\t<Form.Item\n\t\t\t\tlabel=\"Security Answer\"\n\t\t\t\tname=\"answer\"\n\t\t\t\trules={[\n\t\t\t\t\t{\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tmessage: \"Enter the security answer.\",\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t>\n\t\t\t\t<Input placeholder=\"Security answer\" />\n\t\t\t</Form.Item>\n\t\t\t<Form.Item\n\t\t\t// wrapperCol={{\n\t\t\t// \txs: { span: 24, offset: 0 },\n\t\t\t// \tsm: { span: 16, offset: 8 },\n\t\t\t// }}\n\t\t\t>\n\t\t\t\t<Button type=\"primary\" htmlType=\"submit\">\n\t\t\t\t\tSubmit\n\t\t\t\t</Button>\n\t\t\t</Form.Item>\n\t\t</Form>\n\t);\n}\n\nexport default withRouter(connect(null, { setIsLoginCreator })(Question));\n","import React, { useEffect } from \"react\";\nimport { Form, Row, Col, Card, Layout, message, Typography, Spin } from \"antd\";\nimport CreateAccount from \"../../Components/Form/CreateAccount\";\nimport Question from \"./Question\";\nimport {\n\treadToken,\n\tregister,\n\tanswerQuestion as answerQuestionAPI,\n} from \"../../APIs\";\nimport { withRouter } from \"react-router-dom\";\nimport { useTranslation } from 'react-i18next';\n\nconst { Content } = Layout;\nconst { Title } = Typography;\n\nfunction Invitations(props) {\n\tconst [form] = Form.useForm();\n\tconst [isLoading, setIsLoading] = React.useState(true);\n\tconst [isRegistered, setRegistered] = React.useState(null);\n\tconst [question, setQuestion] = React.useState(null);\n\tconst [email, setEmail] = React.useState(\"\");\n\tconst [username, setUsername] = React.useState(\"\");\n\tconst [error, setError] = React.useState(null);\n\tconst { t, i18n } = useTranslation(['message']);\n\n\tuseEffect(() => {\n\t\tconst { invitationHash } = props.match.params;\n\t\treadToken(invitationHash).then(\n\t\t\t(res) => {\n\t\t\t\tif (res.status === 200) {\n\t\t\t\t\tconsole.log(res);\n\t\t\t\t\tsetRegistered(res.data.result.is_Registered);\n\t\t\t\t\tsetQuestion(res.data.result.question);\n\t\t\t\t\tsetUsername(res.data.result.username);\n\t\t\t\t\tsetEmail(res.data.result.email);\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t} else {\n\t\t\t\t\tsetError(\"Invitation not found.\");\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t}\n\t\t\t},\n\t\t\t(x) => {\n\t\t\t\tsetError(\"Invitation not found\");\n\t\t\t\tsetIsLoading(false);\n\t\t\t},\n\t\t);\n\t}, [username]);\n\n\tconst registerAccount = (values) => {\n\t\tregister(values)\n\t\t\t.then((res) => {\n\t\t\t\tif (res.status === 200) {\n\t\t\t\t\tsetRegistered(true);\n\t\t\t\t\tsetUsername(values.username);\n\t\t\t\t\tmessage.success(t('message:users.register.success'));\n\t\t\t\t} else {\n\t\t\t\t\tmessage.error(t('message:users.register.failed'));\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tif (err.response) {\n\t\t\t\t\tconst { result } = err.response.data;\n\t\t\t\t\tmessage.error(result);\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\tif (isLoading) {\n\t\treturn <Spin />;\n\t}\n\n\tif (error) {\n\t\treturn (\n\t\t\t<Layout>\n\t\t\t\t<Content>\n\t\t\t\t\t<Row\n\t\t\t\t\t\tjustify=\"center\"\n\t\t\t\t\t\talign=\"middle\"\n\t\t\t\t\t\tstyle={{ minHeight: \"80vh\" }}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\t\tstyle={{ textAlign: \"center\", padding: \"10px\" }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Title level={3}>Invitation not found</Title>\n\t\t\t\t\t\t\t\t<p>Please contact your study coordinator.</p>\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</Content>\n\t\t\t</Layout>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Layout>\n\t\t\t<Content>\n\t\t\t\t<Card style={{ textAlign: \"center\", padding: \"10px\", maxWidth: 700, margin: \"50px auto\",}}>\n\t\t\t\t\t<Title level={3}>\n\t\t\t\t\t\tYou have been invited to enroll in a study on Patient Portal.\n\t\t\t\t\t</Title>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tUpon completion of the forms you will be enrolled.\n\t\t\t\t\t</p>\n\n\t\t\t\t\t{isRegistered === false ? (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<CreateAccount\n\t\t\t\t\t\t\t\tonSubmit={registerAccount}\n\t\t\t\t\t\t\t\temail={email}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\t\t\t\t\t{isRegistered === true ? (\n\t\t\t\t\t\t<Question\n\t\t\t\t\t\t\tusername={username}\n\t\t\t\t\t\t\tquestion={question}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : null}\n\t\t\t\t</Card>\n\t\t\t</Content>\n\t\t</Layout>\n\t);\n}\n\nconst InviteContent = withRouter(Invitations);\n\nexport { InviteContent };\n","import { InviteContent } from \"../Views/Invitations/InviteContent\";\n\nconst routes = [\n\t{\n\t\tpath: \"/:invitationHash\",\n\t\tcomponent: InviteContent,\n\t},\n];\n\nexport default routes;\n","import appRoutes from \"./app\";\nimport studyRoutes from \"./study\";\nimport errorPageRoutes from \"./errorPage\";\nimport registrationRoutes from \"./registration\";\nimport invitationsRoutes from \"./invitations\";\nimport forgetPasswordRoutes from \"./forgetPassword\"\nimport { createBrowserHistory } from \"history\";\n\nconst history = createBrowserHistory();\n\nexport {\n\tappRoutes,\n\tstudyRoutes,\n\terrorPageRoutes,\n\thistory,\n\tregistrationRoutes,\n\tinvitationsRoutes,\n\tforgetPasswordRoutes,\n};\n","import React, { useState, useEffect } from \"react\";\nimport { Modal, Button } from \"antd\";\nimport { connect, useSelector } from \"react-redux\";\nimport { setRefreshModal } from \"../../Redux/actions\";\n// import { namespace, ErrorMessager } from \"../../ErrorMessages\";\nimport { tokenManager } from \"../../Service/tokenManager\";\nimport { userAuthManager } from \"../../Service/userAuthManager\";\n// import { broadcastManager } from \"../../Service/broadcastManager\";\nimport { namespace as ServiceNamespace } from \"../../Service/namespace\";\n\nfunction CreateDatasetModal({ visible, setRefreshModal }) {\n\tconst [secondsToGo, setTimer] = useState(tokenManager.getTokenTimeRemain());\n\tconst [listenerId, setListenerId] = useState(\"default\");\n\tconst { refreshTokenModal, username } = useSelector((state) => state);\n\n\tconst refreshToken = () => {\n\t\tuserAuthManager\n\t\t\t.extendAuth()\n\t\t\t.then((res) => {\n\t\t\t\tsetRefreshModal(false); //Close this modal\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tif (err.response) {\n\t\t\t\t\tconsole.log(err);\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\tuseEffect(() => {\n\t\tif (refreshTokenModal) {\n\t\t\tconst time = 250; //any value because condition always return true;\n\t\t\tconst condition = (timeRemain, time) => true;\n\t\t\tconst func = () => {\n\t\t\t\tsetTimer(tokenManager.getTokenTimeRemain());\n\t\t\t};\n\t\t\tconst newListenerId = tokenManager.addListener({\n\t\t\t\ttime,\n\t\t\t\tcondition,\n\t\t\t\tfunc,\n\t\t\t});\n\t\t\tsetListenerId(newListenerId);\n\t\t} else {\n\t\t\ttokenManager.removeListener(listenerId);\n\t\t}\n\t}, [refreshTokenModal]);\n\n\tconst logout = () => {\n\t\ttokenManager.removeListener(listenerId);\n\t\tuserAuthManager.logout(\n\t\t\tServiceNamespace.userAuthLogout.LOGOUT_REFRESH_MODAL,\n\t\t);\n\t\t// broadcastManager.postMessage(\n\t\t// \t\"logout\",\n\t\t// \tServiceNamespace.broadCast.REFRESH_MODAL_LOGOUT,\n\t\t// );\n\t};\n\n\treturn (\n\t\t<Modal\n\t\t\ttitle=\"Warning\"\n\t\t\tvisible={visible}\n\t\t\tmaskClosable={false}\n\t\t\t// icon={<ExclamationCircleOutlined />}\n\t\t\tonCancel={() => {\n\t\t\t\t// setRefreshModal(false);\n\t\t\t\tlogout();\n\t\t\t}}\n\t\t\tfooter={[\n\t\t\t\t<Button key=\"back\" onClick={logout}>\n\t\t\t\t\tLogout\n\t\t\t\t</Button>,\n\t\t\t\t<Button\n\t\t\t\t\tkey=\"submit\"\n\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\tonClick={() => refreshToken()}\n\t\t\t\t>\n\t\t\t\t\tRefresh\n\t\t\t\t</Button>,\n\t\t\t]}\n\t\t>\n\t\t\t{`Your session will expire in ${secondsToGo}s. Please click “Refresh” if you wish to remain logged in.`}\n\t\t</Modal>\n\t);\n}\n\n// export default CreateDatasetModal;\nexport default connect(\n\t(state) => ({\n\t\tvisible: state.refreshTokenModal,\n\t}),\n\t{ setRefreshModal },\n)(CreateDatasetModal);\n","import React, { Component, Suspense } from \"react\";\nimport IdleTimer from 'react-idle-timer';\nimport { Switch, Route } from \"react-router-dom\";\nimport { withCookies, useCookies } from \"react-cookie\";\nimport { appRoutes as routes } from \"./Routes\";\nimport \"./App.scss\";\n\nimport RefreshModal from \"./Components/Modals/RefreshModal\";\nimport ProtectedRoute from \"./Components/ProtectedRoute/ProtectedRoute\";\nimport { userAuthManager } from \"./Service/userAuthManager\";\nimport { tokenManager } from \"./Service/tokenManager\";\n\nimport { message } from \"antd\";\nimport { connect } from \"react-redux\";\n\nimport { getContainers, checkUserInfo, getPublicStudies, updateFitbitStatus } from \"./APIs\";\nimport { setAllStudies, setCurrentUser, setPublicStudies, } from \"./Redux/actions\";\nimport { parse_query_string } from \"./Utility\";\n\nmessage.config({\n\tmaxCount: 2,\n});\n\nclass App extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.idleTimer = null\n\t\tthis.handleOnAction = this.handleOnAction.bind(this)\n\t\tthis.handleOnActive = this.handleOnActive.bind(this)\n\t\tthis.handleOnIdle = this.handleOnIdle.bind(this)\n\t}\n\n\tcomponentDidMount() {\n\t\tuserAuthManager.init();\n\n\t\tconst { cookies } = this.props.cookies;\n\n\t\tthis.props.isLogin &&\n\t\t\tgetContainers().then((res) => {\n\t\t\t\tconst containers = res?.data?.result?.node;\n\t\t\t\tconst studiesArr = containers.filter((item) => {\n\t\t\t\t\tif (item.labels[0] === \"study\") return { item };\n\t\t\t\t});\n\t\t\t\tthis.props.setAllStudies(studiesArr);\n\t\t\t});\n\n\t\tthis.props.isLogin && \n\t\t\tcheckUserInfo({ username: cookies.username })\n\t\t\t\t.then((res) => {\n\t\t\t\t\tif (res.status === 200) {\n\t\t\t\t\t\tthis.props.setCurrentUser(res.data.result);\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\tthis.props.isLogin && \n\t\t\tgetPublicStudies()\n\t\t\t\t.then((res) => {\n\t\t\t\t\tif (res.status === 200) {\n\t\t\t\t\t\tthis.props.setPublicStudies(res.data.result);\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\tconst queryString = window.location.href.split('?')[1];\n\t\t\n\t\tif (this.props.isLogin && queryString && queryString.includes('state') && this.props.user.role !== 'patient') {\n\t\t\tconst params = parse_query_string(queryString);\n\t\t\tconst state = params.state;\n\t\t\tconst code = params.code;\n\n\t\t\tlet fitbitData = localStorage.getItem('fitbitData');\n\t\t\tfitbitData = JSON.parse(fitbitData);\n\t\t\tconst currentFitbitData = fitbitData.find(el => state.includes(el.state));\n\n\t\t\tconsole.log(currentFitbitData, code)\n\n\t\t\tif (this.props.isLogin) {\n\t\t\t\tupdateFitbitStatus(currentFitbitData.userId, currentFitbitData.state, code)\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tif (res.status === 200) {\n\t\t\t\t\t\t\tmessage.success(`${currentFitbitData.name} has been successfully authorized on Fitbit.`);\n\t\t\t\t\t\t\twindow.location.href = `/study/${currentFitbitData.id}/patients`;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\n\thandleOnAction (event) {\n\t\tif (this.props.isLogin) {\n\t\t\tconst remainTime = tokenManager.getTokenTimeRemain();\n\t\t\t// console.log('user did something', remainTime)\n\t\t\t\n\t\t\tif (remainTime < 100) {\n\t\t\t\tuserAuthManager.extendAuth();\n\t\t\t}\n\t\t}\n\t}\n\n\thandleOnActive (event) {\n\t\tconsole.log('user is active', event)\n\t\tconsole.log('time remaining', this.idleTimer.getRemainingTime())\n\t}\n\n\thandleOnIdle (event) {\n\t\tconsole.log('user is idle', event)\n\t\tconsole.log('last active', this.idleTimer.getLastActiveTime())\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<IdleTimer\n\t\t\t\t\tref={ref => { this.idleTimer = ref }}\n\t\t\t\t\ttimeout={1000 * 60 * 15}\n\t\t\t\t\tonActive={this.handleOnActive}\n\t\t\t\t\tonIdle={this.handleOnIdle}\n\t\t\t\t\tonAction={this.handleOnAction}\n\t\t\t\t\tdebounce={250}\n\t\t\t\t/>\n\t\t\t\t<Suspense fallback=\"loading\">\n\t\t\t\t\t<Switch>\n\t\t\t\t\t\t{routes.map((item) =>\n\t\t\t\t\t\t\titem.protected ? (\n\t\t\t\t\t\t\t\t<ProtectedRoute\n\t\t\t\t\t\t\t\t\tpath={item.path}\n\t\t\t\t\t\t\t\t\tkey={item.path}\n\t\t\t\t\t\t\t\t\texact={item.exact || false}\n\t\t\t\t\t\t\t\t\tcomponent={item.component}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\t\tpath={item.path}\n\t\t\t\t\t\t\t\t\tkey={item.path}\n\t\t\t\t\t\t\t\t\texact={item.exact || false}\n\t\t\t\t\t\t\t\t\tcomponent={item.component}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Switch>\n\t\t\t\t\t<RefreshModal />\n\t\t\t\t</Suspense>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default connect((state) => ({ isLogin: state.isLogin, user: state.user }), {\n\tsetAllStudies, setCurrentUser, setPublicStudies\n})(withCookies(App));\n\n// trigger cicd","import i18n from \"i18next\";\nimport { initReactI18next } from \"react-i18next\";\nimport Backend from \"i18next-http-backend\";\n\ni18n.use(initReactI18next)\n\t.use(Backend)\n\t.init({\n\t\tdebug: false,\n\t\tlng: \"en\",\n\t\tns: [\"errormessages\"],\n\t\tbackend: {\n\t\t\tloadPath: `${process.env.PUBLIC_URL}/locales/{{lng}}/{{ns}}.json`,\n\t\t},\n\t\tinterpolation: {\n\t\t\tescapeValue: false, // not needed for react as it escapes by default\n\t\t},\n\t});\nexport default i18n;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport { CookiesProvider } from \"react-cookie\";\nimport App from \"./App\";\nimport { Provider } from \"react-redux\";\nimport { store } from \"./Redux/store\";\nimport { history } from \"./Routes\";\nimport \"./i18n\";\n\nReactDOM.render(\n\t<CookiesProvider>\n\t\t<Provider store={store}>\n\t\t\t<Router history={history}>\n\t\t\t\t<App />\n\t\t\t</Router>\n\t\t</Provider>\n\t</CookiesProvider>,\n\tdocument.getElementById(\"root\"),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Login_container__XMrK6\",\"title\":\"Login_title__3U_k5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Registration_container__1GCGB\",\"confirmationWrapper\":\"Registration_confirmationWrapper__OrX_F\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Landing_container__8xwEZ\",\"imgContent\":\"Landing_imgContent__2KJBF\",\"study_description_collapse\":\"Landing_study_description_collapse__2BS8J\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"desc\":\"Cards_desc__3iyOP\",\"icon\":\"Cards_icon__2ysKh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"StudiesContent_container__247eo\",\"formItem\":\"StudiesContent_formItem__3TlwB\",\"fileterContentOpen\":\"StudiesContent_fileterContentOpen__5m9xx\"};","export function parseJwt(token) {\n\tvar base64Payload = token.split(\".\")[1];\n\tvar payload = Buffer.from(base64Payload, \"base64\");\n\treturn JSON.parse(payload.toString());\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"AdminUsers_wrapper__3jpsW\",\"toolbar\":\"AdminUsers_toolbar__2Fqu5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Patients_container__KOi_o\",\"imgContent\":\"Patients_imgContent__2tCCr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Researchers_container__Oamf3\",\"imgContent\":\"Researchers_imgContent__3sDPe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Config_container__MjeKm\",\"imgContent\":\"Config_imgContent__h5k1_\",\"custom_checkbox\":\"Config_custom_checkbox__3Gg3E\",\"custom_tabs\":\"Config_custom_tabs__1VK3-\",\"custom_general_info_form\":\"Config_custom_general_info_form__2BZfQ\",\"custom_select_tag\":\"Config_custom_select_tag__xBwij\",\"manifest_table\":\"Config_manifest_table__2TX0u\",\"card_wrapper\":\"Config_card_wrapper__31bbM\",\"button\":\"Config_button__2oug5\",\"iconTitle\":\"Config_iconTitle__3G1jk\",\"iconP\":\"Config_iconP__13dRA\",\"manifestList\":\"Config_manifestList__2M_T9\",\"addManifestTable\":\"Config_addManifestTable__1dw_H\",\"menu\":\"Config_menu__3Kx86\",\"input\":\"Config_input__3pbqO\",\"antInput\":\"Config_antInput__1qW16\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sider\":\"Layout_sider__1icv9\",\"content\":\"Layout_content__1aF4i\",\"left-sider\":\"Layout_left-sider__2W8Pg\",\"login\":\"Layout_login__3JzfR\"};"],"sourceRoot":""}