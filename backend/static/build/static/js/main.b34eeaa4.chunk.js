(this.webpackJsonpcanarie_2_0_patient_portal=this.webpackJsonpcanarie_2_0_patient_portal||[]).push([[0],{115:function(e,t,a){e.exports={content:"Home_content__m1wu6",heroContent:"Home_heroContent__1TcO1",hero:"Home_hero__3o5Zq",subtitle:"Home_subtitle__UTq3Y",studies:"Home_studies__7EmR3"}},1556:function(e,t,a){e.exports=a.p+"static/media/indoc-icon.23a0df62.png"},1598:function(e,t,a){e.exports=a.p+"static/media/canarie-cover.7afac2c3.jpeg"},1599:function(e,t,a){e.exports=a.p+"static/media/study_cover.81377403.jpg"},160:function(e,t,a){e.exports={container:"MyStudiesContent_container__3JUEJ",imgContent:"MyStudiesContent_imgContent__PJYah"}},1609:function(e,t,a){},1610:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(26),i=a.n(l),s=a(11),c=a(1620),o=a(51),u=a(52),m=a(141),d=a(73),p=a(72),f=a(281),E=a(40),v=a(1619),g=a(45),b=a(1612),h=a(3),y=a(88),O=a(284),k=a(1614),j=a(1636),S=a(1637),_=a(1638),w=a(1639),C=a(1613),I=a(1631),x=a(87),T=a.n(x),P=a(1622),L=a(323),R=a(1626),A=a(58),N=a(1635),F=a(7),D=a(178),U=a.n(D);function M(e){for(var t=e+"=",a=decodeURIComponent(document.cookie).split(";"),n=0;n<a.length;n++){for(var r=a[n];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}}var q=M("access_token"),z=(M("refresh_token"),U.a.create({baseURL:"https://vhg.indocresearch.org"}));z.defaults.headers.post["Content-Type"]="application/json",z.defaults.timeout=1e4,q&&(z.defaults.headers.common.Authorization="Bearer ".concat(q));U.a.CancelToken;function V(e){return z({url:"/v1/users/login",method:"POST",data:Object(F.a)(Object(F.a)({},e),{},{realm:"canarie"})})}z.interceptors.response.use((function(e){return e}),(function(e){if(e.response){var t=e.response,a=t.data,n=t.status;if(a.result)a.result,console.error(a.result);else switch(n){case 401:for(var r=document.cookie.split(";"),l=0;l<r.length;l++){var i=r[l],s=i.indexOf("="),c=s>-1?i.substr(0,s):i;document.cookie=c+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}"/"===window.location.pathname?window.location.reload():window.location="".concat(window.location.origin),O.a.error("Token Expired. Please Login Again.");break;case 403:O.a.error("The session is expired or token is invalid. Please log in again");break;case 404:O.a.error("404 Not Found");break;case 500:O.a.error("Internal Server Error");break;default:(n<200||n>300)&&O.a.error("Error in API calling")}}else e.request?(console.log("TCL: handleApiFailure -> error.request",e.request),O.a.error("Error network: cannot receive a response")):(console.log("handleApiFailure -> error",e),e.message,O.a.error("The input data is invalid"));return new Promise((function(t,a){return a(e)}))}));function B(){return z({url:"/v1/containers",method:"GET",params:{relation:'["admin", "member", "patient"]'}})}function H(e){return z({url:"/v1/".concat(e,"/patients"),method:"GET"})}function Y(e,t,a){return z({url:"/v1/".concat(e,"/applicable"),method:"POST",data:{user:t,role:a}})}function G(e,t,a){return z({url:"/v1/".concat(e,"/applicable"),method:"DELETE",data:{user:t}})}function K(e){return z({url:"/v1/user-survey/status",params:{study_id:e}})}function W(e,t){return z({url:"/v1/dataset/".concat(e,"/properties"),method:"POST",data:t})}function J(){return z({url:"v1/dataset/discoverable"})}a(373);var X=a(44);function Z(e){var t=X.isArray(e)?[]:{};return X.forEach(e,(function(e,a){(X.isPlainObject(e)||X.isArray(e))&&(e=Z(e)),t[X.snakeCase(a)]=e})),t}var Q=a(127);var $=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_REFRESH_MODAL":return n;default:return e}},ee=a(59),te=a(287),ae=a(286),ne=a(60),re=a.n(ne),le=a(44),ie=a.n(le),se=a(142),ce=new(function(){function e(){var t=this;Object(o.a)(this,e),this.cookies=new te.a,this.listeners=[],setInterval((function(){t._traverseListeners()}),1e3)}return Object(u.a)(e,[{key:"getCookie",value:function(e){if("string"!==typeof e)throw new Error("the name argument should be a string");return this.cookies.get(e)}},{key:"setCookies",value:function(e){var t=this;Object.keys(e).forEach((function(a){t.cookies.set(a,e[a],{path:"/"})}))}},{key:"refreshToken",value:function(e){z.defaults.headers.common.Authorization="Bearer ".concat(e||this.getCookie("access_token")),this._traverseListeners()}},{key:"_traverseListeners",value:function(){var e=this.getTokenTimeRemain();this.listeners.forEach((function(t){var a=t.time,n=t.func,r=t.condition,l=t.params;r(e,a)&&n.apply(void 0,Object(ee.a)(l))}))}},{key:"addListener",value:function(e){var t=Object(se.v4)(),a=e.time,n=e.func,r=e.condition,l=void 0===r?function(e,t){return e===t}:r,i=e.params,s=void 0===i?[]:i;if("number"!==typeof a)throw new Error("the time should be a number");if(!ie.a.isFunction(n))throw new Error("the listener.func should be a function");if(l&&!ie.a.isFunction(l))throw new Error("the listener.condition should be a function");if(s&&!Array.isArray(s))throw new Error("the params for func should be grouped into an array in order");return this.listeners.push({time:a,func:n,condition:l,params:s,listenerId:t}),t}},{key:"removeListener",value:function(e){if("string"!==typeof e)throw new Error("the listenerId should be an string");ie.a.remove(this.listeners,(function(t){return t.listenerId===e}))}},{key:"getTokenTimeRemain",value:function(e){return(e=e||this.getCookie("access_token"))?Object(ae.a)(e).exp-re()().unix():-1}},{key:"clearCookies",value:function(){var e=this;console.log("TokenManager -> clearCookies -> clearCookies!!"),Object.keys(this.cookies.getAll()).forEach((function(t){e.cookies.remove(t,{path:"/"})}))}},{key:"checkTokenUnExpiration",value:function(){var e=this.getCookie("access_token");return!!(e&&this.getTokenTimeRemain(e)>=0)}}]),e}()),oe=Boolean(ce.checkTokenUnExpiration());var ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch("boolean"!==typeof n&&(n=!1),a){case"SET_IS_LOGIN":return n;default:return e}},me={allStudies:[]},de={},pe={},fe=[],Ee={isSurveyStarted:!1},ve={attrsOrder:[]},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ATTRS_ORDER":return{attrsOrder:t.payload};case"UPDATE_ATTRS_ORDER":return{attrsOrder:[].concat(Object(ee.a)(e.attrsOrder),[t.payload])};default:return e}},be=Object(Q.b)({studies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ALL_STUDIES":var a=t.payload.allStudies;return Object(F.a)(Object(F.a)({},e),{},{allStudies:a});default:return e}},refreshTokenModal:$,isLogin:ue,study:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_STUDY":return t.payload;default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return t.payload;default:return e}},publicStudies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PUBLIC_STUDIES":var a=t.payload.studies;return a;default:return e}},redCapLinks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SURVEY_LINK":case"SET_SURVEY_QUEUE_LINK":case"SET_SURVEY_STATUS":return Object(F.a)(Object(F.a)({},e),t.payload);default:return e}},studyAttributes:ge}),he=Object(Q.c)(be,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());function ye(e){return Array.isArray(e)?e.map((function(e){return Oe(e)})):Oe(e)}function Oe(e){if("function"!==typeof e)throw new Error("You should pass a function");return function(t){he.dispatch(e(t))}}var ke=function(e){return{type:"SET_ALL_STUDIES",payload:{allStudies:e}}},je=function(e){return{type:"SET_REFRESH_MODAL",payload:e}},Se=function(e){return{type:"SET_IS_LOGIN",payload:e}},_e=function(e){return{type:"SET_CURRENT_USER",payload:e}},we=function(e){return{type:"SET_PUBLIC_STUDIES",payload:{studies:e}}},Ce=function(e){return{type:"SET_ATTRS_ORDER",payload:e}},Ie=ye([Se,je]),xe=Object(h.a)(Ie,2),Te=xe[0],Pe=xe[1];var Le=a(260);function Re(e){return e.split(/\n/g).map((function(e){return r.a.createElement("div",null,e,r.a.createElement("br",null))}))}function Ae(e){for(var t=e.split("&"),a={},n=0;n<t.length;n++){var r=t[n].split("="),l=decodeURIComponent(r[0]),i=decodeURIComponent(r[1]);if("undefined"===typeof a[l])a[l]=decodeURIComponent(i);else if("string"===typeof a[l]){var s=[a[l],decodeURIComponent(i)];a[l]=s}else a[l].push(decodeURIComponent(i))}return a}function Ne(e){return z({url:"/v1/admin/invite",method:"POST",data:e})}function Fe(e){return z({url:"/v1/admin/userinfo",method:"POST",data:Object(F.a)(Object(F.a)({},e),{},{realm:"canarie"})})}function De(e){return z({url:"/v1/admin/users",method:"DELETE",data:{users:e,realm:"canarie"}})}function Ue(e){return z({url:"/v1/admin/users",method:"PUT",data:{users:e,realm:"canarie"}})}function Me(e){return z({url:"/v1/admin/users",method:"POST",data:Object(F.a)(Object(F.a)({},e),{},{realm:"canarie",role:"patient"})})}function qe(e,t,a){return z({url:"/v1/".concat(e,"/assign/").concat(t,"?relation=").concat(a),method:"PUT"})}function ze(e,t){return z({url:"v1/admin/invitation",method:"PUT",data:{invitation_code:e,action:t}})}function Ve(e,t){return z({url:"v1/fitbit/data-points/".concat(e),method:"POST",data:{username:t,normalize:!1}})}var Be=function(e){var t=Object(n.useState)({}),a=Object(h.a)(t,2),l=a[0],i=a[1],s=Object(n.useState)(!1),c=Object(h.a)(s,2),o=c[0],u=c[1],m=P.a.useForm(),d=Object(h.a)(m,1)[0],p=Object(I.a)(["message"]).t;Object(n.useEffect)((function(){var t={username:e.username};i(t)}),[e.visible,e.username]);var f=r.a.createRef();return r.a.createElement(L.a,{title:"Reset Password",visible:e.visible,maskClosable:!1,closable:!1,destroyOnClose:!0,footer:[r.a.createElement(g.a,{id:"reset_password_modal_cancel",key:"back",onClick:function(){e.handleCancel(),f.current.resetFields()},disabled:o},"Close"),r.a.createElement(g.a,{id:"reset_password_modal_submit",key:"submit",type:"primary",loading:o,onClick:function(){u(!0),f.current.validateFields().then((function(t){var a;t.password!==t.newPassword&&t.newPassword===t.newPassword2?(a={old_password:t.password,new_password:t.newPassword,username:e.username},z({url:"v1/users/password/change",method:"PUT",data:Object(F.a)(Object(F.a)({},a),{},{realm:"canarie"})})).then((function(t){t&&200===t.status&&(O.a.success(p("message:users.resetPassword.success")),u(!1),d.resetFields(),e.handleCancel())})).catch((function(e){e.response&&400===e.response.status?O.a.error(p("message:users.resetPassword.oldPassword.valid")):O.a.error(p("message:users.resetPassword.fail")),u(!1)})):u(!1)})).catch((function(e){u(!1)}))}},"Submit")]},r.a.createElement(P.a,{layout:"vertical",name:"basic",initialValues:l,onFinish:function(e){console.log("Success:",e)},onFinishFailed:function(e){console.log("Failed:",e)},ref:f,form:d},r.a.createElement(P.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:p("message:users.resetPassword.username.empty")}]},r.a.createElement(R.a,{disabled:!0})),r.a.createElement(P.a.Item,{label:"Old Password",name:"password",rules:[{required:!0,message:p("message:users.resetPassword.oldPassword.empty")}]},r.a.createElement(R.a.Password,{onCopy:function(e){return e.preventDefault()},onPaste:function(e){return e.preventDefault()},autocomplete:"off"})),r.a.createElement(P.a.Item,{label:r.a.createElement("span",null,"New Password\xa0",r.a.createElement(A.a,{title:p("password")},r.a.createElement(N.a,null))),name:"newPassword",rules:[{required:!0,message:p("message:users.resetPassword.newPassword.empty"),whitespace:!0},{pattern:new RegExp(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[-_!%&/()=?*+#,.;])[A-Za-z\d-_!%&/()=?*+#,.;]{11,30}$/g),message:p("message:users.resetPassword.newPassword.valid")},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")===a?Promise.reject(p("message:users.resetPassword.newPassword.valid")):Promise.resolve()}}}],dependencies:["password"]},r.a.createElement(R.a.Password,{onCopy:function(e){return e.preventDefault()},onPaste:function(e){return e.preventDefault()},autocomplete:"off",onChange:function(e){d.setFieldsValue(e.target.value);var t=d.getFieldValue("newPassword2");t&&e.target.value!==t?t&&e.target.value!==t&&d.validateFields(["newPassword2"],(function(){return Promise.reject()})):d.validateFields(["newPassword2"],(function(){return Promise.resolve()}))}})),r.a.createElement(P.a.Item,{label:"Confirm Password",name:"newPassword2",rules:[{required:!0,message:p("message:users.resetPassword.confirmPassword.empty")},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("newPassword")!==a?Promise.reject(p("message:users.resetPassword.confirmPassword.valid")):Promise.resolve()}}}]},r.a.createElement(R.a.Password,{onCopy:function(e){return e.preventDefault()},onPaste:function(e){return e.preventDefault()},autocomplete:"off"}))))},He=b.a.Header,Ye=y.a.SubMenu;var Ge=Object(E.k)((function(e){var t=Object(n.useState)(!1),l=Object(h.a)(t,2),i=l[0],c=l[1],o=Object(C.a)(["isLogin"]),u=Object(h.a)(o,3),m=u[0],d=(u[1],u[2]),p=m.isLogin,f=m.username,E=m.role,v=void 0===E?"":E,b=Object(I.a)(["message"]),x=b.t;return b.i18n,r.a.createElement(He,{className:"header",style:{background:"white",boxShadow:"0 0 14px 1px rgba(0, 0, 0, 0.1)",position:"sticky",top:"0",zIndex:"100",width:"100%",height:"100%"}},r.a.createElement(y.a,{mode:"horizontal",style:{lineHeight:"64px"},selectedKeys:function(){switch(e.location.pathname.slice(1).split("/")[0]){case"":return["logo"];case"login":return["login"];case"my-studies":return["my-studies"];case"studies":return["studies"];default:return[]}}()},r.a.createElement(y.a.Item,{key:"logo",style:{marginRight:"27px",paddingLeft:0}},r.a.createElement(s.b,{to:"/"},r.a.createElement("img",{src:a(1556),style:{height:"40px"},alt:"icon"}))),p&&r.a.createElement(y.a.Item,{key:"my-studies"},r.a.createElement(s.b,{to:"/my-studies"},r.a.createElement(j.a,null)," My studies")),r.a.createElement(y.a.Item,{key:"studies"},r.a.createElement(s.b,{to:"/studies"},r.a.createElement(S.a,null)," Discover Studies")),p&&"instance-admin"==v&&r.a.createElement(y.a.Item,{key:"users"},r.a.createElement(s.b,{to:"/admin/users"},r.a.createElement(_.a,null)," User Management")),!p&&r.a.createElement(y.a.Item,{key:"6",className:T.a.login},r.a.createElement(s.b,{to:"/registration"},r.a.createElement(g.a,{type:"primary"},"Register"))),p?r.a.createElement(Ye,{title:r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{style:{backgroundColor:"researcher"===v?"#2768b7":"#5e94d4"},icon:r.a.createElement(w.a,null),size:"small"})," ",f),className:T.a.login},r.a.createElement(y.a.ItemGroup,{key:"role",title:v.toUpperCase()},r.a.createElement(y.a.Item,{key:"home"},r.a.createElement(s.b,{to:"/user"},"User Center")),r.a.createElement(y.a.Item,{key:"reset",onClick:function(){c(!0)}},"Reset Password"),r.a.createElement(y.a.Item,{key:"5",onClick:function(){d("isLogin",{path:"/"}),d("username",{path:"/"}),d("access_token",{path:"/"}),d("refresh_token",{path:"/"}),e.history.push("/"),O.a.success(x("message:logout"))}},"Logout"))):r.a.createElement(y.a.Item,{key:"login",className:T.a.login},r.a.createElement(s.b,{to:"/login"},r.a.createElement(g.a,{type:"link"},"Login")))),r.a.createElement(Be,{visible:i,username:f||"Error",handleCancel:function(){c(!1)}}))})),Ke=b.a.Sider,We=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={collapsed:!0},e.onCollapse=function(t){console.log(t),e.setState({collapsed:t})},e}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(Ke,{collapsible:!0,collapsed:this.state.collapsed,reverseArrow:!0,theme:"light",onCollapse:this.onCollapse},this.props.children)}}]),a}(r.a.Component),Je=b.a.Sider,Xe=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={collapsed:!0},e.onCollapse=function(t){console.log(t),e.setState({collapsed:t})},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.title;return r.a.createElement(Je,{trigger:null,collapsed:this.state.collapsed,onCollapse:this.onCollapse,reverseArrow:!0,zeroWidthTriggerStyle:{backgroundColor:"white",right:"-23px"},className:T.a.sider,theme:"light"},r.a.createElement("div",{className:T.a.content},e&&r.a.createElement("p",{className:T.a["left-sider"]},e),this.props.children))}}]),a}(n.Component),Ze=a(22),Qe=b.a.Content;var $e=Object(E.k)(Object(Ze.b)(null,null)((function(e){var t=e.observationVars,a=void 0===t?[]:t,l=e.initFunc,i=void 0===l?function(){}:l,s=e.rightContent,c=e.leftContent,o=e.children;return Object(n.useEffect)(i,a),r.a.createElement(b.a,null,r.a.createElement(Ge,null),r.a.createElement(Qe,{className:T.a.content},r.a.createElement(b.a,null,c&&r.a.createElement(Xe,null,c),o,s&&r.a.createElement(We,null,s))))}))),et=function(){return r.a.createElement("div",{style:{textAlign:"center",fontSize:"12px",padding:"10px"}},"Copyright \xa9 ",(new Date).getFullYear(),","," ",r.a.createElement("a",{href:"https://www.indocresearch.org/",target:"_blank",rel:"noopener noreferrer"},"Indoc Research"),". All Rights Reserved.")},tt=a(1630),at=a(145),nt=a(294),rt=a(83),lt=a(1632),it=a(1640),st=a(1641),ct=a(1642),ot=a(1643),ut=a(241),mt=a.n(ut),dt=tt.a.Meta;var pt=function(e){var t=Object(C.a)(),a=Object(h.a)(t,1)[0].isLogin,n=e.data,l=Object(Ze.c)();function i(){O.a.success("Please login to perform this action.")}return r.a.createElement(at.a,{gutter:16},null===n?r.a.createElement(nt.a,null):r.a.createElement(r.a.Fragment,null,0===n.length?"No study data available.":n.map((function(e,t){return r.a.createElement(rt.a,{xs:{span:24},sm:{span:12},md:{span:8},lg:{span:6},style:{marginBottom:"16px"},key:t},r.a.createElement(tt.a,{cover:r.a.createElement(s.b,{to:"/study/".concat(e.id,"/landing"),onClick:function(){var t=e.id,a=n&&n.find((function(e){return e.id===Number(t)}));l({type:"SET_CURRENT_STUDY",payload:a})}},r.a.createElement(it.a,{className:mt.a.icon})),key:t,actions:a?[r.a.createElement(s.b,{to:"/study/".concat(e.id,"/landing")},r.a.createElement(st.a,{key:"view"})),r.a.createElement(ct.a,{key:"star",onClick:function(){return O.a.success("Successfully starred the study.")}}),r.a.createElement(ot.a,{key:"ellipsis"})]:[r.a.createElement(s.b,{to:"/login"},r.a.createElement(st.a,{key:"view",onClick:i,style:{width:"100%"}})),r.a.createElement(s.b,{to:"/login"},r.a.createElement(ct.a,{key:"star",onClick:i,style:{width:"100%"}})),r.a.createElement(ot.a,{key:"ellipsis"})]},r.a.createElement(dt,{title:e.name?r.a.createElement(r.a.Fragment,null,e.name," ","draft"===e.status?r.a.createElement(lt.a,{color:"purple"},"Draft"):r.a.createElement(lt.a,{color:"green"},"Recruiting")):"Study A",description:r.a.createElement("div",{className:mt.a.desc},e.description?e.description:"Study description.")})))}))))},ft=a(115),Et=a.n(ft);var vt=Object(E.k)((function(e){var t=e.match;return t.path,t.params,r.a.createElement($e,Object.assign({},{observationVars:[],initFunc:function(){}},{rightContent:""}),r.a.createElement("section",{className:Et.a.hero}),r.a.createElement("section",{className:Et.a.heroContent},r.a.createElement("h1",{className:Et.a.h1},"CANARIE ",r.a.createElement("br",null),"Patient Portal"),r.a.createElement("p",{className:Et.a.subtitle},"The Patient Data Gateway."),r.a.createElement(s.b,{to:"/studies"},r.a.createElement(g.a,{type:"primary"},"Discover Studies"))),r.a.createElement("section",{className:Et.a.studies},r.a.createElement("div",{className:Et.a.content},r.a.createElement("h2",null,"Recruiting Studies"),r.a.createElement(pt,{data:[[],[],[],[]]}))),r.a.createElement(et,null))})),gt=a(13),bt=a.n(gt),ht=a(28),yt=a(1624),Ot=a(243),kt=a(1644),jt=a(1645),St=a(1646),_t=a(166),wt=a.n(_t);var Ct=function(){var e=Object(n.useState)(window.innerWidth<576),t=Object(h.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){var e=function(){var e=window.innerWidth<576;a!==e&&r(e)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}})),a},It={RECEIVED_LOGOUT:"RECEIVED_LOGOUT",RECEIVED_LOGIN:"RECEIVED_LOGIN",TOKEN_EXPIRATION:"TOKEN_EXPIRATION",LOGOUT_REFRESH_MODAL:"LOGOUT_REFRESH_MODAL",LOGOUT_HEADER:"LOGOUT_HEADER"};Object.entries(It).forEach((function(e){var t=Object(h.a)(e,2),a=t[0],n=t[1];It[a]="USER_AUTH_"+n}));var xt={userAuthLogout:It},Tt=ye([je,Se]),Pt=Object(h.a)(Tt,2),Lt=Pt[0],Rt=Pt[1],At=new(function(){function e(){Object(o.a)(this,e)}return Object(u.a)(e,[{key:"init",value:function(){"true"===ce.getCookie("isLogin")&&(Rt(!0),this.initRefreshModal(),this.initExpirationLogout(),ce.refreshToken(),this.autoRefreshMonitor())}},{key:"initRefreshModal",value:function(){this.openRefreshModalId=ce.addListener({time:60,func:function(){he.getState().isLogin&&Lt(!0)},condition:function(e,t){return e<t&&ce.checkTokenUnExpiration()}})}},{key:"initExpirationLogout",value:function(){var e=this;this.expirationId=ce.addListener({time:0,func:function(){e.logout(xt.userAuthLogout.TOKEN_EXPIRATION)},condition:function(e,t){return e<t}})}},{key:"autoRefreshMonitor",value:function(){ce.addListener({time:61,func:function(){he.getState().username;he.getState().isLogin&&Lt(!1)},condition:function(e,t){return ce.checkTokenUnExpiration()&&e>t}})}},{key:"extendAuth",value:function(){var e=Object(ht.a)(bt.a.mark((function e(){var t,a,n,r,l;return bt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ce.getCookie("refresh_token"),e.next=3,i={refreshtoken:t},z({url:"/v1/users/refresh",method:"POST",data:Object(F.a)(Object(F.a)({},i),{},{realm:"canarie"})});case 3:return a=e.sent,n=a.data.result,r=n.access_token,l=n.refresh_token,ce.setCookies({access_token:r,refresh_token:l}),ce.refreshToken(r),e.abrupt("return");case 8:case"end":return e.stop()}var i}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"logout",value:function(e){if(!Object.values(xt.userAuthLogout).includes(e))throw new Error("the namespace is not defined on userAuth namepace file");console.log(e,"namespace of logout"),ce.clearCookies(),Te(!1),Pe(!1),ce.removeListener(this.expirationId),window.location.href="/"}}]),e}()),Nt=b.a.Content,Ft=yt.a.Title,Dt=Ot.a.TabPane,Ut={labelCol:{span:5},wrapperCol:{span:19}},Mt={wrapperCol:{span:24}};var qt=Object(E.k)(Object(Ze.b)((function(e){return{isLogin:e.isLogin}}),{setIsLoginCreator:Se,setCurrentUser:_e})((function(e){var t=Object(n.useState)("patient"),a=Object(h.a)(t,2),l=a[0],i=a[1],c=Object(n.useState)(!1),o=Object(h.a)(c,2),u=o[0],m=o[1],d=Object(C.a)(["isLogin"]),p=Object(h.a)(d,2),f=(p[0],p[1],Ct()),E=Object(I.a)(["message"]),v=E.t;E.i18n,Object(n.useEffect)((function(){e.isLogin&&(window.location="/my-studies")}));var b=e.match,y=(b.path,b.params),k={observationVars:[],initFunc:function(){}},j=function(e){console.log("Failed:",e)},S=r.a.createElement(tt.a,null,r.a.createElement("h2",{style:{textAlign:"center"}},"Forgot Your Password?"),r.a.createElement(P.a,Object.assign({},Ut,{name:"basic",initialValues:{remember:!0},onFinish:function(e){var t;(t=e.email,z({url:"/v1/users/password/forget",method:"PUT",data:{email:t,realm:"canarie"}})).then((function(e){200===e.status&&O.a.success(v("message:login.forgot_password.success"))}))},onFinishFailed:j}),r.a.createElement(P.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:v("message:login.email.required")}]},r.a.createElement(R.a,{prefix:r.a.createElement(w.a,null)})),r.a.createElement(at.a,{style:{marginTop:-15}},r.a.createElement(rt.a,{xs:{span:0},sm:{span:5}}),r.a.createElement(rt.a,{xs:{span:24},sm:{span:19}},r.a.createElement(P.a.Item,Mt,r.a.createElement("a",{className:wt.a.forgot,onClick:function(){m(!1)}},"\xab Back to Login")))),r.a.createElement(at.a,null,r.a.createElement(rt.a,{xs:{span:0},sm:{span:5}}),r.a.createElement(rt.a,{xs:{span:24},sm:{span:19}},r.a.createElement(P.a.Item,Mt,r.a.createElement(g.a,{type:"primary",htmlType:"submit",className:"login-form-button",style:{width:"100%"}},"Submit"))))));return r.a.createElement($e,k,r.a.createElement(Nt,{className:"content"},r.a.createElement("div",{className:wt.a.container},u?null:r.a.createElement(Ft,{level:3,className:wt.a.title},"Welcome to CANARIE Patient Portal"),u?S:r.a.createElement(tt.a,null,r.a.createElement(Ot.a,{defaultActiveKey:"patient",centered:!0,onChange:function(e){i(e)}},r.a.createElement(Dt,{tab:r.a.createElement("span",null,r.a.createElement(kt.a,null),!f&&"I am a "," Patient"),key:"patient"},r.a.createElement(at.a,null,r.a.createElement(rt.a,{xs:{span:0},sm:{span:5}}),r.a.createElement(rt.a,{xs:{span:24},sm:{span:19}},r.a.createElement("p",null,"New to the platform?"," ",r.a.createElement(s.b,{to:"/registration"},"Register here."))))),r.a.createElement(Dt,{tab:r.a.createElement("span",null,r.a.createElement(jt.a,null),!f&&"I am a ","Researcher"),key:"researcher"},r.a.createElement(at.a,null,r.a.createElement(rt.a,{xs:{span:0},sm:{span:5}}),r.a.createElement(rt.a,{xs:{span:24},sm:{span:19}},r.a.createElement("p",null,"Researcher accounts are created by invitation only. Please contact the instance admin if you require credentials."))))),r.a.createElement(P.a,Object.assign({},Ut,{name:"basic",initialValues:{remember:!0},onFinish:function(t){V(Object(F.a)(Object(F.a)({},t),{},{user_role:l})).then(function(){var a=Object(ht.a)(bt.a.mark((function a(n){var r,l,i,s,c;return bt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=n.data.result,l=r.access_token,i=r.refresh_token,s=Object(Le.a)(l),ce.setCookies({isLogin:!0,username:t.username,role:s.user_role,access_token:l,refresh_token:i}),e.setIsLoginCreator(!0),At.initRefreshModal(),At.initExpirationLogout(),ce.refreshToken(l),a.next=9,Fe({username:t.username});case 9:200===(c=a.sent).status&&(console.log(c.data.result),e.setCurrentUser(c.data.result)),e.location.state?e.history.push(e.location.state.prevPath):(console.log(y),e.history.push("/my-studies")),O.a.success("Welcome back, ".concat(t.username));case 13:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){e.response&&409===e.response.status?"patient"===l?O.a.error(v("message:login.patient_tab.role")):O.a.error(v("message:login.researcher_tab.role")):e.response&&403===e.response.status&&O.a.error(v("message:login.password_error"))}))},onFinishFailed:j}),r.a.createElement(P.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:v("message:login.username.required")}]},r.a.createElement(R.a,{prefix:r.a.createElement(w.a,null)})),r.a.createElement(P.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:v("message:login.password.required")}]},r.a.createElement(R.a.Password,{prefix:r.a.createElement(St.a,null)})),r.a.createElement(at.a,null,r.a.createElement(rt.a,{xs:{span:0},sm:{span:5}}),r.a.createElement(rt.a,{xs:{span:24},sm:{span:19}},r.a.createElement(P.a.Item,Mt,r.a.createElement("a",{className:wt.a.forgot,onClick:function(){m(!0)}},"Forgot password?")))),r.a.createElement(at.a,null,r.a.createElement(rt.a,{xs:{span:0},sm:{span:5}}),r.a.createElement(rt.a,{xs:{span:24},sm:{span:19}},r.a.createElement(P.a.Item,Mt,r.a.createElement(g.a,{type:"primary",htmlType:"submit"},"Log In")))))))))}))),zt=b.a.Content;for(var Vt=function(e){var t={observationVars:[],initFunc:function(){}},a=Object(E.j)();return console.log(Zr),r.a.createElement($e,t,r.a.createElement(zt,{className:"content"},r.a.createElement(E.e,null,Zr.map((function(e){return r.a.createElement(E.c,{exact:e.exact||!1,path:a.url+e.path,key:e.path,render:function(t){return r.a.createElement(e.component,null)}})})))))},Bt=a(1647),Ht=a(1648),Yt=a(1649),Gt=a(242),Kt=a.n(Gt),Wt=a(162),Jt=a(1615),Xt=(R.a.Search,Wt.a.Option),Zt=[],Qt=10;Qt<36;Qt++)Zt.push(r.a.createElement(Xt,{key:Qt.toString(36)+Qt},Qt.toString(36)+Qt));function $t(e){console.log("selected ".concat(e))}var ea=function(){var e=P.a.useForm(),t=Object(h.a)(e,1)[0],a=Object(Ze.c)();return r.a.createElement(P.a,{form:t,name:"dynamic_form_item",onFinish:function(e){console.log("Received values of form:",e)},layout:"vertical",style:{padding:"10px"}},r.a.createElement(P.a.Item,{label:r.a.createElement("strong",null,"Name"),name:"study"},r.a.createElement(R.a,{placeholder:"Search study name"})),r.a.createElement(P.a.Item,{label:r.a.createElement("strong",null,"Study Status"),name:"status"},r.a.createElement(Wt.a,{mode:"multiple",style:{width:"100%"},placeholder:"Recruiting, not yet recruiting",onChange:$t},r.a.createElement(Xt,{key:"recruiting"},"Actively Recruiting"),r.a.createElement(Xt,{key:"developing"},"Recruitment not yet open."),r.a.createElement(Xt,{key:"finished"},"Finished"),r.a.createElement(Xt,{key:"suspended"},"Suspended"))),r.a.createElement(P.a.Item,{label:r.a.createElement("strong",null,"Condition or disease"),name:"disease"},r.a.createElement(Wt.a,{mode:"multiple",style:{width:"100%"},placeholder:"e.g. breast canacer",onChange:$t},r.a.createElement(Xt,{key:"Breast Canacer"},"Breast Canacer"),r.a.createElement(Xt,{key:"Health Behavior"},"Health Behavior"),r.a.createElement(Xt,{key:"Solid Tumor, Adult"},"Solid Tumor, Adult"),r.a.createElement(Xt,{key:"Squamous Cell Carcinoma of Head and Neck"},"Squamous Cell Carcinoma of Head and Neck"))),r.a.createElement(P.a.Item,{label:r.a.createElement("strong",null,"Location"),name:"location"},r.a.createElement(Wt.a,{mode:"multiple",style:{width:"100%"},placeholder:"Select a location",onChange:$t},r.a.createElement(Xt,{key:"BYC"},"BYC"),r.a.createElement(Xt,{key:"CAM"},"CAM"),r.a.createElement(Xt,{key:"SBH"},"SBH"),r.a.createElement(Xt,{key:"UBC"},"UBC"))),r.a.createElement(P.a.Item,{label:r.a.createElement("strong",null,"Keywords"),name:"keywords"},r.a.createElement(Wt.a,{mode:"multiple",style:{width:"100%"},placeholder:"Select or search",onChange:$t},Zt)),r.a.createElement(P.a.Item,{label:r.a.createElement("strong",null,"Investigator"),name:"investigator"},r.a.createElement(Wt.a,{mode:"multiple",style:{width:"100%"},placeholder:"Select a user",onChange:$t},r.a.createElement(Xt,{key:"Alana Sparks"},"Alana Sparks"),r.a.createElement(Xt,{key:"Sara Latour"},"Sara Latour"),r.a.createElement(Xt,{key:"Jon Gane"},"Jon Gane"),r.a.createElement(Xt,{key:"Sue Evans"},"Sue Evans"))),r.a.createElement(P.a.Item,null,r.a.createElement(Jt.a,null,r.a.createElement(g.a,{type:"primary",htmlType:"submit"},"Search"),r.a.createElement(g.a,{type:"",onClick:function(){t.resetFields(),z({url:"/v1/studylist",method:"GET"}).then((function(e){a(ke(e.data.items))}))}},"Reset"))))},ta=b.a.Content,aa=yt.a.Title,na=R.a.Search;var ra=function(){var e=Object(n.useState)(!0),t=Object(h.a)(e,2),a=t[0],l=t[1],i=Object(n.useState)(!1),s=Object(h.a)(i,2),c=s[0],o=s[1],u=Object(Ze.d)((function(e){return e.publicStudies})),m=Ct();return Object(n.useEffect)((function(){var e=function(){l(!0),o(!1)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}})),r.a.createElement(r.a.Fragment,null,!m&&r.a.createElement(Xe,{collapsed:a},r.a.createElement(ea,null)),r.a.createElement(ta,{className:a?"content":"contentOpen"},!m&&r.a.createElement(a?Bt.a:Ht.a,{className:"toggle",onClick:function(){l(!a)}}),r.a.createElement("div",{className:Kt.a.container},r.a.createElement(aa,{level:2},"Discover Studies"),r.a.createElement(at.a,{style:{marginBottom:"20px"},gutter:8},r.a.createElement(rt.a,{xs:{span:24},sm:{span:12}},r.a.createElement(g.a,{type:"link",style:{paddingLeft:0}},"Enter Invitation Code")),r.a.createElement(rt.a,{xs:{span:22},sm:{span:12}},r.a.createElement(na,{placeholder:"Search study name",onSearch:function(e){}})),m&&r.a.createElement(r.a.Fragment,null,r.a.createElement(rt.a,{xs:{span:2}},r.a.createElement(g.a,{type:"primary",shape:"circle",icon:r.a.createElement(Yt.a,null),onClick:function(){o(!c)}})),c&&r.a.createElement(tt.a,{className:Kt.a.fileterContentOpen},r.a.createElement(ea,null)))),u?u.length>0?r.a.createElement(pt,{data:u}):r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",null,"There aren\u2019t any studies that match your search query. Ensure you entered all information correctly and try again."),r.a.createElement("p",null,"Need help?"),r.a.createElement("p",null,r.a.createElement("a",{href:"mailto:che@indocresearch.org"},"Contact administrator")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null)):r.a.createElement(nt.a,null)),r.a.createElement(et,null)))};var la=Object(E.k)((function(e){var t={observationVars:[],initFunc:function(){}};return r.a.createElement($e,t,r.a.createElement(ra,null))})),ia=a(164),sa={admin:["/study/:studyId/researchers","/study/:studyId/patients","/study/:studyId/landing","/study/:studyId/config","/study/:studyId"],member:["/study/:studyId/patients","/study/:studyId/landing","/study/:studyId"],patient:["/study/:studyId/landing","/study/:studyId"]},ca=function(e){var t=e.component,a=Object(ia.a)(e,["component"]),l=Object(C.a)(["isLogin"]),i=Object(h.a)(l,1)[0],s=Object(n.useState)(!0),c=Object(h.a)(s,2),o=c[0],u=c[1],m=Object(Ze.d)((function(e){return e.user})),d=i.role,p=a.location.pathname,f=p.split("/"),v=p.includes("study")&&f[f.length-2];return Object(n.useEffect)((function(){v&&"undefined"!==v&&"patient"!==m.role&&function(e){return z({url:"/v1/".concat(e,"/applicable"),method:"GET"})}(v).then((function(e){var t=i.username;if(200===e.status){var n=e.data.result.find((function(e){return e.username===t})),r=a.path;if("patient"===d)return void(sa[d].includes(r)||u(!1));"instance-admin"===d||sa[n.permission].includes(r)||u(!1)}})).catch((function(e){u(!1)}))}),[]),r.a.createElement(E.c,Object.assign({},a,{render:function(e){return i.isLogin&&o?r.a.createElement(t,Object.assign({},a,e)):r.a.createElement(E.b,{to:{pathname:"/error/403",state:{from:e.location}}})}}))},oa=a(1650),ua=a(1651),ma=a(1652),da=a(1653),pa=a(1654);var fa=function(e){var t=e.currentStudy,a=e.currentPath,n=e.isPublicView,l=e.isSurveyConnected,i=Object(C.a)(),c=Object(h.a)(i,1)[0].role,o=t&&t.permission;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"logo"}),r.a.createElement(y.a,{theme:"light",selectedKeys:[a],mode:"inline"},r.a.createElement(y.a.Item,{key:"landing",icon:r.a.createElement(oa.a,null)},r.a.createElement(s.b,{to:"landing"},"Landing")),!n&&("instance-admin"===c||"admin"===o)&&r.a.createElement(y.a.Item,{key:"config",icon:r.a.createElement(ua.a,null)},r.a.createElement(s.b,{to:"config"},"Study Configuration")),!n&&"patient"!==c&&r.a.createElement(y.a.Item,{key:"patients",icon:r.a.createElement(w.a,null)},r.a.createElement(s.b,{to:"patients"},"Patient")),!n&&("instance-admin"===c||"admin"===o)&&r.a.createElement(y.a.Item,{key:"researchers",icon:r.a.createElement(_.a,null)},r.a.createElement(s.b,{to:"researchers"},"Researchers")),!n&&"patient"===c&&r.a.createElement(y.a.Item,{key:"survey",disabled:!l,icon:r.a.createElement(ma.a,null)},r.a.createElement(s.b,{to:"survey"},"Survey")),!n&&("instance-admin"===c||"admin"===o)&&r.a.createElement(y.a.Item,{key:"5",icon:r.a.createElement(da.a,null)},"Logging"),!n&&r.a.createElement(y.a.Item,{key:"6",icon:r.a.createElement(pa.a,null)},"Help")))},Ea=a(1627);var va=Object(E.k)((function(e){var t=e.match.params.studyId,a=e.routePaths,n=function(e){switch(e){case"My Studies":return"/my-studies";default:return"/study/".concat(t,"/landing")}};function l(e){return e.charAt(0).toUpperCase()+e.slice(1)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ea.a,null,a.map((function(e,t){return r.a.createElement(Ea.a.Item,{key:e},t===a.length-1?r.a.createElement(r.a.Fragment,null,parseInt(e)?e:e&&l(e)):r.a.createElement(r.a.Fragment,null,r.a.createElement(s.b,{to:n(e)},parseInt(e)?e:e&&l(e))))}))))})),ga=b.a.Content;var ba=Object(E.k)((function(e){var t=e.match,a=t.path,l=t.params,i=(e.redirect,{observationVars:[l.datasetId],initFunc:function(){}}),s=Object(C.a)(),c=(Object(h.a)(s,1)[0],Object(Ze.d)((function(e){return e.studies&&e.studies.allStudies}))),o=Object(Ze.d)((function(e){return e.user})),u=Object(Ze.d)((function(e){return e.publicStudies})),m=Object(n.useState)(!1),d=Object(h.a)(m,2),p=d[0],f=d[1],v=Object(n.useState)(!1),g=Object(h.a)(v,2),b=g[0],y=g[1],O=Object(n.useState)(0),k=Object(h.a)(O,2),j=k[0],S=k[1],_=Object(Ze.c)(),w=Object(E.h)(),I=e.match.params.studyId,x=!1,T=c&&c.find((function(e){return e.id===Number(I)}));Object(n.useEffect)((function(){if(T&&(console.log("Location changed",w),o&&Object.keys(o).length&&"patient"===o.role)){var e=o.container_guid_guid,t=o.container_guid_container,a=t&&t.indexOf(String(T.id)),n=e&&e[a];n&&function(e,t){return z({url:"/v1/user-survey/check",method:"POST",data:{survey_id:e,study_id:t}})}(n,String(T.id)).then((function(e){if(200===e.status&&e.data.result&&e.data.result.length>0){y(!0);var t=e.data.result[0];if("1"===t.econsent){f(!0),_({type:"SET_SURVEY_STATUS",payload:{isSurveyStarted:!0}});for(var a=0,r=0,l=Object.keys(t);r<l.length;r++){var i=l[r];i.includes("_complete")&&"2"===t[i]&&a++}S(a)}(function(e,t){return z({url:"/v1/user-survey/link",method:"POST",data:{survey_id:e,study_id:t}})})(n,String(T.id)).then((function(e){200===e.status&&_({type:"SET_SURVEY_LINK",payload:{surveyLink:e.data.result}})}))}})),n&&function(e,t){return z({url:"/v1/user-survey-queue/link",method:"POST",data:{survey_id:e,study_id:t}})}(n,String(T.id)).then((function(e){200===e.status&&_({type:"SET_SURVEY_QUEUE_LINK",payload:{surveyQueueLink:e.data.result}})}))}}),[o,T,w]),T||(T=u&&u.find((function(e){return e.id===Number(I)})))&&(x=!0);var P=e.location.pathname.split("/").filter((function(e){return""!=e})),L=["My Studies",T&&T.name,P[P.length-1]];return r.a.createElement($e,Object.assign({},i,{leftContent:r.a.createElement(fa,{currentStudy:T,currentPath:P.length&&P[2],isPublicView:x,isSurveyConnected:b})}),r.a.createElement(ga,{style:{marginLeft:80}},r.a.createElement("div",{className:"container",style:{maxWidth:"1440px",marginLeft:"50px",marginTop:"50px"}},r.a.createElement(va,{routePaths:L})),r.a.createElement(E.e,null,Br.map((function(e){return e.protected?r.a.createElement(ca,{exact:e.exact||!1,path:a+e.path,key:e.path,component:e.component,datasetId:e.datasetId,currentStudy:T,isSurveyStarted:p,isSurveyConnected:b}):r.a.createElement(E.c,{exact:e.exact||!1,path:a+e.path,key:e.path,render:function(){return r.a.createElement(e.component,{datasetId:e.datasetId,currentStudy:T,isSurveyStarted:p,isSurveyConnected:b,completedSurveyNum:j})}})})))))})),ha=a(1633),ya=a(201),Oa=a(1621),ka=a(1659),ja=a(1662),Sa=a(200),_a=a.n(Sa),wa=a(1616);a(1655),yt.a.Text;var Ca=a(202),Ia=r.a.createRef(),xa={labelCol:{span:6},wrapperCol:{span:18}},Ta=function(e){console.log("Failed:",e)},Pa=[{label:"Instance Admin",value:"instance-admin"}];var La=function(e){var t=Object(I.a)(["message"]),a=t.t,n=(t.i18n,function(){var t=Object(ht.a)(bt.a.mark((function t(){return bt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Ia.current.validateFields().then((function(t){var n=Object.assign({},t,{projectId:-1});console.log("onFinish -> user",n),Ne(n).then((function(e){return O.a.success(a("message:invitation.invite.success"))})).catch((function(e){console.error(e)})),e.onInviteUserCancel(),Ia.current.resetFields()}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()),l=r.a.createElement("p",null,"Instance Admin: An instance admin who oversees the site"),i=function(){var e=Object(ht.a)(bt.a.mark((function e(t,a){var n,r;return bt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n={})[t.field]=a,e.next=5,Fe(n);case 5:if(r=e.sent,ie.a.isEmpty(r.data.result)){e.next=8;break}throw"".concat(t.field," ").concat(a," is taken");case 8:e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement(L.a,{title:"Invite User",visible:e.inviteUser,onOk:n,onCancel:e.onInviteUserCancel},r.a.createElement(P.a,Object.assign({},xa,{name:"basic",initialValues:{remember:!0},onFinish:n,onFinishFailed:Ta,ref:Ia}),r.a.createElement(P.a.Item,{label:"Username",name:"username",validateTrigger:"onBlur",rules:[{required:!0,message:a("message:invitation.invite.username.required")},{validator:i}]},r.a.createElement(R.a,null)),r.a.createElement(P.a.Item,{label:"First Name",name:"firstname",rules:[{required:!0,message:a("message:invitation.invite.firstName.required")}]},r.a.createElement(R.a,null)),r.a.createElement(P.a.Item,{label:"Last Name",name:"lastname",rules:[{required:!0,message:a("message:invitation.invite.lastName.required")}]},r.a.createElement(R.a,null)),r.a.createElement(P.a.Item,{label:"User Email",name:"email",validateTrigger:"onBlur",rules:[{required:!0,message:a("message:invitation.invite.email.required")},{type:"email",message:a("message:invitation.invite.username.valid")},{validator:i}]},r.a.createElement(R.a,null)),r.a.createElement(P.a.Item,{label:r.a.createElement(A.a,{placement:"top",title:l},"Role ",r.a.createElement(N.a,null)),name:"role",rules:[{required:!0,message:a("message:invitation.invite.role.required")}]},r.a.createElement(Ca.default.Group,{options:Pa}))))},Ra=a(302),Aa=a.n(Ra),Na=a(1623),Fa=a(324),Da=a(1656),Ua=yt.a.Text,Ma=a(1575);var qa=function(e){var t=e.closeBulkModal,a=e.visible,l=Object(n.useState)(null),i=Object(h.a)(l,2),s=i[0],c=i[1],o=Object(n.useState)([]),u=Object(h.a)(o,2),m=u[0],d=u[1],p=Object(n.useState)(null),f=Object(h.a)(p,2),E=f[0],v=f[1],b=Object(n.useState)(null),y=Object(h.a)(b,2),k=y[0],j=y[1],S=Object(n.useState)(0),_=Object(h.a)(S,2),w=_[0],C=_[1],x=Object(I.a)(["message"]),T=x.t;function P(){t(),R()}function R(){v(null),c(null),j(null),C(0),d([])}x.i18n;var A=function(){var e=Object(ht.a)(bt.a.mark((function e(){var t,a,n,r;return bt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=function(e){return new Ma((function(n,r){N({field:"username"},e.username).then((function(){return console.log("name is ok")})).then((function(){return N({field:"email"},e.email)})).then((function(){return console.log("email is ok")})).then((function(){return Ne(Object.assign({},e,{projectId:-1}))})).then((function(){C(a+=t),n("userAdded!")})).catch((function(e){d([].concat(Object(ee.a)(m),[e.message])),console.log(e.message),r(new Error(e.message))}))}))},console.log("selected:",k),C(0),t=1/k.length*100,a=0,n=k.map((function(e){return r(e)})),Ma.allSettled(n).then((function(e){var t=!1;e.forEach((function(e){e._settledValueField instanceof Error&&(t=!0)})),t?O.a.info(T("message:invitation.bulk_invite.problem")):(C(100),O.a.success(T("message:invitation.bulk_invite.success")))}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(e,t){return new Ma((function(a,n){var r={};r[e.field]=t,Fe(r).then((function(r){console.log("validateUser -> result",r),ie.a.isEmpty(r.data.result)||n(new Error("".concat(e.field," ").concat(t," is taken")));a({message:"the user info is valid"})})).catch((function(e){console.log("validateUser -> err",e),n(new Error(e))}))}))},D={name:"file",beforeUpload:function(e){return R(),"text/csv"===e.type||"application/vnd.ms-excel"===e.type?(_a.a.parse(e,{header:!0,skipEmptyLines:!0,complete:function(e){if(e.data[0]){for(var t=Object.keys(e.data[0]),a=0,n=["username","firstname","lastname","email","role"];a<n.length;a++){var r=n[a];if(!t.includes(r))return c('csv header has to include following fields: "username","firstname","lastname","email", "role"'),!1}v(e.data),j(e.data)}else c("Cannot read items in uploaded file, please use the template or check format.")},error:function(e){console.error("error: ",e)}}),!1):(c("You can only upload csv file."),v(null),!1)},showUploadList:!1,headers:{authorization:"authorization-text"},onChange:function(e){e.file.status,"done"===e.file.status?O.a.success("".concat(e.file.name," ").concat(T("message:invitation.bulk_invite.file.success"))):"error"===e.file.status&&O.a.error("".concat(e.file.name," ").concat(T("message:invitation.bulk_invite.file.failed")))}},U={onChange:function(e,t){console.log("selectedRowKeys: ".concat(e),"selectedRows: ",t),j(t)},getCheckboxProps:function(e){return{disabled:"Disabled User"===e.name,name:e.name}},selectedRowKeys:k&&k.map((function(e){return e.email}))};return r.a.createElement(L.a,{title:"Bulk Add Users",visible:a,onOk:A,onCancel:P,width:800,footer:[r.a.createElement(g.a,{key:"cancel",onClick:P},"Cancel"),r.a.createElement(g.a,{key:"submit",type:"primary",disabled:!(k&&k.length>0)||s,onClick:A},"Submit")]},r.a.createElement("p",null,"You can use"," ",r.a.createElement("a",{href:"/files/users-template.csv",download:!0,target:"_self"},"this template")," ","to create the csv for bulk adding users."),r.a.createElement("p",null,"Select a csv file which contains user details."),r.a.createElement(Na.a,D,r.a.createElement(g.a,{style:{marginBottom:"15px"}},r.a.createElement(Da.a,null)," Click to Upload")),s&&r.a.createElement("p",null,r.a.createElement(Ua,{type:"danger"},s)),m&&m.map((function(e,t){return r.a.createElement("p",{key:"error-".concat(t)},r.a.createElement(Ua,{type:"danger"},e))})),E&&r.a.createElement(Oa.a,{rowSelection:Object(F.a)({type:"checkbox"},U),dataSource:E,columns:[{title:"Username",dataIndex:"username",key:"username"},{title:"First Name",dataIndex:"firstname",key:"firstname"},{title:"Last Name",dataIndex:"lastname",key:"lastname"},{title:"Email",dataIndex:"email",key:"email"},{title:"Role",dataIndex:"role",key:"role"}],rowKey:function(e){return e.email},footer:function(){return"".concat(k?k.length:0," users are selected")}}),w>0&&r.a.createElement(Fa.a,{strokeColor:m.length>0?null:{from:"#108ee9",to:"#87d068"},percent:w,status:m.length>0?"exception":"active"}))},za=a(1657),Va=a(1658),Ba=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).statusMap={active:"success",disabled:"error",pending:"warning",hibernate:"error",null:"success"},n.getColumnSearchProps=function(e,t){return{filterDropdown:function(t){var a=t.setSelectedKeys,l=t.selectedKeys,i=t.confirm,s=t.clearFilters;return r.a.createElement("div",{style:{padding:8}},r.a.createElement(R.a,{ref:function(e){n.searchInput=e},placeholder:"Search ".concat(e),value:l[0],onChange:function(e){return a(e.target.value?[e.target.value]:[])},onPressEnter:function(){return n.props.handleSearch(l,i,e)},style:{width:188,marginBottom:8,display:"block"}}),r.a.createElement(Jt.a,null,r.a.createElement(g.a,{type:"primary",onClick:function(){return n.props.handleSearch(l,i,e)},icon:r.a.createElement(za.a,null),size:"small",style:{width:90}},"Search"),r.a.createElement(g.a,{onClick:function(){return n.props.handleReset(s,e)},size:"small",style:{width:90}},"Reset")))},filterIcon:function(e){return r.a.createElement(za.a,{style:{color:e?"#1890ff":void 0,top:"60%"}})},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){n.searchInput.select()}),100)},render:function(a,l){if("name"===e){var i="projectUsers"===t?l.projectStatus:l.status,s=r.a.createElement(A.a,{placement:"top",title:i||"active"},r.a.createElement(ha.a,{status:n.statusMap[i]})),c=l.role&&"admin"===l.role&&r.a.createElement(Va.a,{style:{color:"gold",marginLeft:5}});return r.a.createElement(r.a.Fragment,null,s,a,c)}return t&&"platformInvitations"===t&&"email"===e?r.a.createElement(r.a.Fragment,null,a,!l.projectId&&l.role&&"admin"===l.role&&r.a.createElement(Va.a,{style:{color:"gold",marginLeft:5}})):t&&"projectInvitations"===t&&"email"===e?r.a.createElement(r.a.Fragment,null,a,l.projectId&&l.role&&"admin"===l.role&&r.a.createElement(Va.a,{style:{color:"gold",marginLeft:5}})):a}}},n.state={searchText:"",searchedColumn:"",page:0,pageSize:10,order:"desc",sortColumn:"createTime"},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.totalItem,n=t.page,l=t.pageSize,i=t.dataSource,s=t.width,c=t.setClassName,o=t.tableKey,u=t.style,m=this.props.columns&&this.props.columns.map((function(t){return t.searchKey?Object(F.a)(Object(F.a)({},t),e.getColumnSearchProps(t.searchKey,o)):t}));return r.a.createElement(Oa.a,{columns:m,dataSource:i,onChange:this.props.onChange,pagination:{current:n+1,pageSize:l,total:a,showQuickJumper:!0,showSizeChanger:!0},key:this.props.tableKey,scroll:{x:!0},width:s,rowClassName:c,style:u})}}]),a}(r.a.Component);var Ha=function(e){var t=Object(n.useState)(null),a=Object(h.a)(t,2),l=a[0],i=a[1],s=Object(n.useState)({page:0,pageSize:10,orderBy:"create_timestamp",orderType:"desc",filters:{}}),c=Object(h.a)(s,2),o=c[0],u=c[1],m=Object(n.useState)(0),d=Object(h.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(10),v=Object(h.a)(E,2),b=v[0],k=v[1],j=Object(n.useState)(0),S=Object(h.a)(j,2),_=S[0],w=S[1],C=Object(n.useState)([]),x=Object(h.a)(C,2),T=x[0],P=x[1],L=Object(Ze.d)((function(e){return e.studies.allStudies})),R=Object(I.a)(["message"]),A=R.t;R.i18n,Object(n.useEffect)((function(){if(e.projectId){var t=o;t.filters.projectId=e.projectId,u(t)}}),[]),Object(n.useEffect)((function(){N()}),[o,e.totalInvitations]);var N=function(){var t;o.filters.projectId=e.projectId,(t=o,z({url:"v1/admin/invitation-list",method:"GET",params:Z(t)})).then((function(e){var t=e.data,a=t.page,n=t.result,r=t.total;i(n),w(r),f(a)}))},D=function(){var e=Object(ht.a)(bt.a.mark((function e(t,a,n){var r,l;return bt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Object.assign({},o),f(t.current-1),r.page=t.current-1,t.pageSize&&(k(t.pageSize),r.pageSize=t.pageSize),l=[],a.email&&a.email.length>0?(l.push({key:"email",value:a.email[0]}),r.filters.email=a.email[0]):delete r.filters.email,a.invited_by&&a.invited_by.length>0?(l.push({value:a.invited_by[0],key:"invited_by"}),r.filters.invited_by=a.invited_by[0]):delete r.filters.invited_by,n&&n.order&&(n.columnKey&&("email"===n.columnKey?r.orderBy="invitation_detail":r.orderBy=n.columnKey),r.orderType="ascend"===n.order?"asc":"desc"),n&&!n.order&&(r=Object(F.a)(Object(F.a)({},r),{},{orderBy:"create_timestamp",orderType:"desc"})),u(r),P(l);case 11:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),U=[{title:"Email",dataIndex:"email",key:"email",sorter:!0,width:"20%",searchKey:"email"},{title:"Status",dataIndex:"is_active",key:"status",width:"10%",render:function(e,t){return!1===e?r.a.createElement("div",null,r.a.createElement(ha.a,{status:"error"}),"Cancelled"):M(t)?r.a.createElement("div",null,r.a.createElement(ha.a,{status:"default"}),"Expired"):r.a.createElement("div",null,r.a.createElement(ha.a,{status:"success"}),"Active")}},{title:"Invited Time",dataIndex:"create_timestamp",key:"create_timestamp",sorter:!0,width:"15%",render:function(e){return e&&re()(1e3*e).format("YYYY-MM-DD HH:mm:ss")}},{title:"Expiration Time",dataIndex:"expiry_timestamp",key:"expiry_timestamp",sorter:!0,width:"15%",render:function(e){return e&&re()(1e3*e).format("YYYY-MM-DD HH:mm:ss")}},{title:"Project",dataIndex:"projectId",key:"project",width:"10%",render:function(e){var t=L.find((function(t){return t.id===Number(e)}));return t?t.name:"No Project Assigned"}},{title:"Action",key:"action",width:"5%",render:function(e,t){var a=t.status,n=r.a.createElement(y.a,null,r.a.createElement(y.a.Item,{onClick:function(){var e=t.invitation_code;"pending"===a?ze(e,"resend").then((function(e){N(),f(0),k(10),O.a.success(A("message:invitation.patient.re-invite.success"))})).catch((function(e){O.a.error(A("message:invitation.patient.re-invite.failed"))})):O.a.warning("Patient already enrolled")}},"Re-invite"),"pending"===a?r.a.createElement(y.a.Item,{onClick:function(){ze(t.invitation_code,"cancel").then((function(e){N(),f(0),k(10),O.a.success(A("message:invitation.patient.cancel.success"))})).catch((function(e){O.a.error(A("message:invitation.patient.cancel.failed"))}))},style:{color:"red"}},"Revoke Invitation"):void 0);return r.a.createElement(ya.a,{overlay:n,placement:"bottomRight"},r.a.createElement(g.a,{shape:"circle"},r.a.createElement(ka.a,null)))}}],M=function(e){var t=re()();return re()(1e3*e.expiry_timestamp).isBefore(t)};return r.a.createElement(Ba,Object.assign({columns:U,onChange:D,handleReset:function(e,t){e();var a=T;a=a.filter((function(e){return e.key!==t})),P(a)},handleSearch:function(e,t,a){t()},dataSource:l,totalItem:_,pageSize:b,page:p},e))},Ya=a(1663),Ga=a(1664),Ka=a(1625),Wa=a(1628),Ja=a(1617),Xa=a(125),Za=a(1660),Qa=a(1661),$a=r.a.createContext(null),en=function(e){e.index;var t=Object(ia.a)(e,["index"]),a=P.a.useForm(),n=Object(h.a)(a,1)[0];return r.a.createElement(P.a,{form:n,component:!1},r.a.createElement($a.Provider,{value:n},r.a.createElement("tr",t)))},tn=function(e){var t=e.title,a=e.editable,l=e.children,i=e.dataIndex,s=e.record,c=e.handleSave,o=Object(ia.a)(e,["title","editable","children","dataIndex","record","handleSave"]),u=Object(n.useState)(!1),m=Object(h.a)(u,2),d=m[0],p=m[1],f=Object(n.useRef)(null),E=Object(n.useContext)($a);Object(n.useEffect)((function(){d&&f.current.focus()}),[d]);var v=function(){p(!d),E.setFieldsValue(Object(Xa.a)({},i,s[i]))},g=function(){var e=Object(ht.a)(bt.a.mark((function e(){var t;return bt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.validateFields();case 3:t=e.sent,v(),c(Object(F.a)(Object(F.a)({},s),t)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Save failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),b=l;return a&&(b=d?r.a.createElement(P.a.Item,{style:{margin:0},name:i,rules:[{required:!0,message:"".concat(t," is required.")}]},r.a.createElement(R.a,{ref:f,onPressEnter:g,onBlur:g})):r.a.createElement("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:v},l)),r.a.createElement("td",o,b)},an=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleDelete=function(e){var t,a,r,l,i=Object(ee.a)(n.state.dataSource),s=i.find((function(t){return t.key===e}));(t=n.props.studyId,a=n.props.userId,r=s.platform,l=s.platformId,z({url:"v1/addforeignid/".concat(t),method:"DELETE",params:{user_id:a,platform:r,platform_user_id:l}})).then((function(t){200===t.status&&n.setState({dataSource:i.filter((function(t){return t.key!==e}))})}))},n.handleAdd=function(){var e,t,a,r,l=n.state,i=l.count,s=l.dataSource,c=l.newRecord,o=Object(F.a)({key:i},c);(e=n.props.studyId,t=n.props.userId,a=o.platform,r=o.platformId,z({url:"v1/addforeignid/".concat(e),method:"POST",params:{user_id:t,platform:a,platform_user_id:r}})).then((function(e){200===e.status&&n.setState({dataSource:[].concat(Object(ee.a)(s),[o]),count:i+1,newRecord:{}})}))},n.handleSave=function(e){var t=Object(ee.a)(n.state.dataSource),a=t.findIndex((function(t){return e.key===t.key})),r=t[a];t.splice(a,1,Object(F.a)(Object(F.a)({},r),e)),n.setState({dataSource:t})},n.columns=[{title:"Platform",dataIndex:"platform",key:"platform",editable:!0},{title:"Platform ID",dataIndex:"platformId",key:"platformId",editable:!0},{title:"operation",dataIndex:"operation",render:function(e,t){return n.state.dataSource.length>=1?r.a.createElement(wa.a,{title:"Sure to delete?",onConfirm:function(){return n.handleDelete(t.key)}},r.a.createElement("a",null,"Delete")):null}}],n.state={dataSource:[],count:2,newRecord:{}},n}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(e,t){e.dataSource!==this.props.dataSource&&this.setState({dataSource:this.props.dataSource})}},{key:"render",value:function(){var e=this,t=this.state.dataSource,a={body:{row:en,cell:tn}},n=this.columns.map((function(t){return t.editable?Object(F.a)(Object(F.a)({},t),{},{onCell:function(a){return{record:a,editable:t.editable,dataIndex:t.dataIndex,title:t.title,handleSave:e.handleSave}}}):t})),l=r.a.createElement("div",{style:{maxWidth:"200px"}},r.a.createElement("span",null,"Platform"),r.a.createElement(R.a,{onChange:function(t){var a=Object(F.a)({},e.state.newRecord);a.platform=t.target.value,e.setState({newRecord:a})}}),r.a.createElement("span",null,"Platform ID"),r.a.createElement(R.a,{onChange:function(t){var a=Object(F.a)({},e.state.newRecord);a.platformId=t.target.value,e.setState({newRecord:a})}}));return r.a.createElement("div",null,r.a.createElement(wa.a,{title:l,okText:"Yes",cancelText:"No",icon:r.a.createElement(Za.a,null),onConfirm:this.handleAdd},r.a.createElement(g.a,{type:"dashed",style:{marginBottom:16},icon:r.a.createElement(Qa.a,null)},"Add a Record")),r.a.createElement(Oa.a,{components:a,rowClassName:function(){return"editable-row"},bordered:!0,dataSource:t,columns:n}))}}]),a}(r.a.Component);var nn=function(e){var t=e.record,a=e.location,l=e.studyId,i=Object(Ze.d)((function(e){return e.studies})).allStudies,s=Object(n.useState)([]),c=Object(h.a)(s,2),o=c[0],u=c[1],m=Object(n.useState)([]),d=Object(h.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(null),v=Object(h.a)(E,2),g=v[0],b=v[1],y=Object(n.useState)(!1),O=Object(h.a)(y,2);O[0],O[1],Object(n.useEffect)((function(){Fe({username:t.username}).then((function(e){200===e.status&&function(){var t=e.data.result;if(b(t.guid),t.foreign_guid_platform){for(var a=[],n=0;n<t.foreign_guid_platform.length;n++)a.push({platform:t.foreign_guid_platform[n],platformId:t.foreign_guid_guid[n],key:String(n)});u(a)}if(t.container_guid_container){for(var r=[],l=function(e){var a=i.find((function(a){return a.id===Number(t.container_guid_container[e])}));r.push({containerGuid:t.container_guid_guid[e],container:a.name,key:String(e),status:"Enrolled"})},s=0;s<t.container_guid_container.length;s++)l(s);f(r)}}()}));var e=t.container_guid_guid,a=t.container_guid_container,n=a&&a.indexOf(String(l));e&&e[n]}),[t]);var k=r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("b",null,"Complete Econsent: ",t.isSurveyStarted?"Yes":"No")),t.isSurveyStarted&&t.uncompletedSurveys?r.a.createElement("div",null,r.a.createElement("h4",null,"Uncomplete surveys:"),r.a.createElement("ul",null,t.uncompletedSurveys.map((function(e){return r.a.createElement("li",null,e)})))):null);return r.a.createElement("div",{style:{paddingBottom:"6px",overflow:"auto"}},a?r.a.createElement(Wa.a,{size:"small",column:1},r.a.createElement(Wa.a.Item,{label:r.a.createElement("b",null,"User Name")},t.username),r.a.createElement(Wa.a.Item,{label:r.a.createElement("b",null,"Container GUID")},"7FHSDJK"),r.a.createElement(Wa.a.Item,{label:r.a.createElement("b",null,"Status")},t.enabled?"Enrolled":"Disabled"),r.a.createElement(Wa.a.Item,{label:r.a.createElement("b",null,"eConsent Enrolled")},t.isSurveyComplete?"Yes":"No",r.a.createElement("a",{style:{marginLeft:10}},r.a.createElement(Ja.a,{title:"Surveys Detail",content:k},"View Detail")))):r.a.createElement(Wa.a,{size:"small",column:1},r.a.createElement(Wa.a.Item,{label:r.a.createElement("b",null,"User Name")},t.username),r.a.createElement(Wa.a.Item,{label:r.a.createElement("b",null,"Status")},t.enabled?"Active":"Disabled"),g?r.a.createElement(Wa.a.Item,{label:r.a.createElement("b",null,"Platform GUID")},g):null),a?r.a.createElement(an,{columns:[{title:"Platform",dataIndex:"platform",key:"platform"},{title:"Platform ID",dataIndex:"platformId",key:"platformId"}],dataSource:o,studyId:e.studyId,userId:t.id}):r.a.createElement(Oa.a,{style:{marginTop:20},columns:[{title:"Container",dataIndex:"container",key:"container"},{title:"Container GUID",dataIndex:"containerGuid",key:"containerGuid"},{title:"Status",dataIndex:"status",key:"status"}],dataSource:p}))},rn=a(79),ln=a(1618);var sn=function(e){var t=e.record,a=e.studyId,n=Object(Ze.d)((function(e){return e.studies&&e.studies.allStudies})).find((function(e){return e.id===Number(a)})),l=function(){var e=Object(ht.a)(bt.a.mark((function e(){var a,r,l,i,s,c,o,u,m;return bt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d=t.name,z({url:"v1/fitbit/auth/".concat(d)});case 2:if(a=e.sent,r=null,200!==a.status){e.next=8;break}r=a.data.result.authorizationUrl,e.next=10;break;case 8:return O.a.error("Network error when trying to authorize user in fitbit."),e.abrupt("return");case 10:for(u in l=r.split("?")[1],i=r.split("?")[0],(s=Ae(l)).redirect_uri&&delete s.redirect_uri,(c=localStorage.getItem("fitbitData")||[]).length&&(c=JSON.parse(c)),c.find((function(e){return e.state===s.state}))||c.push({id:n.id,state:s.state,name:t.name,userId:t.id}),localStorage.setItem("fitbitData",JSON.stringify(c)),o="",s)o.length?o=o+"&"+"".concat(u,"=").concat(s[u]):o+="".concat(u,"=").concat(s[u]);m="".concat(i,"?").concat(o),window.open(m);case 23:case"end":return e.stop()}var d}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(ht.a)(bt.a.mark((function e(){return bt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve("step_count",t.name);case 2:return e.sent,e.next=5,Ve("sleep_duration",t.name);case 5:return e.sent,e.next=8,Ve("physical_activity",t.name);case 8:e.sent,O.a.success("Successfully pull patient ".concat(t.name," data from fitbit"));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=[{title:"Platform",dataIndex:"platform",key:"platform"},{title:"Platform ID",dataIndex:"platformId",key:"platformId",render:function(e,a){return"authorized"===t.fitbit_status?"Account connected":r.a.createElement("span",{style:{color:"red"}},e)}},{title:"Actions",key:"action",render:function(e,a){return"authorized"===t.fitbit_status?r.a.createElement(Jt.a,{size:"small"},r.a.createElement("a",{onClick:function(){return console.log("Unauthorize")}},"Unauthorize"),r.a.createElement(ln.a,{type:"vertical"}),r.a.createElement("a",{onClick:function(){return i()}},"Pull Data")):r.a.createElement(Jt.a,{size:"middle"},r.a.createElement("a",{onClick:function(){return e=a.platform,void L.a.confirm({title:"Confirm",icon:r.a.createElement(ja.a,null),content:"You are authrizing user ".concat(t.name," on platform ").concat(e,", the page will redirect to third party page for authorization for a while"),onOk:l});var e}},"Authorize"))}}],c=null===n||void 0===n?void 0:n.thirdParty,o=[];if(c){var u,m=Object(rn.a)(c);try{for(m.s();!(u=m.n()).done;){var d=u.value;o.push({platform:d,platformId:"No account connected",key:d})}}catch(p){m.e(p)}finally{m.f()}}return r.a.createElement("div",{style:{paddingBottom:"6px",overflow:"auto"}},r.a.createElement(Oa.a,{columns:s,dataSource:o}))},cn=Ka.a.Panel,on=yt.a.Title,un={labelCol:{span:8},wrapperCol:{span:16}};var mn=function(e){var t=e.close,a=e.width,l=e.record,i=Object(n.useState)([]),s=Object(h.a)(i,2),c=(s[0],s[1]),o=Object(n.useState)(null),u=Object(h.a)(o,2),m=u[0],d=(u[1],Object(n.useState)(!1)),p=Object(h.a)(d,2),f=p[0],E=p[1];function v(){E(!1)}return Object(n.useEffect)((function(){c([])}),[l.name]),r.a.createElement("div",{style:{width:a,position:"relative",minWidth:"180px",maxWidth:"700px",marginLeft:"10px"}},r.a.createElement(g.a,{onMouseDown:e.mouseDown,type:"link",style:{position:"absolute",top:"50%",left:"-31px",transform:"translateY(-50%)",transition:"none",cursor:"ew-resize"}},r.a.createElement(Ya.a,null)),r.a.createElement("div",{style:{position:"relative"}},r.a.createElement(Ga.a,{onClick:t,style:{zIndex:"99",float:"right",marginTop:"11px",marginRight:"15px",fontSize:"18px"}}),r.a.createElement(on,{level:4,style:{lineHeight:"1.9"}},"Patient Information")),r.a.createElement(Ka.a,{defaultActiveKey:["1"]},r.a.createElement(cn,{header:"Container Membership",key:"1"},r.a.createElement(nn,{record:l,location:e.location,studyId:e.studyId})),r.a.createElement(cn,{header:"External Identity Management",key:"2"},r.a.createElement(sn,{record:l,studyId:e.studyId}))),r.a.createElement(L.a,{visible:f,onCancel:v,title:m,width:400,footer:[r.a.createElement(g.a,{key:"back",onClick:v},"OK")]},r.a.createElement(P.a,Object.assign({},un,{name:"basic"}),r.a.createElement(P.a.Item,{label:"Platform",name:"platform",rules:[{required:!0,message:"Please input platform name!"}]},r.a.createElement(R.a,null)),r.a.createElement(P.a.Item,{label:"Platform ID",name:"platformId",rules:[{required:!0,message:"Please input platform ID!"}]},r.a.createElement(R.a,null)))))},dn=yt.a.Title,pn=(yt.a.Text,L.a.confirm,Ot.a.TabPane);var fn=function(){var e=Object(C.a)(["user"]),t=Object(h.a)(e,1)[0],a=Object(n.useState)(!1),l=Object(h.a)(a,2),i=l[0],s=l[1],c=Object(n.useState)(!1),o=Object(h.a)(c,2),u=o[0],m=(o[1],Object(n.useState)(!1)),d=Object(h.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(!1),v=Object(h.a)(E,2),b=v[0],k=v[1],j=Object(n.useState)(null),S=Object(h.a)(j,2),_=(S[0],S[1]),x=Object(n.useState)(null),T=Object(h.a)(x,2),P=(T[0],T[1]),L=Object(n.useState)([]),R=Object(h.a)(L,2),A=R[0],N=R[1],F=Object(n.useState)([]),D=Object(h.a)(F,2),U=D[0],M=D[1],q=Object(n.useState)([]),V=Object(h.a)(q,2),B=V[0],H=V[1],Y=Object(n.useState)(!1),G=Object(h.a)(Y,2),K=G[0],W=G[1],J=Object(n.useState)(null),X=Object(h.a)(J,2),Z=X[0],Q=X[1],$=Object(n.useState)(350),ee=Object(h.a)($,2),te=ee[0],ae=ee[1],ne=Object(n.useState)("70%"),le=Object(h.a)(ne,2),ie=le[0],se=le[1],ce=Object(n.useRef)(null),oe=Object(I.a)(["message"]),ue=oe.t;function me(){z({url:"/v1/admin/userlist/canarie",method:"GET"}).then((function(e){s(!1);var t=e.data.result,a=t.filter((function(e){return!e.role.includes("patient")&&!e.role.includes("container-requester")})),n=t.filter((function(e){return e.role.includes("patient")}));_(e.data.result),H(n),M(a)})).catch((function(e){s(!1),console.log(e)}))}function de(){return(de=Object(ht.a)(bt.a.mark((function e(t){var a;return bt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,Ue(t);case 3:200===(a=e.sent).status?(O.a.success("".concat(ue("message:users.activate.success")," ").concat(t[0])),me()):(s(!1),console.error("failed activating user, ",a));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}oe.i18n,Object(n.useEffect)((function(){me()}),[]);var pe=[{title:"Username",dataIndex:"username",key:"username"},{title:"Status",dataIndex:"enabled",key:"enabled",render:function(e){return e?r.a.createElement(ha.a,{status:"success",text:"Active"}):r.a.createElement(ha.a,{status:"error",text:"Disabled"})}},{title:"Created at",dataIndex:"createdTimestamp",key:"createdTimestamp",sorter:function(e,t){return e.createdTimestamp-t.createdTimestamp},render:function(e){return re()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"Email",dataIndex:"email",key:"email"},{title:"First Name",dataIndex:"firstname",key:"firstName"},{title:"Last Name",dataIndex:"lastname",key:"lastName"},{title:"Actions",key:"action",render:function(e,a){return r.a.createElement(ya.a,{overlay:r.a.createElement(y.a,{id:"teams_role_dropdown"},a.role&&a.role.includes("patient")&&r.a.createElement(y.a.Item,{onClick:function(){W(!0),Q(a)}},"View"),t.username!==a.username&&!a.enabled&&r.a.createElement(y.a.Item,{onClick:function(){return function(e){return de.apply(this,arguments)}([a.username])}},"Activate"),t.username!==a.username&&a.enabled&&r.a.createElement(y.a.Item,{onClick:function(){De([a.username]).then((function(e){O.a.success("The user ".concat(a.username," is suspended")),me()})).then((function(e){return console.log(e)}))},style:{color:"red"}},"Suspend")),placement:"bottomRight"},r.a.createElement(g.a,{shape:"circle"},r.a.createElement(ka.a,null)))}}];y.a,y.a.Item,w.a,y.a.Item,w.a,y.a,y.a.Item,y.a.Item;var fe={selectedRowKeys:A,onChange:function(e,t){console.log("selectedRowKeys changed: ",e),N(e),P(t)},getCheckboxProps:function(e){return{disabled:e.username===t.username}}},Ee=function(e){var t=e.clientX,a=ce.current.getClientRects()[0].x,n=ce.current.getClientRects()[0].width,r=t-a,l=n-r>600?600:n-r;se(n-l),ae(l)},ve=function e(){document.removeEventListener("mousemove",Ee,!0),document.removeEventListener("mouseup",e,!0)};return r.a.createElement($e,null,r.a.createElement("div",{className:Aa.a.wrapper},r.a.createElement(dn,{level:2,className:"mt-3"},"Manage Users"),r.a.createElement(nt.a,{spinning:i},r.a.createElement(tt.a,{style:{boxShadow:"0px 1px 9px #00000020"}},r.a.createElement(Ot.a,{defaultActiveKey:"1",onChange:function(e){console.log(e)}},r.a.createElement(pn,{tab:"Researchers",key:"1"},r.a.createElement(Oa.a,{dataSource:U,columns:pe,rowKey:function(e){return e.username},rowSelection:!!u&&fe})),r.a.createElement(pn,{tab:"Patients",key:"2"},r.a.createElement(Ot.a,null,r.a.createElement(pn,{tab:"Enrolled",key:"enrolled"},r.a.createElement("div",{ref:ce,style:{display:K?"flex":""}},r.a.createElement("div",{style:{borderRight:K&&"1px solid rgb(240, 240, 240)",marginRight:K&&"16px",width:K&&ie}},r.a.createElement(Oa.a,{dataSource:B,columns:pe})),K&&r.a.createElement(mn,{close:function(){W(!K),Q(null)},width:te,record:Z,mouseDown:function(e){document.addEventListener("mousemove",Ee,!0),document.addEventListener("mouseup",ve,!0)}}))),r.a.createElement(pn,{tab:"Invited",key:"invited"},r.a.createElement(Ha,null))))))),r.a.createElement(qa,{closeBulkModal:function(){f(!1)},visible:p}),r.a.createElement(La,{inviteUser:b,onInviteUserCancel:function(){k(!1)}})))},En=a(160),vn=a.n(En),gn=a(163);yt.a.Title;var bn=function(e){return r.a.createElement(L.a,{title:"Platform Terms of Use Agreement",visible:e.visible,onOk:e.handleCancel,onCancel:e.handleCancel,width:"70%",footer:e.footer,maskClosable:!1,zIndex:"1020"},r.a.createElement("div",{style:{overflowY:"scroll",height:"60vh"}},r.a.createElement("h1",null,"Terms of use"),r.a.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut tincidunt lacus enim, a feugiat massa congue ut. Ut aliquet et tellus sed tristique. Nullam gravida orci ut leo venenatis finibus. Donec vel elit eget elit molestie sollicitudin. Suspendisse faucibus iaculis eros vitae interdum. Nunc malesuada vehicula felis, eu finibus magna malesuada vel. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Donec scelerisque ante eu lacus facilisis hendrerit. Maecenas dapibus leo turpis, nec ultrices est malesuada quis. Cras placerat nisi nec ornare lobortis. Mauris convallis neque sed auctor rhoncus. Fusce malesuada vel turpis quis commodo. Duis eget lectus in lorem mollis rutrum. Mauris eu malesuada est, a mattis augue. Ut eu felis ultrices, porttitor quam sit amet, tempus tortor."),r.a.createElement("p",null,"Donec laoreet nulla eu volutpat ullamcorper. Phasellus lacinia eget quam vitae euismod. Aliquam a sapien erat. Sed id turpis magna. Fusce at lectus eget lacus pellentesque vulputate. Aenean at efficitur lacus, eget ultrices orci. Praesent id sagittis nisi. Interdum et malesuada fames ac ante ipsum primis in faucibus. Etiam lobortis vel dui vel gravida. Nulla ut arcu et tellus faucibus rhoncus. Curabitur tempor enim quis augue pretium semper. Nam nisi lacus, pretium vitae dictum non, fringilla sit amet lacus. Nullam tristique turpis quis elit tempor, id gravida ligula varius. Mauris id enim at magna imperdiet posuere tempor vel arcu. Aliquam erat volutpat. Nunc ullamcorper id mauris quis mollis. Curabitur vulputate fermentum lorem a egestas. Praesent id mauris quis turpis vulputate auctor eu lacinia mauris. Mauris quis volutpat nulla. Etiam pretium arcu in interdum interdum. Nulla hendrerit, leo et tempor venenatis, tellus risus rhoncus nunc, laoreet faucibus eros elit quis mi. Quisque tincidunt mi erat, sed ornare mi consequat quis. Mauris lacus lacus, sollicitudin nec laoreet id, euismod quis purus."),r.a.createElement("p",null,"Donec laoreet nulla eu volutpat ullamcorper. Phasellus lacinia eget quam vitae euismod. Aliquam a sapien erat. Sed id turpis magna. Fusce at lectus eget lacus pellentesque vulputate. Aenean at efficitur lacus, eget ultrices orci. Praesent id sagittis nisi. Interdum et malesuada fames ac ante ipsum primis in faucibus. Etiam lobortis vel dui vel gravida. Nulla ut arcu et tellus faucibus rhoncus. Curabitur tempor enim quis augue pretium semper. Nam nisi lacus, pretium vitae dictum non, fringilla sit amet lacus. Nullam tristique turpis quis elit tempor, id gravida ligula varius. Mauris id enim at magna imperdiet posuere tempor vel arcu. Aliquam erat volutpat. Nunc ullamcorper id mauris quis mollis. Curabitur vulputate fermentum lorem a egestas. Praesent id mauris quis turpis vulputate auctor eu lacinia mauris. Mauris quis volutpat nulla. Etiam pretium arcu in interdum interdum. Nulla hendrerit, leo et tempor venenatis, tellus risus rhoncus nunc, laoreet faucibus eros elit quis mi. Quisque tincidunt mi erat, sed ornare mi consequat quis. Mauris lacus lacus, sollicitudin nec laoreet id, euismod quis purus."),r.a.createElement("br",null),r.a.createElement("br",null)))},hn=yt.a.Title,yn=(Ot.a.TabPane,{labelCol:{span:6},wrapperCol:{span:18}}),On={wrapperCol:{span:24}};var kn=Object(E.k)((function(e){var t=Object(n.useState)("patient"),a=Object(h.a)(t,2),l=(a[0],a[1],Object(n.useState)(!1)),i=Object(h.a)(l,2),s=i[0],c=i[1],o=(Ct(),Object(I.a)(["message"])),u=o.t,m=(o.i18n,e.match);return m.path,m.params,r.a.createElement(r.a.Fragment,null,r.a.createElement(tt.a,null,r.a.createElement(at.a,{style:{marginBottom:"24px"}},r.a.createElement(rt.a,{xs:{span:0},sm:{span:6}}),r.a.createElement(rt.a,{xs:{span:24},sm:{span:18}},r.a.createElement(hn,{level:3},"Create an Account"),r.a.createElement("p",null,"After reigstration, you can use the full functions on this platform."))),r.a.createElement(P.a,Object.assign({},yn,{name:"basic",initialValues:{remember:!0},onFinish:function(t){console.log("Success:",t),e.onSubmit(t)},onFinishFailed:function(e){console.log("Failed:",e)}}),r.a.createElement(P.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:u("message:register.username.required")}]},r.a.createElement(R.a,{prefix:r.a.createElement(w.a,null)})),r.a.createElement(P.a.Item,{label:"First Name",name:"firstname",rules:[{required:!0,message:u("message:register.firstName.required")}]},r.a.createElement(R.a,null)),r.a.createElement(P.a.Item,{label:"Last Name",name:"lastname",rules:[{required:!0,message:u("message:register.lastName.required")}]},r.a.createElement(R.a,null)),r.a.createElement(P.a.Item,{label:"Email",name:"email",initialValue:e.email,rules:[{required:!0,message:u("message:register.email.required")},{type:"email",message:u("message:register.email.valid")}]},r.a.createElement(R.a,{disabled:e.email})),r.a.createElement(P.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:u("message:register.password.required")},{pattern:new RegExp(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[-_!%&/()=?*+#,.;])[A-Za-z\d-_!%&/()=?*+#,.;]{11,30}$/g),message:u("message:register.password.valid")}]},r.a.createElement(R.a.Password,{prefix:r.a.createElement(St.a,null)})),r.a.createElement(P.a.Item,{label:"Confirm Password",name:"password_confirm",rules:[{required:!0,message:u("message:register.confirmPassword.required")},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject(u("message:register.confirmPassword.valid")):Promise.resolve()}}}]},r.a.createElement(R.a.Password,{onCopy:function(e){return e.preventDefault()},onPaste:function(e){return e.preventDefault()},autoComplete:"off",prefix:r.a.createElement(St.a,null)})),r.a.createElement(at.a,{style:{marginBottom:"24px"}},r.a.createElement(rt.a,{xs:{span:0},sm:{span:6}}),r.a.createElement(rt.a,{xs:{span:24},sm:{span:18}},r.a.createElement(P.a.Item,Object.assign({},On,{name:"tou",valuePropName:"checked",style:{marginBottom:"8px"},rules:[{validator:function(e,t){return t?Promise.resolve():Promise.reject(u("message:register.ToU.required"))}}]}),r.a.createElement(gn.a,null,"I have read and agree to the"," ",r.a.createElement(g.a,{onClick:function(){return c(!0)}},"Terms of Use"),".")))),r.a.createElement(at.a,null,r.a.createElement(rt.a,{xs:{span:0},sm:{span:6}}),r.a.createElement(rt.a,{xs:{span:24},sm:{span:18}},r.a.createElement(P.a.Item,On,r.a.createElement(g.a,{type:"primary",htmlType:"submit"},"Sign Up")))),r.a.createElement(bn,{visible:s,handleCancel:function(){c(!1)}}))))})),jn=b.a.Content,Sn=yt.a.Title,_n=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){}},{key:"onSumit",value:function(){O.a.success("Registered!")}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(jn,{className:"content"},r.a.createElement("div",{className:vn.a.container},r.a.createElement(at.a,{gutter:32},r.a.createElement(rt.a,{xs:{span:24},md:{span:11},style:{marginBottom:"40px"}},r.a.createElement(Sn,{level:2,style:{marginTop:"40px"}},"Being involved in your health care improves the safety of your care and your medical outcomes. Join Patient Portal and get involved."),r.a.createElement("p",null,"Please register on Patient Portal."),r.a.createElement("p",null,"Have and account?"," ",r.a.createElement(s.b,{to:{pathname:"/login",state:{prevPath:window.location.pathname}}},"Log in")," "),r.a.createElement("img",{className:vn.a.imgContent,alt:"",src:a(1598)})),r.a.createElement(rt.a,{xs:{span:24},md:{span:13}},r.a.createElement(kn,null))))))}}]),n}(n.Component),wn=b.a.Content,Cn=yt.a.Title;var In=function(e){var t=Object(Ze.c)(),a=Object(n.useState)(null),l=Object(h.a)(a,2),i=l[0],s=l[1];return Object(n.useEffect)((function(){B().then((function(e){var a,n,r=(null===e||void 0===e||null===(a=e.data)||void 0===a||null===(n=a.result)||void 0===n?void 0:n.node).filter((function(e){if("study"===e.labels[0])return{item:e}}));t(ke(r)),s(r)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(wn,{className:"content"},r.a.createElement("div",{className:vn.a.container},r.a.createElement(Cn,{level:2},"My Studies"),r.a.createElement(pt,{data:i}))))};var xn=Object(E.k)((function(e){var t={observationVars:[],initFunc:function(){}},a=Object(C.a)(),n=Object(h.a)(a,1)[0].isLogin;return r.a.createElement($e,t,n?r.a.createElement(In,null):r.a.createElement(_n,null))}));var Tn=Object(E.k)((function(e){var t=e.match.path,a={observationVars:[],initFunc:function(){}};return r.a.createElement($e,a,r.a.createElement(E.e,null,Wr.map((function(e){return r.a.createElement(E.c,{exact:e.exact||!1,path:t+e.path,key:e.path,render:function(){return r.a.createElement(e.component,null)}})}))))}));var Pn=function(){var e=Object(E.j)();return r.a.createElement(b.a,{style:{minHeight:"100vh"}},r.a.createElement(E.e,null,al.map((function(t){return r.a.createElement(E.c,{exact:t.exact||!1,path:e.url+t.path,key:t.path,render:function(e){return r.a.createElement(t.component,null)}})}))))},Ln=yt.a.Title,Rn={labelCol:{span:6},wrapperCol:{span:18}},An={wrapperCol:{span:24}};var Nn=Object(E.k)((function(e){var t=Object(I.a)(["message"]),a=t.t,l=(t.i18n,Object(n.useState)({})),i=Object(h.a)(l,2),s=i[0],c=i[1],o=Object(n.useState)(!1),u=Object(h.a)(o,2),m=(u[0],u[1]),d=P.a.useForm(),p=Object(h.a)(d,1)[0],f=e.match;return f.path,f.params,Object(n.useEffect)((function(){var t;(t=e.hashCode,z({url:"v1/users/resetlink/status",method:"GET",params:{reset_code:t,realm:"canarie"}})).then((function(e){var t=e.data.user_info;c(t),p.setFieldsValue(t)})).catch((function(e){m(!0)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(tt.a,null,r.a.createElement(at.a,{style:{marginBottom:"24px"}},r.a.createElement(rt.a,{xs:{span:0},sm:{span:6}}),r.a.createElement(rt.a,{xs:{span:24},sm:{span:18}},r.a.createElement(Ln,{level:3},"Reset Password"))),r.a.createElement(P.a,Object.assign({},Rn,{name:"basic",initialValues:{remember:!0},form:p,onFinish:function(t){var n,r;console.log("Success:",t),(n=e.hashCode,r=t.password,z({url:"v1/users/password/set",method:"POST",data:{reset_code:n,realm:"canarie",new_password:r}})).then((function(e){O.a.success(a("message:users.resetPassword.success")),setTimeout((function(){window.location.href="/"}),1500)}))},onFinishFailed:function(e){console.log("Failed:",e)}}),r.a.createElement(P.a.Item,{label:"Username",name:"username",value:s.username,rules:[{required:!0,message:a("message:register.username.required")}]},r.a.createElement(R.a,{prefix:r.a.createElement(w.a,null),disabled:!0})),r.a.createElement(P.a.Item,{label:"Email",name:"email",value:s.email,rules:[{required:!0,message:a("message:register.email.required")},{type:"email",message:a("message:register.email.valid")}]},r.a.createElement(R.a,{disabled:!0})),r.a.createElement(P.a.Item,{label:"New Password",name:"password",rules:[{required:!0,message:a("message:register.password.required")},{pattern:new RegExp(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[-_!%&/()=?*+#,.;])[A-Za-z\d-_!%&/()=?*+#,.;]{11,30}$/g),message:a("message:register.password.valid")}]},r.a.createElement(R.a.Password,{prefix:r.a.createElement(St.a,null)})),r.a.createElement(P.a.Item,{label:"Confirm Password",name:"password_confirm",rules:[{required:!0,message:a("message:register.confirmPassword.required")},function(e){var t=e.getFieldValue;return{validator:function(e,n){return n&&t("password")!==n?Promise.reject(a("message:register.confirmPassword.valid")):Promise.resolve()}}}]},r.a.createElement(R.a.Password,{onCopy:function(e){return e.preventDefault()},onPaste:function(e){return e.preventDefault()},autoComplete:"off",prefix:r.a.createElement(St.a,null)})),r.a.createElement(at.a,null,r.a.createElement(rt.a,{xs:{span:0},sm:{span:6}}),r.a.createElement(rt.a,{xs:{span:24},sm:{span:18}},r.a.createElement(P.a.Item,An,r.a.createElement(g.a,{type:"primary",htmlType:"submit"},"Submit")))))))})),Fn=b.a.Content;var Dn=function(e){var t=e.match,a=(t.path,t.params,{observationVars:[],initFunc:function(){}}),n=e.location.pathname.split("/"),l=n[n.length-1];return r.a.createElement($e,a,r.a.createElement(Fn,{className:"content"},r.a.createElement("div",{style:{maxWidth:"600px",margin:"30px auto"}},r.a.createElement(Nn,{hashCode:l}))))},Un=[{path:"/",component:vt,exact:!0},{path:"/login",component:qt,exact:!0},{path:"/registration",component:Vt},{path:"/pwdreset",component:Dn},{path:"/studies",component:la},{path:"/my-studies",component:xn,protected:!0},{path:"/study/:studyId",component:ba,protected:!0},{path:"/admin/users",component:fn,protected:!0},{path:"/error",component:Tn},{path:"/invite",component:Pn}],Mn=a(212),qn=a.n(Mn),zn=a(204),Vn=b.a.Content,Bn=yt.a.Title,Hn=yt.a.Paragraph,Yn=Ka.a.Panel;var Gn=function(e){var t=Object(C.a)(),l=Object(h.a)(t,1)[0].isLogin,i=Object(I.a)(["message"]),c=i.t,o=(i.i18n,Object(Ze.d)((function(e){return e.user}))),u=Object(Ze.d)((function(e){return e.redCapLinks&&e.redCapLinks.surveyQueueLink})),m=Object(n.useState)(!1),d=Object(h.a)(m,2),p=d[0],f=d[1];console.log(e);var E=e.currentStudy,v=[];v.push(r.a.createElement(Yn,{header:"Contact Information",key:"location"},r.a.createElement("p",null,E&&E.contact&&Re(E.contact)))),v.push(r.a.createElement(Yn,{header:"Project Investigator",key:"investigator"},r.a.createElement("p",null,E&&E.investigator))),v.push(r.a.createElement(Yn,{header:"Sponsors and Collaborators",key:"sponsor"},r.a.createElement("p",null,E&&E.sponsor)));var b=r.a.createElement(tt.a,null,r.a.createElement(Bn,{level:3},"Your Survey Progress"),E&&E.useEconsent&&r.a.createElement("div",null,r.a.createElement(g.a,{shape:"round",icon:r.a.createElement(ma.a,null),size:"large",style:{marginTop:10,width:254},disabled:e.isSurveyStarted},r.a.createElement(s.b,{to:{pathname:"/study/".concat(E&&E.id,"/survey?isSurveyLink=True")},target:"_blank",style:{marginLeft:"5px",color:e.isSurveyStarted?"grey":""}},"Take eConsent Survey")),r.a.createElement(g.a,{shape:"round",icon:r.a.createElement(ma.a,null),size:"large",style:{marginTop:10,width:254},disabled:!e.isSurveyStarted},r.a.createElement(s.b,{to:{pathname:"/study/".concat(E&&E.id,"/survey?isSurveyLink=False")},target:"_blank",style:{marginLeft:"5px",color:e.isSurveyStarted?"":"grey"}},"Complete Study Surveys")),r.a.createElement(g.a,{shape:"round",icon:r.a.createElement(ma.a,null),size:"large",style:{marginTop:10,width:254},onClick:function(){return f(!0)}},r.a.createElement(s.b,{style:{marginLeft:"5px"}},"Open Study Survey Modal"))));if(E){var y,j=E.attrs_order,S=Object(rn.a)(j);try{for(S.s();!(y=S.n()).done;){var _=y.value;if(_.startsWith("attr")){var w=E[_],x=w;"string"!==typeof w&&(x=w.map((function(e){return r.a.createElement(lt.a,null,e)}))),v.push(r.a.createElement(Yn,{header:_.slice(5).replace("_"," "),key:_.slice(5)},r.a.createElement("p",null,x)))}}}catch(T){S.e(T)}finally{S.f()}}return r.a.createElement(r.a.Fragment,null,r.a.createElement(Vn,{className:"content"},r.a.createElement("div",{className:qn.a.container},r.a.createElement("div",null,l?null:r.a.createElement(g.a,{type:"primary",style:{float:"right"}},r.a.createElement(s.b,{to:{pathname:"/registration",state:{prevPath:window.location.pathname}}},"Request to Participate")),r.a.createElement(Bn,{level:2},E?E.name:""," ",l&&r.a.createElement(g.a,{type:"link",style:{paddingLeft:"0"}},r.a.createElement(ct.a,{key:"star",onClick:function(){return O.a.success(c("message:study.landing.star"))},style:{fontSize:"16px",verticalAlign:"baseline"}})),r.a.createElement(lt.a,{color:"green",style:{verticalAlign:"middle"}},"Recruiting"))," "),r.a.createElement(at.a,{gutter:16},r.a.createElement(rt.a,{xs:{span:24},md:{span:7},style:{marginBottom:"8px"}},r.a.createElement(Jt.a,{direction:"vertical"},E&&E.project_icon?r.a.createElement(k.a,{shape:"square",size:270,src:E.project_icon}):r.a.createElement("img",{className:qn.a.imgContent,alt:"",src:a(1599)}),o&&Object.keys(o).length&&"patient"===o.role&&e.isSurveyConnected?b:null,r.a.createElement(tt.a,null,r.a.createElement(Bn,{level:3},"Contact Information"),r.a.createElement(Jt.a,{direction:"vertical"},r.a.createElement(g.a,null,r.a.createElement("a",{href:E?"mailto:".concat(E.primaryEmail):"#"},"Email Primary Study Contact")),l?r.a.createElement(g.a,null,r.a.createElement("a",{href:E?"mailto:".concat(E.investigatorEmail):"#"},"Contact Principal Investigator")):r.a.createElement(g.a,null,r.a.createElement(s.b,{to:{pathname:"/login",state:{prevPath:window.location.pathname}}},"Contact Study Coordinator")))))),r.a.createElement(rt.a,{xs:{span:24},md:{span:17}},r.a.createElement(Jt.a,{direction:"vertical"},r.a.createElement(tt.a,{style:{minWidth:800}},r.a.createElement(Bn,{level:3},"Study Description"),r.a.createElement(Hn,null,E&&E.description&&Re(E.description)),r.a.createElement(Ka.a,{className:qn.a.study_description_collapse,defaultActiveKey:["1"],onChange:function(e){console.log(e)}},v)),r.a.createElement(tt.a,{style:{minWidth:800}},r.a.createElement(Bn,{level:3},"Eligibility Criteria"),r.a.createElement(Hn,null,E&&E.criteria&&Re(E.criteria))))))),r.a.createElement(L.a,{visible:p,onCancel:function(){f(!1)},footer:null,title:"REDCap Surveys"},r.a.createElement(zn.a,{src:u,style:{minWidth:"100%"},frameborder:"0",height:"370px",inPageLinks:!0,scrolling:"auto",seamless:!0})),r.a.createElement(et,null)))},Kn=a(205),Wn=a.n(Kn);function Jn(){var e=r.a.useState(!1),t=Object(h.a)(e,2),a=t[0],n=t[1],l=P.a.useForm(),i=Object(h.a)(l,1)[0],s=Object(I.a)(["message"]),c=s.t,o=(s.i18n,Object(E.i)().studyId);return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{type:"primary",onClick:function(){return n(!0)}},"Invite Patient"),r.a.createElement(L.a,{title:"Invite Patient",visible:a,okText:"Invite",onOk:function(){i.validateFields().then((function(e){Ne(Object(F.a)(Object(F.a)({},e),{},{role:"patient",projectId:o})).then((function(e){200===e.status&&O.a.success(c("message:invitation.patient.success"))})),i.resetFields(),n(!1)})).catch((function(e){console.log("Validate Failed:",e),O.a.error(c("message:invitation.patient.failed"))}))},onCancel:function(){return n(!1)}},r.a.createElement(P.a,{form:i,layout:"vertical",name:"invite_patient"},r.a.createElement(P.a.Item,{name:"email",label:"E-mail",rules:[{type:"email",message:c("message:invitation.patient.email.valid")},{required:!0,message:c("message:invitation.patient.email.required")}]},r.a.createElement(R.a,null)),r.a.createElement(P.a.Item,{name:"question",label:"Question",rules:[{required:!0,message:c("message:invitation.patient.question.required")}],hasFeedback:!0},r.a.createElement(R.a,null)),r.a.createElement(P.a.Item,{name:"answer",label:"Answer",rules:[{required:!0,message:c("message:invitation.patient.answer.required")}],hasFeedback:!0},r.a.createElement(R.a,null)),r.a.createElement(P.a.Item,{name:"confirmAnswer",label:"Confirm Answer",dependencies:["answer"],hasFeedback:!0,rules:[{required:!0,message:c("message:invitation.patient.confirmAnswer.required")},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("answer")!==a?Promise.reject(c("message:invitation.patient.confirmAnswer.valid")):Promise.resolve()}}}]},r.a.createElement(R.a,null)))))}var Xn=a(314),Zn=a.n(Xn),Qn=yt.a.Title,$n=Ot.a.TabPane;var er=Object(E.k)((function(e){var t=Object(E.i)().studyId,a=r.a.useState([]),l=Object(h.a)(a,2),i=l[0],s=l[1],c=Object(n.useState)(!1),o=Object(h.a)(c,2),u=o[0],m=o[1],d=Object(n.useState)(null),p=Object(h.a)(d,2),f=p[0],v=p[1],b=Object(n.useState)(350),k=Object(h.a)(b,2),j=k[0],S=k[1],_=Object(n.useState)("70%"),w=Object(h.a)(_,2),C=w[0],I=w[1],x=Object(n.useState)([]),T=Object(h.a)(x,2),P=(T[0],T[1],Object(n.useState)(!0)),L=Object(h.a)(P,2),R=L[0],A=L[1],N=(Object(Ze.d)((function(e){return e.studies.allStudies})),Object(n.useRef)(null));Object(n.useEffect)((function(){e.currentStudy&&D()}),[e.currentStudy]);var D=function(){var a=Object(ht.a)(bt.a.mark((function a(){var n,r,l,i;return bt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,n=[],!e.currentStudy||!e.currentStudy.redap_token){a.next=7;break}return a.next=5,K(t);case 5:200===(r=a.sent).status&&(n=r.data.result);case 7:return a.next=9,H(t);case 9:200===(l=a.sent).status&&(i=l.data.result.map((function(e){if(e.container_guid_container){var a=e.container_guid_container.indexOf("".concat(t)),r=e.container_guid_guid[a],l=n.find((function(e){return e.record_id===r}));if(l&&l.uncompleted_surveys)return Object(F.a)(Object(F.a)({},e),{},{key:e.id,isSurveyComplete:!1,isSurveyStarted:l.is_survey_started,uncompletedSurveys:l.uncompleted_surveys})}return Object(F.a)(Object(F.a)({},e),{},{key:e.id,isSurveyComplete:!1,isSurveyStarted:!1})})),s(i),A(!1)),a.next=17;break;case 13:a.prev=13,a.t0=a.catch(0),a.t0.response&&"/v1/user-survey/status"===a.t0.response.config.url&&O.a.error("".concat(a.t0.response.data.result,", please update the REDCap token in config page.")),A(!1);case 17:case"end":return a.stop()}}),a,null,[[0,13]])})));return function(){return a.apply(this,arguments)}}(),U=[{title:"Username",dataIndex:"username",key:"username",sorter:function(e,t){return e.username.localeCompare(t.username)}},{title:"container GUID",dataIndex:"guid",render:function(e,a){var n=a.container_guid_container,r=a.container_guid_guid;return n&&r?r[n.indexOf(String(t))]:"8SDFJH"}},{title:"First Name",dataIndex:"firstname",key:"firstName",sorter:function(e,t){return e.firstname.localeCompare(t.firstname)}},{title:"Last Name",dataIndex:"lastname",key:"lastName",sorter:function(e,t){return e.lastname.localeCompare(t.lastname)}},{title:"Email",dataIndex:"email",key:"email"},{title:"Join Date",dataIndex:"time_created",key:"createdTimestamp",sorter:function(e,t){return new Date(e.created_time)-new Date(t.created_time)},render:function(e){return Wn()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"Enrolled",dataIndex:"isSurveyStarted",render:function(e){return e?"Yes":"No"}},{title:"Actions",key:"action",render:function(e,t){var a=r.a.createElement(y.a,null,r.a.createElement(y.a.Item,{onClick:function(){m(!0),v(t)}},"View"),r.a.createElement(y.a.Item,{style:{color:"red"}},"Remove"));return r.a.createElement(ya.a,{overlay:a,placement:"bottomRight"},r.a.createElement(g.a,{shape:"circle"},r.a.createElement(ka.a,null)))}}],M=function(e){var t=e.clientX,a=N.current.getClientRects()[0].x,n=N.current.getClientRects()[0].width,r=t-a,l=n-r>600?600:n-r;I(n-l),S(l)},q=function e(){document.removeEventListener("mousemove",M,!0),document.removeEventListener("mouseup",e,!0)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Zn.a.container},r.a.createElement("div",null,r.a.createElement(Qn,{level:2},"Patients")," "),r.a.createElement(tt.a,{style:{boxShadow:"0px 1px 9px #00000020"}},r.a.createElement(Jn,null),r.a.createElement(nt.a,{spinning:R},r.a.createElement(Ot.a,null,r.a.createElement($n,{tab:"Enrolled",key:"enrolled"},r.a.createElement("div",{ref:N,style:{display:u?"flex":""}},r.a.createElement("div",{style:{borderRight:u&&"1px solid rgb(240, 240, 240)",marginRight:u&&"16px",width:u&&C}},r.a.createElement(Oa.a,{dataSource:i,columns:U,style:{marginTop:20}})),u&&r.a.createElement(mn,{close:function(){m(!u),v(null)},width:j,record:f,mouseDown:function(e){document.addEventListener("mousemove",M,!0),document.addEventListener("mouseup",q,!0)},location:"CONTAINER PATIENT",studyId:t}))),r.a.createElement($n,{tab:"Invited",key:"invited"},r.a.createElement(Ha,{projectId:t})))))),r.a.createElement(et,null))})),tr=a(1668),ar=a(37),nr=a.n(ar),rr=a(322),lr=R.a.TextArea,ir=yt.a.Paragraph;var sr=Object(E.k)((function(e){e.match.params.datasetId;var t=e.editMode,a=(e.userListOnDataset,e.updateDatasetInfo),n=e.datasetUpdate,l=e.datasetInfo,i=(e.setDatasetInfo,e.emailValid);function s(e,t){var a=new FileReader;a.addEventListener("load",(function(){return t(a.result)})),a.readAsDataURL(e)}function c(){return(c=Object(ht.a)(bt.a.mark((function e(t){return bt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(t,function(){var e=Object(ht.a)(bt.a.mark((function e(t){var n;return bt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(t);case 2:n=e.sent,a("project_icon",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(e){return new Promise((function(t,a){var n=new Image;n.onload=function(){var e=function(e,t,a){var n=document.createElement("canvas"),r=n.getContext("2d");return n.width=t,n.height=a,r.drawImage(e,0,0,t,a),n.toDataURL()}(n,200,200);t(e)},n.src=e}))}return l?r.a.createElement("div",{style:{padding:20}},r.a.createElement("div",{id:"setting-left",style:{float:"left",width:"349px",marginLeft:6}},r.a.createElement("div",{style:{display:"inline-block"}},n.project_icon?r.a.createElement(k.a,{src:n.project_icon,size:65}):r.a.createElement(k.a,{style:{backgroundColor:"#13c2c2",verticalAlign:"middle"},size:65},r.a.createElement("span",{style:{fontSize:50,fontWeight:"bold",textTransform:"uppercase"}},n.name?n.name.charAt(0):""))),r.a.createElement("div",{style:{display:"inline-block",marginLeft:26,verticalAlign:"middle"}},r.a.createElement("h4",{className:nr.a.iconTitle},"Upload your project icon"),r.a.createElement("p",{className:nr.a.iconP},"Recommended size is 200 x 200px"),r.a.createElement(rr.a,{shape:"round"},r.a.createElement(Na.a,{showUploadList:!1,beforeUpload:function(e){return c.apply(this,arguments)}},r.a.createElement(g.a,{className:nr.a.button,type:"primary",disabled:!t},"Upload Icon")))),r.a.createElement("div",{style:{width:320,paddingRight:10,marginTop:38}})),r.a.createElement("div",{id:"setting-right",style:{marginLeft:"349px"}},r.a.createElement(P.a,{layout:"vertical",style:{maxWidth:700,marginLeft:40,marginRight:40},className:nr.a.custom_general_info_form},r.a.createElement("div",{style:{display:"inline-block"}},r.a.createElement(P.a.Item,{label:"Project Name"},t?r.a.createElement(R.a,{style:{width:500},defaultValue:l.name,onChange:function(e){return a("name",ie.a.trimStart(e.target.value))}}):r.a.createElement("p",{style:{wordBreak:"break-all",width:"100%"}},l.name))),r.a.createElement(P.a.Item,{label:"Project Investigator"},r.a.createElement(ir,{style:{color:"rgba(0,0,0,0.8)"},ellipsis:{rows:2,expandable:!0}},t?r.a.createElement(R.a,{style:{width:500},defaultValue:l.investigator,onChange:function(e){return a("investigator",ie.a.trimStart(e.target.value))}}):r.a.createElement("p",{style:{wordBreak:"break-all",width:"100%"}},l.investigator))),r.a.createElement(P.a.Item,{label:"Sponsors and Collaborators"},t?r.a.createElement(R.a,{style:{width:500},defaultValue:l.sponsor,onChange:function(e){return a("sponsor",ie.a.trimStart(e.target.value))}}):r.a.createElement("p",{style:{wordBreak:"break-all",width:"100%"}},l.sponsor)),r.a.createElement(P.a.Item,{label:"Create Time"},l.time_created?re()(l.time_created).format("YYYY-MM-DD HH:mm"):null),r.a.createElement(P.a.Item,{label:"Eligibility Criteria"},t?r.a.createElement("div",null,r.a.createElement(lr,{autoSize:!0,style:{minHeight:60},maxLength:150,defaultValue:l.criteria,onChange:function(e){return a("criteria",ie.a.trimStart(e.target.value))}}),r.a.createElement("span",{style:{float:"right"}},"".concat(n.criteria?n.criteria.length:0,"/150"))):r.a.createElement("p",{style:{wordBreak:"break-all",width:"100%"}},l.criteria&&Re(l.criteria))),r.a.createElement(P.a.Item,{label:"Contact Information"},t?r.a.createElement("div",null,r.a.createElement(lr,{autoSize:!0,style:{minHeight:60},maxLength:100,defaultValue:l.contact,onChange:function(e){return a("contact",ie.a.trimStart(e.target.value))}}),r.a.createElement("span",{style:{float:"right"}},"".concat(n.contact?n.contact.length:0,"/100"))):r.a.createElement("p",{style:{wordBreak:"break-all",width:"100%"}},l.contact&&Re(l.contact))),r.a.createElement(P.a.Item,{label:"Primary Study Email"},t?r.a.createElement("div",null,r.a.createElement(R.a,{style:i.primaryEmail?{width:500}:{width:500,borderColor:"red"},className:!i.primaryEmail&&nr.a.antInput,defaultValue:l.primaryEmail,onChange:function(e){return a("primaryEmail",ie.a.trimStart(e.target.value))}}),!i.primaryEmail&&r.a.createElement("p",{style:{color:"red",marginLeft:5,marginTop:5}},"Email format is not correct")):r.a.createElement("a",{href:"mailto:".concat(l.primaryEmail),rel:"noreferrer noopener",style:{paddingRight:"5px",wordBreak:"break-all"}},l.primaryEmail)),r.a.createElement(P.a.Item,{label:"Principle Investigator Email Address"},t?r.a.createElement("div",null,r.a.createElement(R.a,{style:i.investigatorEmail?{width:500}:{width:500,borderColor:"red"},className:!i.investigatorEmail&&nr.a.antInput,defaultValue:l.investigatorEmail,onChange:function(e){return a("investigatorEmail",ie.a.trimStart(e.target.value))}}),!i.investigatorEmail&&r.a.createElement("p",{style:{color:"red",marginLeft:5,marginTop:5}},"Email format is not correct")):r.a.createElement("a",{href:"mailto:".concat(l.investigatorEmail),rel:"noreferrer noopener",style:{paddingRight:"5px",wordBreak:"break-all"}},l.investigatorEmail)),r.a.createElement(P.a.Item,{label:"Description"},t?r.a.createElement("div",null,r.a.createElement(lr,{autoSize:!0,defaultValue:l.description,onChange:function(e){return a("description",e.target.value)},style:{minHeight:100},maxLength:250}),r.a.createElement("span",{style:{float:"right"}},"".concat(n.description?n.description.length:0,"/250"))):r.a.createElement("p",{style:{wordBreak:"break-all"}},l.description&&Re(l.description)))))):null})),cr=a(1634),or=Wt.a.Option,ur={labelCol:{span:8},wrapperCol:{span:16}};var mr=Object(E.k)((function(e){var t=P.a.useForm(),a=Object(h.a)(t,1)[0],l=Object(n.useState)(!1),i=Object(h.a)(l,2),s=(i[0],i[1],Object(n.useState)(!1)),c=Object(h.a)(s,2),o=(c[0],c[1],Object(n.useState)(!1)),u=Object(h.a)(o,2),m=u[0],d=u[1],p=Object(n.useState)(null),f=Object(h.a)(p,2),E=f[0],v=f[1],b=Object(Ze.d)((function(e){return e.user})),y=e.datasetUpdate,k=Object(I.a)(["message"]).t;Object(n.useEffect)((function(){var t;(t=e.currentStudy.id,z({url:"v1/".concat(t,"/datasetproperty"),method:"GET",params:{key:"redap_token"}})).then((function(e){var t=e.data.result;v(t.redap_token)}))}),[e.currentStudy.id]);var j=function(){d(!1),a.resetFields()};return r.a.createElement("div",{style:{padding:20}},r.a.createElement("div",{style:{float:"left",width:"749px",marginLeft:6}},r.a.createElement("div",{style:{display:"inline-block"}},r.a.createElement("b",{style:{fontSize:15}},"Status"),r.a.createElement("p",{style:{marginLeft:20,marginTop:10,fontSize:15}},r.a.createElement(Ca.default.Group,{onChange:function(t){e.updateDatasetInfo("status",t.target.value)},value:y.status,disabled:!e.editMode},r.a.createElement(Jt.a,{direction:"vertical"},r.a.createElement(Ca.default,{value:"dev"},r.a.createElement("b",null,"Development")),r.a.createElement("p",{style:{marginLeft:30,fontSize:12}},"All Patient Data Gateway containers are created in Development mode where Container Admin are able to setup the study and test features with mock data."),r.a.createElement(Ca.default,{value:"prod"},r.a.createElement("b",null,"Production")),r.a.createElement("p",{style:{marginLeft:30,fontSize:12}},"Move the container into Production when you have chosen an Enrollment Workflow and are ready to begin data collection."),r.a.createElement(Ca.default,{value:"closed"},r.a.createElement("b",null,"Closed")),r.a.createElement("p",{style:{marginLeft:30,fontSize:12}},"When you are finished with the container, change the status to Closed. All access by Researcher Members and Patients will be suspended and Container Admin access will be read-only.")))),r.a.createElement("b",{style:{fontSize:15,marginTop:15}},"Enrollment Workflow"),r.a.createElement("p",{style:{marginLeft:30,marginTop:10}},r.a.createElement(Wt.a,{defaultValue:"1",className:nr.a.menu,disabled:!e.editMode},r.a.createElement(or,{value:"1"},"Public Enrollment"),r.a.createElement(or,{value:"2"},"Invitation-based Enrollment"))),r.a.createElement("p",{style:{marginLeft:30,marginTop:10}},r.a.createElement(cr.a,{defaultChecked:e.datasetInfo&&e.datasetInfo.recruitment,disabled:!e.editMode,checkedChildren:"on",unCheckedChildren:"off",onChange:function(t,a){return e.updateDatasetInfo("recruitment",t)}}),r.a.createElement("b",{style:{fontSize:14,marginLeft:10}},"Recruitment:",y.recruitment?"ON":"OFF"),r.a.createElement("p",{style:{marginLeft:54}},y.recruitment?"Enrollment button is functional and visible on the Study Splash Page.":"Enrollment button is not visible on the Study Splash Page.")),r.a.createElement("b",{style:{fontSize:15,marginTop:15}},"Study Splash Page"),r.a.createElement("p",{style:{marginLeft:30,marginTop:10}},r.a.createElement(cr.a,{defaultChecked:e.datasetInfo&&e.datasetInfo.discoverable,disabled:!e.editMode,checkedChildren:"on",unCheckedChildren:"off",onChange:function(t,a){return e.updateDatasetInfo("discoverable",t)}}),r.a.createElement("b",{style:{fontSize:14,marginLeft:10}},"Public Visibility:",y.discoverable?"ON":"OFF"),r.a.createElement("p",{style:{marginLeft:54}},y.discoverable?"All site visitors are able to access the page and view the contents.":"Site visitors are unable to access the page and view the contents. Only study members and participants will be able to view the page.")),r.a.createElement("b",{style:{fontSize:15,marginTop:15}},"REDCap Project Setup"),r.a.createElement("p",{style:{marginLeft:30,marginTop:10}},r.a.createElement("b",{style:{fontSize:14,marginLeft:10}},"API Token"),r.a.createElement("p",null,r.a.createElement(R.a,{className:nr.a.input,disabled:!0,type:"password",value:E}),r.a.createElement(g.a,{style:{marginLeft:10,borderRadius:15,border:"1px solid"},onClick:function(){return d(!0)},disabled:!e.editMode},"Replace Token")),r.a.createElement("p",{style:{fontSize:14,marginTop:25}},r.a.createElement(cr.a,{defaultChecked:e.datasetInfo&&e.datasetInfo.useEconsent,disabled:!e.editMode,checkedChildren:"on",unCheckedChildren:"off",onChange:function(t,a){return e.updateDatasetInfo("useEconsent",t)}}),r.a.createElement("b",{style:{fontSize:14,marginLeft:10}},"Study uses eConsent:",y.useEconsent?"ON":"OFF"),r.a.createElement("p",{style:{marginLeft:54}},y.useEconsent?"The study is connected with REDCap eConsent survey.":"The study is not connected with REDCap eConsent survey."),y.useEconsent?r.a.createElement("div",null,r.a.createElement("b",{style:{fontSize:14,marginLeft:10,marginTop:20}},"Econsent Survey Indentifier"),r.a.createElement("p",null,r.a.createElement(R.a,{className:nr.a.input,disabled:!e.editMode,defaultValue:y.eConsentIdentifier,onChange:function(t){e.updateDatasetInfo("eConsentIdentifier",t.target.value)}}))):null),r.a.createElement("b",{style:{fontSize:14,marginLeft:10,marginTop:20}},"Consent Form Name"),r.a.createElement("p",null,r.a.createElement(R.a,{className:nr.a.input,disabled:!e.editMode,defaultValue:y.eConsentFormName,onChange:function(t){e.updateDatasetInfo("eConsentFormName",t.target.value)}})),r.a.createElement("b",{style:{fontSize:14,marginLeft:10,marginTop:20}},"Survey Email Field Name"),r.a.createElement("p",null,r.a.createElement(R.a,{className:nr.a.input,disabled:!e.editMode,defaultValue:y.eConsentEmailFieldName,onChange:function(t){e.updateDatasetInfo("eConsentEmailFieldName",t.target.value)}}))),"instance-admin"===b.role&&r.a.createElement("div",null,r.a.createElement("b",{style:{fontSize:15,marginTop:15}},"Third-party Integrations"),r.a.createElement("p",null,r.a.createElement("p",{style:{marginLeft:30,fontSize:12}},"select a third-party application to enable authorization through Patient External Identity Management"),r.a.createElement(gn.a.Group,{className:nr.a.custom_checkbox,options:[{label:"FitBit",value:"FitBit"},{label:"Withings",value:"Withings"},{label:"iHealth",value:"iHealth"}],onChange:function(t){e.updateDatasetInfo("thirdParty",t)},style:{marginLeft:40},disabled:!e.editMode,defaultValue:y.thirdParty}))))),r.a.createElement(L.a,{visible:m,title:"REDCap Project Setup",onCancel:j,footer:[r.a.createElement(g.a,{key:"back",onClick:j,type:"danger"},"Cancel"),r.a.createElement(g.a,{key:"submit",type:"primary",onClick:function(){var t,n,r=a.getFieldValue("token");r||O.a.error(k("message:config.settings.apiToken.required")),(t=e.currentStudy.id,n=r,z({url:"v1/".concat(t,"/datasetproperty"),method:"POST",params:{key:"redap_token",value:n}})).then((function(e){200===e.status&&(v(r),d(!1),a.resetFields(),O.a.success(k("message:config.settings.redCap.success")))}))}},"Submit")],width:550},r.a.createElement(P.a,Object.assign({form:a},ur,{initialValues:{oldToken:E}}),r.a.createElement(P.a.Item,{label:"Old API Token",name:"oldToken"},r.a.createElement(R.a,{disabled:!0})),r.a.createElement(P.a.Item,{label:"API Token",name:"token",rules:[{required:!0,message:"Please input API Token!"}]},r.a.createElement(R.a,null)))))})),dr={MULTIPLE_CHOICE:"multiple_choice",TEXT:"text"},pr=a(1665),fr=function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};function Er(e,t){if(!e)return{valid:!1,err:"Please input attribute name"};var a=fr(e);return a?0===a.length||a.length>32?{valid:!1,err:"Attribute name must be between 1 and 32 characters"}:/^[A-Za-z0-9 ]+$/i.test(a)?t.find((function(e){return e.name===a}))?{valid:!1,err:"This name has already been defined in attribute template"}:{valid:!0,err:null}:{valid:!1,err:"Only letters, numbers and space is allowed for attribute name"}:{valid:!1,err:"Please input attribute name"}}function vr(e){if(!e)return{valid:!1,err:"Value must be between 1 and 32 characters"};var t=fr(e);return 0===t.length||t.length>250?{valid:!1,err:"Value must be between 1 and 250 characters"}:{valid:!0,err:null}}var gr=Wt.a.Option;var br=function(e){var t=Object(n.useState)(null),a=Object(h.a)(t,2),l=a[0],i=a[1],s=Object(n.useState)(dr.MULTIPLE_CHOICE),c=Object(h.a)(s,2),o=c[0],u=c[1],m=Object(n.useState)(null),d=Object(h.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(!1),v=Object(h.a)(E,2),b=v[0],y=v[1],k=Object(n.useState)(null),j=Object(h.a)(k,2),S=j[0],_=j[1],w=Object(n.useState)(null),C=Object(h.a)(w,2),x=C[0],T=C[1],L=Object(I.a)(["message"]).t,A=Object(Ze.d)((function(e){return e.studyAttributes})).attrsOrder,N=Object(Ze.c)();return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(P.a.Item,x&&{validateStatus:"error",help:x},r.a.createElement(R.a,{value:l,onChange:function(t){i(t.target.value);var a=Er(t.target.value,e.attributes),n=a.valid,r=a.err;T(n?null:r)}}))),r.a.createElement("td",null,r.a.createElement(Wt.a,{defaultValue:"Multiple Choice",onChange:function(e){u(e)},style:{width:"100%"}},Object.keys(dr).map((function(e){return r.a.createElement(gr,{key:e,value:dr[e]},function(e){switch(e){case dr.MULTIPLE_CHOICE:return"Multiple Choice";case dr.TEXT:return"Text"}return""}(dr[e]))})))),r.a.createElement("td",null,o===dr.MULTIPLE_CHOICE?r.a.createElement(P.a.Item,S&&{validateStatus:"error",help:S},r.a.createElement(Wt.a,{mode:"tags",defaultValue:[],onChange:function(e){f(e);var t,a=Object(rn.a)(e);try{for(a.s();!(t=a.n()).done;){var n=vr(t.value),r=n.valid,l=n.err;if(!r)return void _(l)}}catch(l){a.e(l)}finally{a.f()}_(null)},className:nr.a.custom_select_tag,tagRender:function(e){var t=e.label,a=vr(t).valid;return r.a.createElement(lt.a,Object.assign({},e,{color:a?"default":"error"}),t)}})):null,o===dr.TEXT?r.a.createElement(P.a.Item,S&&{validateStatus:"error",help:S},r.a.createElement(R.a,{onChange:function(t){f(t.target.value);var a=vr(t.target.value,e.attributes),n=a.valid,r=a.err;T(n?null:r)}})):null),r.a.createElement("td",null),r.a.createElement("td",null,r.a.createElement(g.a,{style:{border:0,outline:0,color:"#5B8C00",boxShadow:"none",background:"none"},icon:r.a.createElement(pr.a,null),loading:b,onClick:function(){var t=Object(ht.a)(bt.a.mark((function t(a){var n,r,i,s,c,u,m,d,f,E,v;return bt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=Er(l,e.attributes),s=i.valid,c=i.err,s){t.next=4;break}return O.a.error(c),t.abrupt("return");case 4:if(!S){t.next=7;break}return O.a.error("".concat(L("message:config.attribute.error"))),t.abrupt("return");case 7:if(o!==dr.MULTIPLE_CHOICE||p&&0!==p.length){t.next=10;break}return O.a.error(L("message:config.attribute.multipleChoice.empty")),t.abrupt("return");case 10:return y(!0),u=p,m=e.currentStudy,d=l.replaceAll(" ","_"),m["attr_".concat(d)]=u,N({type:"UPDATE_ATTRS_ORDER",payload:"attr_".concat(d)}),m.attrs_order=[].concat(Object(ee.a)(A),["attr_".concat(d)]),delete m.time_lastmodified,t.next=20,W(m.id,m);case 20:return t.next=22,e.loadManifest();case 22:return y(!1),e.setEditMode("default"),t.next=26,B();case 26:f=t.sent,E=null===f||void 0===f||null===(n=f.data)||void 0===n||null===(r=n.result)||void 0===r?void 0:r.node,v=E.filter((function(e){if("study"===e.labels[0])return{item:e}})),N(ke(v));case 30:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),r.a.createElement(g.a,{style:{border:0,outline:0,color:"#FF6D72",boxShadow:"none",background:"none"},icon:r.a.createElement(Ga.a,null),onClick:function(){i(null),f(null),u(dr.MULTIPLE_CHOICE),_(null),e.setEditMode("default")}})))},hr=a(1666),yr=a(1667);function Or(e){switch(e){case dr.MULTIPLE_CHOICE:return"Multiple Choice";case dr.TEXT:return"Text"}return""}var kr=Wt.a.Option;var jr=function(e){var t=Object(n.useState)(e.currentAttribute.name),a=Object(h.a)(t,2),l=a[0],i=a[1],s=Object(n.useState)(e.currentAttribute.type),c=Object(h.a)(s,2),o=c[0],u=c[1],m=Object(n.useState)(e.currentAttribute.value),d=Object(h.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(!1),v=Object(h.a)(E,2),g=(v[0],v[1],Object(n.useState)(null)),b=Object(h.a)(g,2),y=b[0],O=b[1],k=Object(n.useState)(null),j=Object(h.a)(k,2),S=j[0],_=j[1];return Object(I.a)(["message"]).t,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(P.a.Item,S&&{validateStatus:"error",help:S},r.a.createElement(R.a,{value:l,onChange:function(t){i(t.target.value);var a=Er(t.target.value,e.attributes),n=a.valid,r=a.err;_(n?null:r)}}))),r.a.createElement("td",null,r.a.createElement(Wt.a,{defaultValue:Or(o),onChange:function(e){u(e)},style:{width:"100%"}},Object.keys(dr).map((function(e){return r.a.createElement(kr,{key:e,value:dr[e]},Or(dr[e]))})))),r.a.createElement("td",null,o===dr.MULTIPLE_CHOICE?r.a.createElement(P.a.Item,y&&{validateStatus:"error",help:y},r.a.createElement(Wt.a,{mode:"tags",defaultValue:[],onChange:function(e){f(e);var t,a=Object(rn.a)(e);try{for(a.s();!(t=a.n()).done;){var n=vr(t.value),r=n.valid,l=n.err;if(!r)return void O(l)}}catch(l){a.e(l)}finally{a.f()}O(null)},className:nr.a.custom_select_tag,tagRender:function(e){var t=e.label,a=vr(t).valid;return r.a.createElement(lt.a,Object.assign({},e,{color:a?"default":"error"}),t)}})):null,o===dr.TEXT?r.a.createElement(P.a.Item,y&&{validateStatus:"error",help:y},r.a.createElement(R.a,{defaultValue:p,onChange:function(t){f(t.target.value);var a=vr(t.target.value,e.attributes),n=a.valid,r=a.err;_(n?null:r)}})):null),r.a.createElement("td",null,r.a.createElement(hr.a,{style:{marginRight:10},onClick:function(){e.moveUp(e.currentAttribute)}}),r.a.createElement(yr.a,{onClick:function(){e.moveDown(e.currentAttribute)}})),r.a.createElement("td",null))},Sr=L.a.confirm;var _r=function(e){var t,a,l=e.mItem,i=e.configEditMode,s=["Attribute Name","Type","Value","Optional"],c=Object(n.useState)("default"),o=Object(h.a)(c,2),u=o[0],m=o[1],d=Object(Ze.d)((function(e){return e.studyAttributes})).attrsOrder,p=Object(n.useState)(Object(se.v4)()),f=Object(h.a)(p,2),E=f[0],v=f[1],b=(null===(t=e.currentStudy)||void 0===t?void 0:t.attrs_order)?null===(a=e.currentStudy)||void 0===a?void 0:a.attrs_order:e.mItem.attributes.map((function(e){return"attr_"+e.key})),y=Object(Ze.c)();Object(n.useEffect)((function(){y(Ce(b))}),[]);var O=function(){var t=Object(ht.a)(bt.a.mark((function t(a){return bt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n=a.studyId,r="attr_".concat(a.key),z({url:"/v1/dataset/".concat(n,"/properties/").concat(r),method:"DELETE"});case 2:return t.sent,t.next=5,e.loadManifest();case 5:case"end":return t.stop()}var n,r}),t)})));return function(e){return t.apply(this,arguments)}}();function k(e){var t=d.indexOf("attr_"+e.key);if(0!==t){var a=Object(ee.a)(d.filter((function(t){return t!=="attr_"+e.key})));a.splice(t-1,0,"attr_"+e.key),y(Ce(a)),v(Object(se.v4)())}}function j(e){var t=d.indexOf("attr_"+e.key);if(t!==d.length-1){var a=Object(ee.a)(d.filter((function(t){return t!=="attr_"+e.key})));a.splice(t+1,0,"attr_"+e.key),y(Ce(a)),v(Object(se.v4)())}}var S=[],_=l.attributes;return d&&(_=_.sort((function(e,t){return d.indexOf("attr_"+e.key)-d.indexOf("attr_"+t.key)}))),S=i?_.map((function(t,a){return r.a.createElement(jr,{key:"add-bar-end-step2-".concat(a),manifestID:l.id,attributes:_,setEditMode:m,loadManifest:e.loadManifest,tableColumns:s,currentStudy:e.currentStudy,currentAttribute:t,moveDown:j,moveUp:k})})):_.map((function(e){return r.a.createElement("tr",{key:l.id+"-"+e.id},r.a.createElement("td",null,e.name),r.a.createElement("td",null,function(e){switch(e){case dr.MULTIPLE_CHOICE:return"Multiple Choice";case dr.TEXT:return"Text"}return""}(e.type)),r.a.createElement("td",null,e.value&&e.type===dr.MULTIPLE_CHOICE?e.value.split(",").map((function(e,t){return r.a.createElement(lt.a,{key:t},e)})):e.value&&Re(e.value)),r.a.createElement("td",null),r.a.createElement("td",null,r.a.createElement("a",{onClick:function(){return function(e){Sr({title:"Confirm deletion",icon:r.a.createElement(ja.a,null),content:'Are you sure delete attribute "'.concat(e.name,'"?'),okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){O(e)},onCancel:function(){console.log("Cancel")}})}(e)}},"Delete")))})),r.a.createElement(r.a.Fragment,null,r.a.createElement("table",{className:nr.a.manifest_table,key:E},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:180}},"Attribute Name"),r.a.createElement("th",{style:{width:180}},"Type"),r.a.createElement("th",null,"Value"),r.a.createElement("th",{style:{width:120}}),r.a.createElement("th",{style:{width:120}},"Actions"))),r.a.createElement("tbody",null,S,"add"===u?r.a.createElement(br,{key:"add-bar-end-step2",manifestID:l.id,attributes:l.attributes,setEditMode:m,loadManifest:e.loadManifest,tableColumns:s,currentStudy:e.currentStudy}):r.a.createElement("tr",{key:"add-bar-end-step1"},r.a.createElement("td",{style:{textAlign:"center"},colSpan:5},r.a.createElement(g.a,{className:nr.a.button,type:"primary",icon:r.a.createElement(Qa.a,null),onClick:function(e){m("add")},disabled:i},"Add Attribute"))))))};var wr=function(e){var t=Object(n.useState)(!1),a=Object(h.a)(t,2),l=a[0],i=a[1],s=e.manifestList.find((function(t){return t.id===e.manifestID})),c=r.a.createElement(L.a,{title:"Delete Attribute Template",visible:l,onOk:Object(ht.a)(bt.a.mark((function e(){return bt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(!1);case 1:case"end":return e.stop()}}),e)}))),onCancel:function(){return i(!1)}},r.a.createElement("p",null,"Deleting attribute template is unrecoverable, are you sure you want to proceed?"));return r.a.createElement("div",{key:s.id,className:nr.a.manifestList},r.a.createElement(r.a.Fragment,null,r.a.createElement("b",{style:{marginLeft:24}},"Study Attributes")),r.a.createElement(_r,{mItem:s,loadManifest:e.loadManifest,currentStudy:e.currentStudy,configEditMode:e.configEditMode}),c)};var Cr=function(e){Object(I.a)(["errormessages","success"]).t;var t=Object(n.useState)(!1),a=Object(h.a)(t,2),l=(a[0],a[1],Object(n.useState)([])),i=Object(h.a)(l,2),s=i[0],c=i[1],o=Object(n.useState)(!1),u=Object(h.a)(o,2),m=(u[0],u[1],Object(n.useState)([])),d=Object(h.a)(m,2),p=(d[0],d[1]),f=Object(n.useState)({}),E=Object(h.a)(f,2),v=E[0],g=E[1],b=P.a.useForm(),y=(Object(h.a)(b,1)[0],Object(n.useCallback)(Object(ht.a)(bt.a.mark((function t(){var a,n,r,l,i,s,o,u,m,d,f;return bt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E=e.currentStudy&&e.currentStudy.id,z({url:"/v1/dataset/".concat(E,"/properties")});case 2:for(n=t.sent,r=null===(a=e.currentStudy)||void 0===a?void 0:a.attrs_order,l=n.data.result,g(l),i=[],s=Object.keys(l),o=0,u=s;o<u.length;o++)m=u[o],d=l[m],m.startsWith("attr_")&&d&&i.push({name:m.slice(5).replaceAll("_"," "),type:"string"===typeof d?"text":"multiple_choice",value:"string"===typeof d?d:d.join(","),studyId:e.currentStudy.id,id:s.indexOf(m),key:m.slice(5)});r&&i.sort((function(e,t){return r.indexOf("attr_"+e.key)-r.indexOf("attr_"+t.key)})),f=[{id:e.currentStudy.id,name:"File Attributes",attributes:i}],p(f),c(f);case 13:case"end":return t.stop()}var E}),t)}))),[e.currentStudy&&e.currentStudy.id]));return Object(n.useEffect)((function(){y()}),[y]),r.a.createElement(r.a.Fragment,null,s.length?s.map((function(t){return r.a.createElement(wr,{key:t.id,manifestID:t.id,manifestList:s,loadManifest:y,currentStudy:v,configEditMode:e.configEditMode})})):null)},Ir=(yt.a.Title,Ot.a.TabPane),xr=b.a.Content;var Tr=function(e){var t=Object(n.useState)(!1),a=Object(h.a)(t,2),l=a[0],i=a[1],s=Object(n.useState)(!1),c=Object(h.a)(s,2),o=c[0],u=c[1],m=Object(Ze.d)((function(e){return e})).studyAttributes,d=Object(I.a)(["message"]).t,p=Object(n.useState)(e.currentStudy),f=Object(h.a)(p,2),v=f[0],b=f[1],y=Object(n.useState)(null),k=Object(h.a)(y,2),j=k[0],S=(k[1],Object(n.useState)("general_info")),_=Object(h.a)(S,2),w=_[0],C=(_[1],Object(n.useState)(e.currentStudy)),x=Object(h.a)(C,2),T=x[0],P=x[1],L=Object(n.useState)({primaryEmail:!0,investigatorEmail:!0}),R=Object(h.a)(L,2),A=R[0],N=R[1],D=Object(Ze.c)();Object(n.useEffect)((function(){b(e.currentStudy),P(e.currentStudy)}),[e.currentStudy]);var U=function(){var t=Object(ht.a)(bt.a.mark((function t(){var a,n,r,l,s,c,o;return bt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(A.primaryEmail){t.next=3;break}return O.a.error(d("message:config.general.primaryEmail.valid")),t.abrupt("return");case 3:if(A.investigatorEmail){t.next=6;break}return O.a.error(d("message:config.general.investigatorEmail.valid")),t.abrupt("return");case 6:return u(!0),(r=Object(F.a)(Object(F.a)({},e.currentStudy),T)).attrs_order=m.attrsOrder,delete r.time_lastmodified,t.next=12,W(r.id,r);case 12:return 200===t.sent.status&&b(r),u(!1),i(!1),t.next=18,J();case 18:return l=t.sent,D(we(l.data.result)),t.next=22,B();case 22:return s=t.sent,c=null===s||void 0===s||null===(a=s.data)||void 0===a||null===(n=a.result)||void 0===n?void 0:n.node,o=c.filter((function(e){if("study"===e.labels[0])return{item:e}})),D(ke(o)),t.abrupt("return");case 27:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();function M(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}var q=function(e,t){if("name"===e&&t.length>100)return void O.a.error(d("message:config.general.name.valid"));if("primaryEmail"===e){if(!M(t))return void N(Object(F.a)(Object(F.a)({},A),{},{primaryEmail:!1}));N(Object(F.a)(Object(F.a)({},A),{},{primaryEmail:!0}))}if("investigatorEmail"===e){if(!M(t))return void N(Object(F.a)(Object(F.a)({},A),{},{investigatorEmail:!1}));N(Object(F.a)(Object(F.a)({},A),{},{investigatorEmail:!0}))}P(Object(F.a)(Object(F.a)({},T),{},Object(Xa.a)({},e,t)))},z=l?r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{loading:o,onClick:U,style:{marginRight:10},className:nr.a.button,type:"primary",icon:r.a.createElement(tr.a,null)},"Save"),r.a.createElement(g.a,{onClick:function(){var t,a,n=(null===(t=e.currentStudy)||void 0===t?void 0:t.attrs_order)?null===(a=e.currentStudy)||void 0===a?void 0:a.attrs_order:e.mItem.attributes.map((function(e){return"attr_"+e.key}));D(Ce(n)),i(!1)},type:"link"},"Cancel")):r.a.createElement(g.a,{style:{color:"#595959"},onClick:function(){i(!0)},type:"link",icon:r.a.createElement(Za.a,null)},"Edit");return r.a.createElement(r.a.Fragment,null,r.a.createElement(xr,{className:"content"},r.a.createElement(E.a,{when:l,message:"You have unsaved changes, are you sure you want to leave?"}),r.a.createElement(tt.a,{className:nr.a.card_wrapper,style:{marginTop:30}},r.a.createElement(Ot.a,{className:nr.a.custom_tabs,tabBarExtraContent:"general_info"===w&&z,renderTabBar:function(e,t){return r.a.createElement(t,Object.assign({className:nr.a.tabHeader},e,{style:{paddingLeft:16}}))}},r.a.createElement(Ir,{tab:"General Information",key:"general_info"},r.a.createElement("div",{style:{backgroundColor:"white"}},r.a.createElement(sr,{userListOnDataset:j,updateDatasetInfo:q,saveDatasetInfo:U,editMode:l,datasetInfo:v,setEditMode:i,datasetUpdate:T,setDatasetInfo:b,emailValid:A}))),r.a.createElement(Ir,{tab:"Study Configuration",key:"study_config"},r.a.createElement("div",{style:{backgroundColor:"white"}},r.a.createElement(mr,Object.assign({},e,{editMode:l,setEditMode:i,datasetInfo:v,updateDatasetInfo:q,saveDatasetInfo:U,datasetUpdate:T})))),r.a.createElement(Ir,{tab:"Study Attributes",key:"study_attributes"},r.a.createElement("div",{style:{backgroundColor:"white"}},r.a.createElement(Cr,{currentStudy:e.currentStudy,configEditMode:l})))))))},Pr=a(316),Lr=a.n(Pr),Rr=a(93),Ar=Wt.a.Option;function Nr(e){var t=e.existedUsers,a=e.getUsers,n=r.a.useState(!1),l=Object(h.a)(n,2),i=l[0],s=l[1],c=P.a.useForm(),o=Object(h.a)(c,1)[0],u=r.a.useState(),m=Object(h.a)(u,2),d=m[0],p=m[1],f=Object(I.a)(["message"]),v=f.t,b=(f.i18n,Object(E.i)().studyId);r.a.useEffect((function(){!function(){(e=b,z({url:"v1/".concat(e,"/users"),method:"GET",params:{relation:'["admin", "member", "patient"]'}})).then((function(e){var a=e.data.result.filter((function(e){return"patient"!==e.role}));(function(e){return z({url:"/v1/".concat(e,"/listusers?relation=sister"),method:"GET"})})(b).then((function(e){var n,l=e.data.result,i=Object(rn.a)(l);try{var s=function(){var e=n.value;a.find((function(t){return t.id===e.id}))||a.push(e)};for(i.s();!(n=i.n()).done;)s()}catch(o){i.e(o)}finally{i.f()}var c=a.map((function(e){if(!(t&&t.find((function(t){return t.id===e.id}))))return r.a.createElement(Ar,{key:e.username},e.username)}));p(c)})).catch((function(e){!e.response||400!==e.response.status&&406!==e.response.status||console.log("project have no sisiter project");var n=a.map((function(e){if(!(t&&t.find((function(t){return t.username===e.username}))))return r.a.createElement(Ar,{key:e.username},e.username)}));p(n)}))}));var e}()}),[t]);var y=r.a.createElement(Rr.a,{image:Rr.a.PRESENTED_IMAGE_SIMPLE,description:r.a.createElement("span",null,"All users from the associated Researcher Portal container have been added. If attempting to add a new user, please add them on the associated Researcher Portal container first.")});return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{type:"primary",onClick:function(){return s(!0)}},"Add Researcher"),r.a.createElement(L.a,{title:"Add User as Researcher",visible:i,okText:"Add Researcher",onOk:function(){o.validateFields().then(function(){var e=Object(ht.a)(bt.a.mark((function e(t){var n,r,l,i,c;return bt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.users,r=t.role,l=Object(rn.a)(n),e.prev=3,l.s();case 5:if((i=l.n()).done){e.next=11;break}return c=i.value,e.next=9,Y(b,c,r);case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),l.e(e.t0);case 16:return e.prev=16,l.f(),e.finish(16);case 19:o.resetFields(),a(),s(!1),O.a.success(v("message:invitation.researcher.success"));case 23:case"end":return e.stop()}}),e,null,[[3,13,16,19]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("Validate Failed:",e),O.a.error(v("message:invitation.researcher.failed"))}))},onCancel:function(){s(!1),o.resetFields()}},r.a.createElement(P.a,{form:o,layout:"vertical",name:"add_appliable_user"},r.a.createElement(P.a.Item,{label:"Username",name:"users",rules:[{required:!0,message:"Please input researcher's username."}]},r.a.createElement(Wt.a,{mode:"multiple",showSearch:!0,allowClear:!0,style:{width:"100%"},placeholder:"Please select",onChange:function(e){console.log("selected ".concat(e))},notFoundContent:y},d)),r.a.createElement(P.a.Item,{label:"Role",name:"role",initialValue:"admin",rules:[{required:!0,message:"Please select researcher's role."}]},r.a.createElement(Ca.default.Group,{defaultValue:"admin"},r.a.createElement(Ca.default,{value:"admin"},"Admin"),r.a.createElement(Ca.default,{value:"member"},"Member"))))))}Wt.a.Option;var Fr=y.a.SubMenu,Dr=yt.a.Title;var Ur=Object(E.k)((function(e){var t=Object(E.i)().studyId,a=r.a.useState([]),n=Object(h.a)(a,2),l=n[0],i=n[1];r.a.useEffect((function(){s()}),[]);var s=function(){(function(e){return z({url:"/v1/".concat(e,"/researchers"),method:"GET"})})(t).then((function(e){if(200===e.status){var t=e.data.result.map((function(e){return Object(F.a)(Object(F.a)({},e),{},{key:e.id})}));i(t)}}))},c=function(e,t,a){var n="";n="delete"===a?"Are you sure you wish to remove user ".concat(e.username," from this project?"):"Are you sure you wish to change the role for user ".concat(e.username," to ").concat(t,"?"),L.a.confirm({title:"Confirm",icon:r.a.createElement(ja.a,null),content:n,okText:"OK",cancelText:"Cancel",onOk:function(){"delete"===a?function(e,t){u.apply(this,arguments)}(e.id,t):function(e,t){o.apply(this,arguments)}(e.id,t)}})};function o(){return(o=Object(ht.a)(bt.a.mark((function e(a,n){var r;return bt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe(t,a,n);case 2:200===e.sent.status&&(r=l.map((function(e){return e.id===a&&(e.permission=n),e})),i(r));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=Object(ht.a)(bt.a.mark((function e(a,n){return bt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(t,a);case 2:200===e.sent.status&&s();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m=[{title:"Username",dataIndex:"username",key:"username",sorter:function(e,t){return e.username.localeCompare(t.username)}},{title:"First Name",dataIndex:"firstname",key:"firstName",sorter:function(e,t){return e.firstname.localeCompare(t.firstname)}},{title:"Last Name",dataIndex:"lastname",key:"lastName",sorter:function(e,t){return e.lastname.localeCompare(t.lastname)}},{title:"Email",dataIndex:"email",key:"email"},{title:"Join Date",dataIndex:"time_created",key:"createdTimestamp",sorter:function(e,t){return new Date(e.created_time)-new Date(t.created_time)},render:function(e){return Wn()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"Role",dataIndex:"permission",key:"Role"},{title:"Actions",key:"action",render:function(e,t){return r.a.createElement(ya.a,{overlay:(a=t,r.a.createElement(y.a,{id:"teams_role_dropdown"},r.a.createElement(Fr,{title:"Change Role"},r.a.createElement(y.a.Item,{onClick:function(){console.log(a),c(a,"member","changeRole")},key:"member"},"member"),r.a.createElement(y.a.Item,{onClick:function(){c(a,"admin","changeRole")},key:"admin"},"admin")),r.a.createElement(y.a.Item,{onClick:function(){c(a,null,"delete")},style:{color:"red"}},"Remove"))),placement:"bottomRight"},r.a.createElement(g.a,{shape:"circle"},r.a.createElement(ka.a,null)));var a}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Lr.a.container},r.a.createElement("div",null,r.a.createElement(Dr,{level:2},"Researchers ")," "),r.a.createElement(tt.a,{style:{boxShadow:"0px 1px 9px #00000020"}},r.a.createElement(Nr,{existedUsers:l,getUsers:s}),r.a.createElement(Oa.a,{dataSource:l,columns:m,style:{marginTop:20}}))),r.a.createElement(et,null))})),Mr=a(317),qr=a.n(Mr),zr=yt.a.Title,Vr=(yt.a.Paragraph,b.a.Content);var Br=[{path:"/landing",component:Gn},{path:"/patients",component:er,protected:!0},{path:"/config",component:Tr},{path:"/survey",component:function(e){var t=Object(Ze.d)((function(e){return e.redCapLinks&&e.redCapLinks.surveyLink})),a=Object(Ze.d)((function(e){return e.redCapLinks&&e.redCapLinks.surveyQueueLink})),n=Object(Ze.d)((function(e){return e.redCapLinks&&e.redCapLinks.isSurveyStarted})),l=Object(E.h)(),i="True"===qr.a.parse(l.search).isSurveyLink,s=a;return n&&!i||(s=t),r.a.createElement(Vr,{className:"content"},r.a.createElement("div",null,r.a.createElement(zr,{level:2},"eConsent Survey"),r.a.createElement(zn.a,{src:s,style:{width:"1px",minWidth:"100%"},frameborder:"0",height:"1000px",inPageLinks:!0})))}},{path:"/researchers",component:Ur,protected:!0}],Hr=a(1629),Yr=b.a.Content;var Gr=Object(E.k)((function(e){return r.a.createElement(Yr,null,r.a.createElement(Hr.a,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:r.a.createElement(g.a,{onClick:function(){e.history.push("/uploader")},type:"primary"},"Back Home")}))})),Kr=b.a.Content;var Wr=[{path:"/404",component:Gr},{path:"/403",component:Object(E.k)((function(e){return r.a.createElement(Kr,null,r.a.createElement(Hr.a,{status:"403",title:"403",subTitle:"Sorry, you are not authorized to access this page.",extra:r.a.createElement(g.a,{type:"primary"},r.a.createElement(s.b,{to:"/"},"Back Home"))}))}))}],Jr=a(206),Xr=a.n(Jr);var Zr=[{path:"/confirmation",component:function(){return r.a.createElement("div",{className:Xr.a.confirmationWrapper},r.a.createElement(tt.a,{style:{marginBottom:"10px"}},r.a.createElement(Hr.a,{status:"success",title:"Registration: Successful",subTitle:r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,r.a.createElement("br",null),"A confirmation email will be sent to your email address soon.",r.a.createElement("br",null)," Please login with your new credentials.")),extra:[r.a.createElement(g.a,{type:"primary",key:"console"},r.a.createElement(s.b,{to:"/login"},"Back to log-in Page"))]})))}},{path:"/",component:Object(E.k)((function(e){return r.a.createElement("div",{className:Xr.a.container},r.a.createElement(kn,{onSubmit:function(t){Me(t).then((function(t){200===t.status?e.history.push("/registration/confirmation"):O.a.error("Something went wrong during registration. Please try again.")})).catch((function(e){if(e.response){var t=e.response.data.result;O.a.error(t)}}))}}))}))}];function Qr(e){var t=Object(n.useState)("patient"),a=Object(h.a)(t,2),l=(a[0],a[1],P.a.useForm()),i=Object(h.a)(l,1)[0];return console.log(e.username),i.setFieldsValue({username:e.username}),r.a.createElement(P.a,{name:"basic",initialValues:{remember:!0},onFinish:function(t){e.onSubmit(t)},form:i},r.a.createElement(P.a.Item,{label:"Username",name:"username",initialValue:e.username,rules:[{required:!0,message:"Enter your username."}]},r.a.createElement(R.a,{prefix:r.a.createElement(w.a,null),disabled:e.username})),r.a.createElement(P.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Enter your password."}]},r.a.createElement(R.a.Password,{prefix:r.a.createElement(St.a,null)})),r.a.createElement(P.a.Item,null,r.a.createElement(g.a,{type:"primary",htmlType:"submit"},"Log In")))}var $r=Object(E.k)(Object(Ze.b)(null,{setIsLoginCreator:Se})((function(e){var t=P.a.useForm(),a=(Object(h.a)(t,1)[0],r.a.useState(!1)),n=Object(h.a)(a,2),l=n[0],i=n[1],s=Object(I.a)(["message"]),c=s.t;return s.i18n,!1===l?r.a.createElement(Qr,{onSubmit:function(t){V(Object(F.a)(Object(F.a)({},t),{},{user_role:"patient"})).then((function(a){var n=a.data.result,r=n.access_token,l=n.refresh_token;if(200==a.status){i(!0);var s=Object(Le.a)(r);ce.setCookies({isLogin:!0,username:t.username,role:s.user_role,access_token:r,refresh_token:l}),e.setIsLoginCreator(!0),At.initRefreshModal(),At.initExpirationLogout(),ce.refreshToken(r)}})).catch((function(e){e.response&&409===e.response.status?O.a.error(c("message:login.patient_tab.role")):e.response&&403===e.response.status&&O.a.error(c("message:login.password_error"))}))},username:e.username}):r.a.createElement(P.a,{name:"invite_question",onFinish:function(t){console.log("Success:",t),function(e,t){return z({url:"/v1/admin/answer/".concat(e),method:"POST",data:{answer:t}})}(e.match.params.invitationHash,t.answer).then((function(t){t.data.result&&(t.data.result.success?e.history.push("/my-studies"):O.a.error(c("message:invitation.patient.answer.valid")))})).catch((function(e){console.log(e),O.a.error("Something wrong")}))},onFinishFailed:function(e){console.log("Failed:",e)}},r.a.createElement(P.a.Item,{label:"Security Question"},r.a.createElement("span",{className:"ant-form-text"},e.question)),r.a.createElement(P.a.Item,{label:"Security Answer",name:"answer",rules:[{required:!0,message:"Enter the security answer."}]},r.a.createElement(R.a,{placeholder:"Security answer"})),r.a.createElement(P.a.Item,null,r.a.createElement(g.a,{type:"primary",htmlType:"submit"},"Submit")))}))),el=b.a.Content,tl=yt.a.Title;var al=[{path:"/:invitationHash",component:Object(E.k)((function(e){var t=P.a.useForm(),a=(Object(h.a)(t,1)[0],r.a.useState(!0)),l=Object(h.a)(a,2),i=l[0],s=l[1],c=r.a.useState(null),o=Object(h.a)(c,2),u=o[0],m=o[1],d=r.a.useState(null),p=Object(h.a)(d,2),f=p[0],E=p[1],v=r.a.useState(""),g=Object(h.a)(v,2),y=g[0],k=g[1],j=r.a.useState(""),S=Object(h.a)(j,2),_=S[0],w=S[1],C=r.a.useState(null),x=Object(h.a)(C,2),T=x[0],L=x[1],R=Object(I.a)(["message"]),A=R.t;return R.i18n,Object(n.useEffect)((function(){(function(e){return z({url:"/v1/admin/invite/".concat(e),method:"GET"})})(e.match.params.invitationHash).then((function(e){200===e.status?(console.log(e),m(e.data.result.is_Registered),E(e.data.result.question),w(e.data.result.username),k(e.data.result.email),s(!1)):(L("Invitation not found."),s(!1))}),(function(e){L("Invitation not found"),s(!1)}))}),[_]),i?r.a.createElement(nt.a,null):T?r.a.createElement(b.a,null,r.a.createElement(el,null,r.a.createElement(at.a,{justify:"center",align:"middle",style:{minHeight:"80vh"}},r.a.createElement(rt.a,null,r.a.createElement(tt.a,{style:{textAlign:"center",padding:"10px"}},r.a.createElement(tl,{level:3},"Invitation not found"),r.a.createElement("p",null,"Please contact your study coordinator.")))))):r.a.createElement(b.a,null,r.a.createElement(el,null,r.a.createElement(tt.a,{style:{textAlign:"center",padding:"10px",maxWidth:700,margin:"50px auto"}},r.a.createElement(tl,{level:3},"You have been invited to enroll in a study on Patient Portal."),r.a.createElement("p",null,"Upon completion of the forms you will be enrolled."),!1===u?r.a.createElement("div",null,r.a.createElement(kn,{onSubmit:function(e){Me(e).then((function(t){200===t.status?(m(!0),w(e.username),O.a.success(A("message:users.register.success"))):O.a.error(A("message:users.register.failed"))})).catch((function(e){if(e.response){var t=e.response.data.result;O.a.error(t)}}))},email:y})):null,!0===u?r.a.createElement($r,{username:_,question:f}):null)))}))}],nl=a(56),rl=Object(nl.a)();a(1609);var ll=Object(Ze.b)((function(e){return{visible:e.refreshTokenModal}}),{setRefreshModal:je})((function(e){var t=e.visible,a=e.setRefreshModal,l=Object(n.useState)(ce.getTokenTimeRemain()),i=Object(h.a)(l,2),s=i[0],c=i[1],o=Object(n.useState)("default"),u=Object(h.a)(o,2),m=u[0],d=u[1],p=Object(Ze.d)((function(e){return e})),f=p.refreshTokenModal;p.username,Object(n.useEffect)((function(){if(f){var e=ce.addListener({time:250,condition:function(e,t){return!0},func:function(){c(ce.getTokenTimeRemain())}});d(e)}else ce.removeListener(m)}),[f]);var E=function(){ce.removeListener(m),At.logout(xt.userAuthLogout.LOGOUT_REFRESH_MODAL)};return r.a.createElement(L.a,{title:"Warning",visible:t,maskClosable:!1,onCancel:function(){E()},footer:[r.a.createElement(g.a,{key:"back",onClick:E},"Logout"),r.a.createElement(g.a,{key:"submit",type:"primary",onClick:function(){At.extendAuth().then((function(e){a(!1)})).catch((function(e){e.response&&console.log(e)}))}},"Refresh")]},"Your session will expire in ".concat(s,"s. Please click \u201cRefresh\u201d if you wish to remain logged in."))}));O.a.config({maxCount:2});var il=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).idleTimer=null,n.handleOnAction=n.handleOnAction.bind(Object(m.a)(n)),n.handleOnActive=n.handleOnActive.bind(Object(m.a)(n)),n.handleOnIdle=n.handleOnIdle.bind(Object(m.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;At.init();var t=this.props.cookies.cookies;this.props.isLogin&&B().then((function(t){var a,n,r=(null===t||void 0===t||null===(a=t.data)||void 0===a||null===(n=a.result)||void 0===n?void 0:n.node).filter((function(e){if("study"===e.labels[0])return{item:e}}));e.props.setAllStudies(r)})),this.props.isLogin&&Fe({username:t.username}).then((function(t){200===t.status&&e.props.setCurrentUser(t.data.result)})),this.props.isLogin&&J().then((function(t){200===t.status&&e.props.setPublicStudies(t.data.result)}));var a=window.location.href.split("?")[1];if(this.props.isLogin&&a&&a.includes("state")&&"patient"!==this.props.user.role){var n=Ae(a),r=n.state,l=n.code,i=localStorage.getItem("fitbitData"),s=(i=JSON.parse(i)).find((function(e){return r.includes(e.state)}));console.log(s,l),this.props.isLogin&&function(e,t,a){return z({url:"v1/user-status/".concat(e),method:"PUT",data:{state:t,code:a}})}(s.userId,s.state,l).then((function(e){200===e.status&&(O.a.success("".concat(s.name," has been successfully authorized on Fitbit.")),window.location.href="/study/".concat(s.id,"/patients"))}))}}},{key:"handleOnAction",value:function(e){this.props.isLogin&&(ce.getTokenTimeRemain()<100&&At.extendAuth())}},{key:"handleOnActive",value:function(e){console.log("user is active",e),console.log("time remaining",this.idleTimer.getRemainingTime())}},{key:"handleOnIdle",value:function(e){console.log("user is idle",e),console.log("last active",this.idleTimer.getLastActiveTime())}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{ref:function(t){e.idleTimer=t},timeout:9e5,onActive:this.handleOnActive,onIdle:this.handleOnIdle,onAction:this.handleOnAction,debounce:250}),r.a.createElement(n.Suspense,{fallback:"loading"},r.a.createElement(E.e,null,Un.map((function(e){return e.protected?r.a.createElement(ca,{path:e.path,key:e.path,exact:e.exact||!1,component:e.component}):r.a.createElement(E.c,{path:e.path,key:e.path,exact:e.exact||!1,component:e.component})}))),r.a.createElement(ll,null)))}}]),a}(n.Component),sl=Object(Ze.b)((function(e){return{isLogin:e.isLogin,user:e.user}}),{setAllStudies:ke,setCurrentUser:_e,setPublicStudies:we})(Object(v.a)(il)),cl=a(244),ol=a(165),ul=a(319);cl.a.use(ol.e).use(ul.a).init({debug:!1,lng:"en",ns:["errormessages"],backend:{loadPath:"".concat("","/locales/{{lng}}/{{ns}}.json")},interpolation:{escapeValue:!1}});cl.a;i.a.render(r.a.createElement(c.a,null,r.a.createElement(Ze.a,{store:he},r.a.createElement(s.a,{history:rl},r.a.createElement(sl,null)))),document.getElementById("root"))},166:function(e,t,a){e.exports={container:"Login_container__XMrK6",title:"Login_title__3U_k5"}},206:function(e,t,a){e.exports={container:"Registration_container__1GCGB",confirmationWrapper:"Registration_confirmationWrapper__OrX_F"}},212:function(e,t,a){e.exports={container:"Landing_container__8xwEZ",imgContent:"Landing_imgContent__2KJBF",study_description_collapse:"Landing_study_description_collapse__2BS8J"}},241:function(e,t,a){e.exports={desc:"Cards_desc__3iyOP",icon:"Cards_icon__2ysKh"}},242:function(e,t,a){e.exports={container:"StudiesContent_container__247eo",formItem:"StudiesContent_formItem__3TlwB",fileterContentOpen:"StudiesContent_fileterContentOpen__5m9xx"}},260:function(e,t,a){"use strict";(function(e){function n(t){var a=t.split(".")[1],n=e.from(a,"base64");return JSON.parse(n.toString())}a.d(t,"a",(function(){return n}))}).call(this,a(1423).Buffer)},302:function(e,t,a){e.exports={wrapper:"AdminUsers_wrapper__3jpsW",toolbar:"AdminUsers_toolbar__2Fqu5"}},314:function(e,t,a){e.exports={container:"Patients_container__KOi_o",imgContent:"Patients_imgContent__2tCCr"}},316:function(e,t,a){e.exports={container:"Researchers_container__Oamf3",imgContent:"Researchers_imgContent__3sDPe"}},331:function(e,t,a){e.exports=a(1610)},37:function(e,t,a){e.exports={container:"Config_container__MjeKm",imgContent:"Config_imgContent__h5k1_",custom_checkbox:"Config_custom_checkbox__3Gg3E",custom_tabs:"Config_custom_tabs__1VK3-",custom_general_info_form:"Config_custom_general_info_form__2BZfQ",custom_select_tag:"Config_custom_select_tag__xBwij",manifest_table:"Config_manifest_table__2TX0u",card_wrapper:"Config_card_wrapper__31bbM",button:"Config_button__2oug5",iconTitle:"Config_iconTitle__3G1jk",iconP:"Config_iconP__13dRA",manifestList:"Config_manifestList__2M_T9",addManifestTable:"Config_addManifestTable__1dw_H",menu:"Config_menu__3Kx86",input:"Config_input__3pbqO",antInput:"Config_antInput__1qW16"}},87:function(e,t,a){e.exports={sider:"Layout_sider__1icv9",content:"Layout_content__1aF4i","left-sider":"Layout_left-sider__2W8Pg",login:"Layout_login__3JzfR"}}},[[331,1,2]]]);
//# sourceMappingURL=main.b34eeaa4.chunk.js.map